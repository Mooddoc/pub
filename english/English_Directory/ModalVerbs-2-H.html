<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-heb.css"> <!-- Link to external CSS file -->
    <title>EZ42 -  拽</title>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
			<div class="logo-container">
				<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
					<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
				</a>
			</div>
                <h2>专转</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                    <li>砖 拽专  砖 注.</li>
                    <li>专/ 转 转砖  转专 转 转驻专 驻转.</li>
                    <li>砖 抓 注 拽转 转砖转 砖!</li>
                    <li>砖 砖 转  砖转  注专 砖 .</li>
                    <li>专 10 住转, 转砖转 转 爪.</li>
                    <li>砖 祝!</li>
                </ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 -  Green, A2 -  Blue,  Red,  Yellow,  Orange,  Beige,  Gray -->		
                <h1>驻注 注专  - </h1>
                <h1>Modal Verbs</h1>

                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>

                <div id="tabContent"></div>
            </div>
			
		<!--  Side Panel 2  -->
            <div id="sidePanel2" class="side-panel">
                <h2>转 转</h2>
				<p> 砖  转  转拽转!  砖 住祝 转 砖转 住祝 砖.</p>
                <ul id="animalFarm" class="emoji-list">
                </ul>
            </div>
        </div>
    </div>
    <div id="copyright-container"></div>

    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">砖专</button>
        </div>
    </div>

    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 1;

        const quizData = [ 												<!--  PH3 - Quiz Data   -->	
// Stage 1
[
  { "question": "She ___ (to speak) three languages fluently.", "options": ["must", "should", "can", "might"], "answer": 2 },
  { "question": "You ___ (to finish) your homework before playing games.", "options": ["might", "must", "can", "should"], "answer": 1 },
  { "question": "They ___ (to be) at the cafe; I'm not sure.", "options": ["should", "can", "might", "must"], "answer": 0 },
  { "question": "We ___ (to visit) the new museum this weekend.", "options": ["can", "might", "should", "must"], "answer": 2 },
  { "question": "He ___ (to apologize) for his mistake.", "options": ["should", "might", "must", "can"], "answer": 0 }
],
// Stage 2
[
  { "question": "He ___ (to play) the guitar beautifully.", "options": ["might", "can", "should", "must"], "answer": 1 },
  { "question": "You ___ (to take) an umbrella; it might rain.", "options": ["must", "should", "can", "might"], "answer": 1 },
  { "question": "They ___ (to come) to the party, but they haven't decided yet.", "options": ["can", "might", "must", "should"], "answer": 0 },
  { "question": "We ___ (to leave) early to avoid traffic.", "options": ["should", "must", "can", "might"], "answer": 0 },
  { "question": "She ___ (to visit) her grandmother more often.", "options": ["must", "should", "might", "can"], "answer": 1 }
],
// Stage 3
[
  { "question": "They ___ (to attend) the meeting if they have time.", "options": ["should", "must", "can", "might"], "answer": 3 },
  { "question": "We ___ (to submit) the report by Monday.", "options": ["might", "can", "should", "must"], "answer": 2 },
  { "question": "You ___ (to call) her; she's waiting.", "options": ["can", "should", "must", "might"], "answer": 0 },
  { "question": "He ___ (to finish) his work before leaving.", "options": ["must", "might", "can", "should"], "answer": 3 },
  { "question": "She ___ (to be) at the office now.", "options": ["can", "might", "should", "must"], "answer": 2 }
],
// Stage 4
[
  { "question": "You ___ (to wear) a coat; it's cold outside.", "options": ["must", "should", "can", "might"], "answer": 0 },
  { "question": "They ___ (to be) on their way now.", "options": ["can", "must", "might", "should"], "answer": 2 },
  { "question": "We ___ (to try) that new caf茅 downtown.", "options": ["should", "must", "might", "can"], "answer": 0 },
  { "question": "He ___ (to have) left already.", "options": ["might", "can", "must", "should"], "answer": 0 },
  { "question": "She ___ (to practice) more to improve.", "options": ["can", "should", "must", "might"], "answer": 1 }
],
// Stage 5
[
  { "question": "I ___ (to forget) her name; I'm not sure.", "options": ["should", "might", "can", "must"], "answer": 1 },
  { "question": "They ___ (to follow) the rules strictly.", "options": ["can", "must", "should", "might"], "answer": 1 },
  { "question": "We ___ (to take) a taxi to save time.", "options": ["must", "should", "might", "can"], "answer": 3 },
  { "question": "You ___ (to be) hungry after the trip.", "options": ["must", "can", "might", "should"], "answer": 2 },
  { "question": "He ___ (to finish) his work before leaving.", "options": ["might", "must", "should", "can"], "answer": 1 }
],
// Stage 6
[
  { "question": "She ___ (to attend) the meeting if she feels better.", "options": ["must", "can", "might", "should"], "answer": 2 },
  { "question": "You ___ (to submit) the report by Monday.", "options": ["should", "might", "must", "can"], "answer": 0 },
  { "question": "They ___ (to join) us for dinner.", "options": ["can", "should", "must", "might"], "answer": 1 },
  { "question": "We ___ (to leave) early to avoid traffic.", "options": ["might", "must", "can", "should"], "answer": 3 },
  { "question": "He ___ (to know) the answer to that question.", "options": ["must", "might", "should", "can"], "answer": 2 }
],
// Stage 7
[
  { "question": "They ___ (to finish) their work by noon.", "options": ["must", "might", "should", "can"], "answer": 0 },
  { "question": "We ___ (to go) to the beach if the weather is nice.", "options": ["should", "can", "must", "might"], "answer": 0 },
  { "question": "He ___ (to be) at home; the lights are on.", "options": ["can", "must", "might", "should"], "answer": 2 },
  { "question": "She ___ (to call) her mother more often.", "options": ["might", "should", "can", "must"], "answer": 1 },
  { "question": "You ___ (to read) this book; it's excellent.", "options": ["must", "can", "might", "should"], "answer": 3 }
],
// Stage 8
[
  { "question": "I ___ (to buy) a new car next year.", "options": ["must", "might", "can", "should"], "answer": 1 },
  { "question": "They ___ (to be) very tired after the trip.", "options": ["should", "can", "must", "might"], "answer": 2 },
  { "question": "We ___ (to help) them if they ask.", "options": ["can", "should", "might", "must"], "answer": 0 },
  { "question": "He ___ (to arrive) late due to traffic.", "options": ["must", "might", "can", "should"], "answer": 1 },
  { "question": "She ___ (to study) harder for the exam.", "options": ["should", "must", "might", "can"], "answer": 0 }
],
// Stage 9
[
  { "question": "He ___ (to take) a break; he's been working all day.", "options": ["must", "should", "can", "might"], "answer": 1 },
  { "question": "They ___ (to arrive) any minute now.", "options": ["should", "might", "can", "must"], "answer": 0 },
  { "question": "We ___ (to book) our tickets soon.", "options": ["can", "must", "might", "should"], "answer": 3 },
  { "question": "She ___ (to know) the answer.", "options": ["can", "might", "should", "must"], "answer": 0 },
  { "question": "You ___ (to finish) your work before leaving.", "options": ["might", "can", "must", "should"], "answer": 3 }
],
// Stage 10
[
  { "question": "You ___ (to help) your brother with his homework.", "options": ["should", "can", "must", "might"], "answer": 0 },
  { "question": "They ___ (to arrive) late if they miss the bus.", "options": ["can", "might", "must", "should"], "answer": 1 },
  { "question": "We ___ (to finish) this project by tomorrow.", "options": ["should", "might", "must", "can"], "answer": 2 },
  { "question": "She ___ (to play) the piano very well.", "options": ["must", "might", "should", "can"], "answer": 3 },
  { "question": "He ___ (to go) to the doctor if he feels sick.", "options": ["should", "can", "must", "might"], "answer": 0 }
],
// Stage 11
[
  { "question": "We ___ (to take) an umbrella; it looks like rain.", "options": ["should", "can", "must", "might"], "answer": 0 },
  { "question": "He ___ (to be) the one who called earlier.", "options": ["might", "should", "can", "must"], "answer": 0 },
  { "question": "She ___ (to speak) French after living in Paris.", "options": ["must", "can", "might", "should"], "answer": 1 },
  { "question": "They ___ (to finish) their work today.", "options": ["can", "must", "should", "might"], "answer": 1 },
  { "question": "You ___ (to apologize) for the mistake.", "options": ["must", "might", "can", "should"], "answer": 0 }
],
// Stage 12
[
  { "question": "I ___ (to visit) my grandparents this weekend.", "options": ["should", "might", "can", "must"], "answer": 1 },
  { "question": "You ___ (to listen) carefully to the instructions.", "options": ["must", "can", "should", "might"], "answer": 0 },
  { "question": "He ___ (to be) at the gym now.", "options": ["might", "must", "can", "should"], "answer": 0 },
  { "question": "We ___ (to book) our flights soon.", "options": ["can", "should", "might", "must"], "answer": 1 },
  { "question": "They ___ (to arrive) on time if they left early.", "options": ["might", "should", "must", "can"], "answer": 0 }
],
// Stage 13
[
  { "question": "She ___ (to finish) her assignment tonight.", "options": ["must", "can", "should", "might"], "answer": 2 },
  { "question": "They ___ (to go) to the concert if they get tickets.", "options": ["might", "must", "can", "should"], "answer": 2 },
  { "question": "He ___ (to be) at the office; his car is there.", "options": ["can", "should", "might", "must"], "answer": 0 },
  { "question": "We ___ (to leave) now to catch the train.", "options": ["must", "might", "can", "should"], "answer": 0 },
  { "question": "You ___ (to try) the new caf茅 downtown.", "options": ["should", "can", "must", "might"], "answer": 0 }
],
// Stage 14
[
  { "question": "He ___ (to have) forgotten the meeting.", "options": ["might", "must", "should", "can"], "answer": 0 },
  { "question": "We ___ (to submit) the report by Friday.", "options": ["can", "should", "must", "might"], "answer": 2 },
  { "question": "She ___ (to speak) Spanish after her classes.", "options": ["must", "can", "should", "might"], "answer": 1 },
  { "question": "They ___ (to be) lost; they aren't answering.", "options": ["can", "might", "should", "must"], "answer": 1 },
  { "question": "You ___ (to finish) your vegetables.", "options": ["should", "must", "might", "can"], "answer": 1 }
],
// Stage 15
[
  { "question": "They ___ (to have) taken a wrong turn.", "options": ["might", "must", "should", "can"], "answer": 1 },
  { "question": "He ___ (to practice) more to improve.", "options": ["should", "can", "might", "must"], "answer": 0 },
  { "question": "We ___ (to wait) here until they arrive.", "options": ["can", "must", "should", "might"], "answer": 0 },
  { "question": "She ___ (to be) at the library studying.", "options": ["might", "should", "can", "must"], "answer": 2 },
  { "question": "You ___ (to tell) him the truth.", "options": ["must", "might", "can", "should"], "answer": 0 }
],
// Stage 16
[
  { "question": "I ___ (to call) her later to check in.", "options": ["must", "might", "should", "can"], "answer": 1 },
  { "question": "You ___ (to wear) a helmet when cycling.", "options": ["should", "can", "must", "might"], "answer": 0 },
  { "question": "They ___ (to join) us if they finish early.", "options": ["can", "must", "might", "should"], "answer": 0 },
  { "question": "He ___ (to have) already left the office.", "options": ["might", "should", "can", "must"], "answer": 0 },
  { "question": "We ___ (to review) the plans again.", "options": ["must", "can", "should", "might"], "answer": 2 }
],
// Stage 17
[
  { "question": "She ___ (to be) there already.", "options": ["can", "might", "must", "should"], "answer": 1 },
  { "question": "They ___ (to check) the schedule again.", "options": ["should", "can", "might", "must"], "answer": 0 },
  { "question": "You ___ (to lock) the door before leaving.", "options": ["must", "should", "can", "might"], "answer": 1 },
  { "question": "We ___ (to take) a taxi to get there faster.", "options": ["can", "must", "should", "might"], "answer": 0 },
  { "question": "He ___ (to forget) about the meeting.", "options": ["should", "might", "must", "can"], "answer": 1 }
],
// Stage 18
[
  { "question": "I ___ (to see) you at the event tonight.", "options": ["can", "might", "should", "must"], "answer": 1 },
  { "question": "You ___ (to complete) the form.", "options": ["must", "should", "might", "can"], "answer": 0 },
  { "question": "He ___ (to play) the violin beautifully.", "options": ["should", "can", "must", "might"], "answer": 1 },
  { "question": "They ___ (to arrive) by now.", "options": ["might", "must", "can", "should"], "answer": 3 },
  { "question": "We ___ (to plan) our trip soon.", "options": ["should", "can", "might", "must"], "answer": 0 }
],
// Stage 19
[
  { "question": "He ___ (to know) the answer; ask him.", "options": ["must", "can", "might", "should"], "answer": 1 },
  { "question": "They ___ (to leave) early to beat traffic.", "options": ["should", "might", "must", "can"], "answer": 0 },
  { "question": "You ___ (to finish) your assignment today.", "options": ["might", "must", "should", "can"], "answer": 2 },
  { "question": "We ___ (to have) missed the train.", "options": ["can", "must", "might", "should"], "answer": 1 },
  { "question": "She ___ (to be) at home; the lights are off.", "options": ["might", "can", "should", "must"], "answer": 0 }
],
// Stage 20
[
  { "question": "She ___ (to need) to rest after the long trip.", "options": ["can", "must", "might", "should"], "answer": 1 },
  { "question": "We ___ (to visit) the museum tomorrow.", "options": ["might", "should", "must", "can"], "answer": 0 },
  { "question": "He ___ (to drive) carefully in the rain.", "options": ["should", "can", "might", "must"], "answer": 0 },
  { "question": "They ___ (to be) at the park right now.", "options": ["must", "might", "should", "can"], "answer": 1 },
  { "question": "You ___ (to turn off) the lights when you leave.", "options": ["should", "must", "can", "might"], "answer": 0 }
],


        ];

        const stageCount = quizData.length;

        const stateContents = {
			' 砖':
			'<div class="subject-overview-content subject-overview-content_heb">         <h1>驻注 注专  转: 专 拽祝</h1>                 <p>驻注 注专   驻注 注专 注 专, 驻砖专转, 专砖转  转.  拽  拽拽 , 住注  注 注转 爪 专  驻注转  专注. 专  注拽 专注 驻注 注专  驻爪: <span class="highlight_heb">should, might, can, -must</span>. 拽专 转 砖砖 砖, 转 , 住驻拽  转  注专   转 爪 砖转砖  .</p>         <h2 class="highlight_heb">转 注</h2>         <ol>             <li><a href="#what-are-modal-verbs" class="highlight_heb"> 驻注 注专 ?</a></li>             <li><a href="#general-characteristics" class="highlight_heb">驻  砖 驻注 注专 </a></li>             <li><a href="#detailed-explanation" class="highlight_heb">住专 驻专 注 驻注 注专 </a>                 <ul>                     <li><a href="#should">Should</a></li>                     <li><a href="#might">Might</a></li>                     <li><a href="#can">Can</a></li>                     <li><a href="#must">Must</a></li>                 </ul>             </li>             <li><a href="#conclusion" class="highlight_heb">住</a></li>         </ol>         <h2 id="what-are-modal-verbs" class="highlight_heb"> 驻注 注专 ?</h2>         <p>驻注 注专   住 砖 驻注 注专 (住注) 注 转 爪 专  砖 砖 专 驻 驻注  爪 爪 注  驻注 注拽专.  砖砖 爪 住专转, 转, 专砖转,  转 专.</p>         <p>驻注 注专  驻爪 转 :</p>         <ul>             <li>Can</li>             <li>Could</li>             <li>May</li>             <li>Might</li>             <li>Must</li>             <li>Shall</li>             <li>Should</li>             <li>Will</li>             <li>Would</li>         </ul>         <p>专 , 转拽 -should, might, can, -must.</p>         <h2 id="general-characteristics" class="highlight_heb">驻  砖 驻注 注专 </h2>         <p>驻 砖爪  驻注 注专 , 砖      注  驻注 注专 :</p>         <ul>             <li><span class="highlight_heb"> 爪专转 拽专:</span> 驻注 注专   爪专转 拽专 (to + 驻注). 砖,  驻砖专 专 <span class="english_heb">to must</span>  <span class="english_heb">to can</span>.</li>             <li><span class="highlight_heb"> 爪专转 -s:</span> 驻注 注专   拽 -s 祝 砖砖 .  <span class="english_heb">he can</span>,  <span class="english_heb">he cans</span>.</li>             <li><span class="highlight_heb">专  爪专转 住住:</span> 专 驻注 注专   爪专转 住住 砖 驻注 注拽专 (拽专  to). 砖, <span class="english_heb">She can swim</span>.</li>             <li><span class="highlight_heb"> Do/Does 砖转 砖:</span> 驻注 注专  爪专 砖转 砖  砖砖 -do/does. 砖, <span class="english_heb">Can you swim?</span> -<span class="english_heb">He cannot (can&#39;t) swim</span>.</li>         </ul>         <h2 id="detailed-explanation" class="highlight_heb">住专 驻专 注 驻注 注专 </h2>         <h3 id="should" class="highlight_heb">Should</h3>         <p class="subheading_heb">砖注转 砖砖:</p>         <ul>             <li><span class="highlight_heb">注爪  爪转:</span> Should 砖砖 转 注爪  爪转.                 <p class="english_heb">You should study for your exams.</p>                 <p class="english_heb">She should see a doctor.</p>             </li>             <li><span class="highlight_heb">爪驻  住专转:</span>  注 砖砖 住专  爪驻.                 <p class="english_heb">They should be here by now.</p>                 <p class="english_heb">The train should arrive soon.</p>             </li>             <li><span class="highlight_heb"> (驻转 拽 -Must):</span> 爪注   驻转 转拽祝 -must.                 <p class="english_heb">Employees should wear their ID badges at all times.</p>             </li>             <li><span class="highlight_heb">砖驻 转:</span> 砖砖 砖驻 转  注 爪 驻砖专.                 <p class="english_heb">Should you need assistance, please contact us.</p>             </li>         </ul>         <p class="subheading_heb">转:</p>         <p class="english_heb">I think you should apologize to her.</p>         <p class="english_heb">You shouldn&#39;t eat so much junk food.</p>         <p class="english_heb">Where should we go for dinner?</p>         <p class="subheading_heb">爪专转 砖:</p>         <p>Should not  shouldn&#39;t.</p>         <p class="english_heb">You shouldn&#39;t be late for the meeting.</p>         <h3 id="might" class="highlight_heb">Might</h3>         <p class="subheading_heb">砖注转 砖砖:</p>         <ul>             <li><span class="highlight_heb">驻砖专转:</span> Might 注 驻砖专转 拽  -转.                 <p class="english_heb">It might rain later.</p>                 <p class="english_heb">She might come to the party.</p>             </li>             <li><span class="highlight_heb">专砖转 (驻专 驻转 驻抓):</span> 砖砖 拽砖转 专砖转 驻 住 (转专 驻专 -may).                 <p class="english_heb">Might I suggest an alternative?</p>             </li>             <li><span class="highlight_heb"> 注专 砖 May:</span> 专 注拽祝, might 砖砖  注专 砖 may.                 <p class="english_heb">Direct speech: She said, "I may come late."</p>                 <p class="english_heb">Reported speech: She said she might come late.</p>             </li>         </ul>         <p class="subheading_heb">转:</p>         <p class="english_heb">He might not like this idea.</p>         <p class="english_heb">They might have already left.</p>         <p class="english_heb">Might you join us for dinner?</p>         <p class="subheading_heb">爪专转 砖:</p>         <p>Might not  mightn&#39;t (  mightn&#39;t 驻转 驻抓 转专  驻专).</p>         <p class="english_heb">I might not go to the concert.</p>         <h3 id="can" class="highlight_heb">Can</h3>         <p class="subheading_heb">砖注转 砖砖:</p>         <ul>             <li><span class="highlight_heb">转  拽转:</span> 爪 砖砖 住 注砖转 砖.                 <p class="english_heb">I can swim.</p>                 <p class="english_heb">She can speak three languages.</p>             </li>             <li><span class="highlight_heb">专砖转 ( 驻专):</span> 砖砖 拽砖转  转 专砖转.                 <p class="english_heb">Can I borrow your pen?</p>                 <p class="english_heb">You can leave early today.</p>             </li>             <li><span class="highlight_heb">驻砖专转:</span> 注 砖砖 驻砖专.                 <p class="english_heb">Smoking can cause cancer.</p>                 <p class="english_heb">It can be very cold here in winter.</p>             </li>             <li><span class="highlight_heb">拽砖转:</span> 砖砖 拽砖转  驻专转.                 <p class="english_heb">Can you help me with this?</p>             </li>         </ul>         <p class="subheading_heb">转:</p>         <p class="english_heb">We can&#39;t find our keys.</p>         <p class="english_heb">Can they finish the project on time?</p>         <p class="english_heb">Yes, you can use my phone.</p>         <p class="subheading_heb">爪专转 砖:</p>         <p>Cannot  can&#39;t.</p>         <p class="english_heb">He cannot (can&#39;t) come to the phone right now.</p>         <h3 id="must" class="highlight_heb">Must</h3> <p class="subheading_heb">砖注转 砖砖:</p>     <ul>         <li><span class="highlight_heb">  专 拽:</span> 爪 砖砖 专  专砖.             <p class="english_heb">You must wear a seatbelt.</p>             <p class="english_heb">Students must submit their assignments by Friday.</p>         </li>         <li><span class="highlight_heb">住拽 转  转:</span> 砖砖 砖专 专  砖.             <p class="english_heb">She must be at least 90 years old.</p>             <p class="english_heb">They left an hour ago; they must be home by now.</p>         </li>         <li><span class="highlight_heb">住专 (爪专转 砖):</span> Must not 爪 砖砖 住专.             <p class="english_heb">You must not smoke inside the building.</p>             <p class="english_heb">Visitors must not touch the exhibits.</p>         </li>     </ul>     <p class="subheading_heb">转:</p>     <p class="english_heb">I must finish this report today.</p>     <p class="english_heb">You must be tired after your long journey.</p>     <p class="english_heb">Must we stay until the end?</p>     <p class="subheading_heb">爪专转 砖:</p>     <p>Must not  mustn&#39;t.</p>     <p class="english_heb">You mustn&#39;t tell anyone our secret.</p>     <h2 id="conclusion" class="highlight_heb">住</h2>     <p>转 驻注 注专   拽专转 砖 拽拽 .  注专  注 转, 驻砖专转, 专砖转 转 专转 拽.  住 专:</p>     <ul>         <li><span class="highlight_heb">Should:</span> 砖砖 注爪, 爪转, 爪驻转 转 拽转.</li>         <li><span class="highlight_heb">Might:</span> 注 驻砖专转 砖砖 拽砖转 住转  专 注拽祝.</li>         <li><span class="highlight_heb">Can:</span> 爪 转, 专砖转, 驻砖专转 砖砖 拽砖转  驻专转.</li>         <li><span class="highlight_heb">Must:</span> 注  拽, 专, 转 住专 爪专转 砖 砖.</li>     </ul>     <p>专: 驻注 注专  转  爪专转 住住 砖 驻注 注拽专,   砖 爪专 转 砖.</p>     <p>注  专转 注 驻注 注专   砖砖, 转 转拽砖专 注转 专 转专  转 住 砖 砖转 转. 砖 转,  转住住 专 专   驻注 砖转 拽拽 专注!</p> </div>'
			,'转专': '<div id="stage-number" class="stage-number">砖 1 转 ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">住转: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">拽转 转砖转</button>'
        };

        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === '转专') {
                renderQuiz();
                updateProgressBar();
            }
        }

		function renderQuiz() {
				const quizContainer = document.getElementById("quiz-content");
				quizContainer.innerHTML = '';
				quizData[currentStage].forEach((question, index) => {
				const questionElement = document.createElement("div");
				questionElement.className = "question";
				
				questionElement.innerHTML = `
					<p>${index + 1}. ${question.question}</p>
					<div class="options">
						<select id="q${index}">
							<option value="">Select</option>
							${question.options.map((option, i) => `
								<option value="${i}">${option}</option>
							`).join("")}
						</select>
					</div>
					<div class="result" id="result${index}"></div>
				`;

				quizContainer.appendChild(questionElement);
			});

			updateStageNumber();
		}

		function checkStage() {
			attempts++;
			document.getElementById("attempts").textContent = `住转: ${attempts}`;

			let correctCount = 0;
			const totalQuestions = quizData[currentStage].length;

			quizData[currentStage].forEach((question, index) => {
				const resultElement = document.getElementById(`result${index}`);
				const selectElement = document.getElementById(`q${index}`);
				const selectedOption = selectElement.value;
				const userAnswer = parseInt(selectedOption);

				if (userAnswer === question.answer) {
					resultElement.textContent = "!";
					resultElement.style.color = "green";
					correctCount++;
				} else {
					resultElement.textContent = "转砖 砖.";
					resultElement.style.color = "red";
				}

				if (attempts >= 10) {
					selectElement.value = question.answer;
					selectElement.disabled = true;
					resultElement.textContent += ` 转砖  : ${question.options[question.answer]}`;
				}
			});

			console.log(`砖 ${currentStage + 1}: ${correctCount} 转 转 ${totalQuestions}`);

			if (correctCount === totalQuestions) {
				console.log(`砖 ${currentStage + 1} 砖. 住祝 ${totalQuestions} 转.`);
				addAnimalsToFarm(totalQuestions); // Add animals to the farm

				if (currentStage < stageCount - 1) {
					singleStageConfetti();
					showEncouragingPopup(correctCount, totalQuestions, true);
					currentStage++; // Increment stage immediately
					updateProgressBar(); // Update progress bar right after incrementing stage
					console.log(`注专 砖 ${currentStage + 1}`);
					setTimeout(() => {
						attempts = 0;
						renderQuiz();
						document.getElementById("attempts").textContent = `住转: ${attempts}`;
					}, 1500);
				} else {
					// This is the final stage completion
					currentStage++;
					updateProgressBar(); // This will now show 100%
					allStagesConfetti();
					showModal(" ! 砖转 转  砖.");
				}
			} else {
				showEncouragingPopup(correctCount, totalQuestions, false);
				if (attempts >= 10) {
					showModal("注转 住驻专 住转 拽住. 转砖转 转 砖驻.");
				}
			}

			scrollToTop();
		}
		
        function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
            const incorrectCount = totalQuestions - correctCount;
            let message = `拽转 ${correctCount} 转 -${incorrectCount} 砖转.`;
            
            if (correctCount === totalQuestions) {
                message += " 爪 砖!";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
                message += " 注 爪转! 专 砖砖 转 转 !";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
                message += " 抓 ! 砖 转专  砖驻专 拽专!";
            } else {
                message += "  转专!  住 注专  . 住 砖!";
            }

            if (isStageComplete) {
                message += "\n\n 砖  住转, 注专 砖 .";
            }

            showModal(message);
        }

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `住转: ${attempts}`;
			updateStageNumber();
		}

		function updateProgressBar() {
			const progressBar = document.getElementById("progress-bar");
			const completedStages = currentStage; // Remove the +1 here
			const progress = (completedStages / stageCount) * 100;
			const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
			progressBar.style.width = `${roundedProgress}%`;
			progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
			console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
		}

        function updateStageNumber() {
            const stageElement = document.getElementById("stage-number");
            stageElement.textContent = `砖 ${currentStage + 1} 转 ${stageCount}`;
        }

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"", "", "", "", "", "", "", "", "", "Α",
			"", "", "", "", "", "", "", "", "",
			"", "", "", "", "", "", "", "", "",
			"", "Ε", "", "", "", "", "", "", "Ι", "",
			"", "", "", "", "", "", "Θ", "", "",
			"", "", "", "", "", "", "", "", "", "",
			"", "Η", "", "", "", "Β", "", "", "",
			"", "", "", "", "", "", "", "", "",
			"", "", "", "", "Ξ", "", "", "", "", "",
			"", "", "", "", "", "Ζ", "", "", "", "",
			"", "", "", "", ""
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
    </script>
</body>
</html>