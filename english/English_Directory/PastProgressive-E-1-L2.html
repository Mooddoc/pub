<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-eng.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
    <title>✅ EZ42 LIVE - It's EZ</title>
	<style>

	</style>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
				<div class="logo-container">
					<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
						<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
					</a>
				</div>
			<h2>Instructions & Rules</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                <li>Read each question carefully.</li>
                <li>Select the best answer.</li>
                <li>Click "Check Answers" when you're ready to see how you did!</li>
                <li>You can check your answers multiple times to improve your score.</li>
                <li>Correct answers are revealed after 10 attempts.</li>
                <li>You must answer all questions correctly to proceed to the next stage.</li>
                <li>There are 20 stages, each with 5 questions.</li>
				<li>Have fun!</li>
			</ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->	
                <h1>Past Progressive/Continuous - A2</h1>
                
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>
                <div id="tabContent"></div>
            </div>
			
		<!--  Side Panel 2  -->
			<div id="sidePanel2" class="side-panel">
				<h2>Animal Farm</h2>
				<p>Watch your farm grow as you progress! Each completed stage adds new animal friends to your collection.</p>
				<ul id="animalFarm" class="emoji-list">
				</ul>
			</div>
        </div>
    </div>
    <div id="copyright-container"></div>

    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">OK</button>
        </div>
    </div>
	<button id="scrollToTopBtn" title="Go to top">↑</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

        const quizData = [ 												//  PH3 - Quiz Data   	
// Stage 1
[
  { 
    question: "I ___ to the store when you called.", 
    options: ["was going", "went", "am going", "go", "have gone"], 
    answer: "was going" 
  },
  { 
    question: "They ___ soccer when it started to rain.", 
    options: ["were playing", "played", "are playing", "play", "had played"], 
    answer: "were playing" 
  },
  { 
    question: "She ___ dinner when the phone rang.", 
    options: ["was cooking", "cooked", "is cooking", "cooks", "has cooked"], 
    answer: "was cooking" 
  },
  { 
    question: "We ___ TV when the power went out.", 
    options: ["were watching", "watched", "are watching", "watch", "had watched"], 
    answer: "were watching" 
  },
  { 
    question: "He ___ to music while he cleaned his room.", 
    options: ["was listening", "listened", "is listening", "listens", "had listened"], 
    answer: "was listening" 
  }
],

// Stage 2
[
  { 
    question: "They ___ in the garden when it started to rain.", 
    options: ["were working", "are working", "worked", "work", "was working"], 
    answer: "were working" 
  },
  { 
    question: "She ___ a book all afternoon.", 
    options: ["was reading", "is reading", "read", "reads", "was read"], 
    answer: "was reading" 
  },
  { 
    question: "I ___ for my keys when you called.", 
    options: ["was looking", "am looking", "looked", "look", "was look"], 
    answer: "was looking" 
  },
  { 
    question: "We ___ dinner when the guests arrived.", 
    options: ["were having", "are having", "had", "have", "was having"], 
    answer: "were having" 
  },
  { 
    question: "He ___ to the radio when the news came on.", 
    options: ["was listening", "is listening", "listened", "listen", "was listen"], 
    answer: "was listening" 
  }
],

// Stage 3
[
  { 
    question: "They ___ their homework when the power went out.", 
    options: ["were doing", "are doing", "did", "do", "was doing"], 
    answer: "were doing" 
  },
  { 
    question: "She ___ in the park when it started raining.", 
    options: ["was jogging", "is jogging", "jogged", "jog", "was jog"], 
    answer: "was jogging" 
  },
  { 
    question: "I ___ a movie when you arrived.", 
    options: ["was watching", "am watching", "watched", "watch", "was watch"], 
    answer: "was watching" 
  },
  { 
    question: "We ___ to the new song when the CD player broke.", 
    options: ["were listening", "are listening", "listened", "listen", "was listening"], 
    answer: "were listening" 
  },
  { 
    question: "He ___ his bike when it started to snow.", 
    options: ["was riding", "is riding", "rode", "ride", "was ride"], 
    answer: "was riding" 
  }
],

// Stage 4
[
  { 
    question: "They ___ for the bus when I saw them.", 
    options: ["were waiting", "are waiting", "waited", "wait", "was waiting"], 
    answer: "were waiting" 
  },
  { 
    question: "She ___ her nails when the phone rang.", 
    options: ["was getting", "is getting", "got", "get", "was get"], 
    answer: "was getting" 
  },
  { 
    question: "I ___ to fix the computer when it crashed.", 
    options: ["was trying", "am trying", "tried", "try", "was try"], 
    answer: "was trying" 
  },
  { 
    question: "We ___ a walk when we met our neighbors.", 
    options: ["were taking", "are taking", "took", "take", "was taking"], 
    answer: "were taking" 
  },
  { 
    question: "He ___ his presentation when the projector failed.", 
    options: ["was giving", "is giving", "gave", "give", "was give"], 
    answer: "was giving" 
  }
],

// Stage 5
[
  { 
    question: "They ___ dinner when the guests arrived.", 
    options: ["were preparing", "are preparing", "prepared", "prepare", "was preparing"], 
    answer: "were preparing" 
  },
  { 
    question: "She ___ her favorite song when the music stopped.", 
    options: ["was dancing", "is dancing", "danced", "dance", "was dance"], 
    answer: "was dancing" 
  },
  { 
    question: "I ___ a letter when my computer crashed.", 
    options: ["was writing", "am writing", "wrote", "write", "was write"], 
    answer: "was writing" 
  },
  { 
    question: "We ___ on our project when the deadline was extended.", 
    options: ["were working", "are working", "worked", "work", "was working"], 
    answer: "were working" 
  },
  { 
    question: "He ___ a marathon when it started to rain.", 
    options: ["was running", "is running", "ran", "run", "was run"], 
    answer: "was running" 
  }
],

// Stage 6
[
  { 
    question: "They ___ when I called them.", 
    options: ["were sleeping", "are sleeping", "slept", "sleep", "was sleeping"], 
    answer: "were sleeping" 
  },
  { 
    question: "She ___ when I saw her.", 
    options: ["was studying", "is studying", "studied", "studies", "was study"], 
    answer: "was studying" 
  },
  { 
    question: "I ___ when the accident happened.", 
    options: ["was not driving", "am not driving", "did not drive", "do not drive", "was not drive"], 
    answer: "was not driving" 
  },
  { 
    question: "They ___ the concert when the power went out.", 
    options: ["were enjoying", "are enjoying", "enjoyed", "enjoy", "was enjoying"], 
    answer: "were enjoying" 
  },
  { 
    question: "She ___ when the power went out.", 
    options: ["was reading", "is reading", "read", "reads", "was read"], 
    answer: "was reading" 
  }
],

// Stage 7
[
  { 
    question: "What ___ you ___ at 9 PM last night?", 
    options: ["were, doing", "are, doing", "was, doing", "were, do", "are, do"], 
    answer: "were, doing" 
  },
  { 
    question: "They ___ TV when I arrived.", 
    options: ["were not watching", "are not watching", "did not watch", "do not watch", "was not watching"], 
    answer: "were not watching" 
  },
  { 
    question: "He ___ a letter when the phone rang.", 
    options: ["was writing", "is writing", "wrote", "write", "was write"], 
    answer: "was writing" 
  },
  { 
    question: "You ___ when the earthquake occurred.", 
    options: ["were walking", "are walking", "walked", "walk", "was walking"], 
    answer: "were walking" 
  },
  { 
    question: "She ___ a song when I entered the room.", 
    options: ["was singing", "is singing", "sang", "sing", "was sing"], 
    answer: "was singing" 
  }
],

// Stage 8
[
  { 
    question: "They ___ when the lights went out.", 
    options: ["were studying", "are studying", "studied", "study", "was studying"], 
    answer: "were studying" 
  },
  { 
    question: "He ___ football when I called.", 
    options: ["was playing", "is playing", "played", "plays", "was play"], 
    answer: "was playing" 
  },
  { 
    question: "I ___ to music while cooking.", 
    options: ["was listening", "is listening", "listened", "listen", "was listen"], 
    answer: "was listening" 
  },
  { 
    question: "What ___ they ___ when you saw them?", 
    options: ["were, doing", "are, doing", "was, doing", "were, do", "are, do"], 
    answer: "were, doing" 
  },
  { 
    question: "She ___ attention when the teacher asked.", 
    options: ["was not paying", "is not paying", "did not pay", "does not pay", "was not pay"], 
    answer: "was not paying" 
  }
],

// Stage 9
[
  { 
    question: "They ___ TV when the doorbell rang.", 
    options: ["were watching", "are watching", "watched", "watch", "was watching"], 
    answer: "were watching" 
  },
  { 
    question: "She ___ the piano when I arrived.", 
    options: ["was playing", "is playing", "played", "plays", "was play"], 
    answer: "was playing" 
  },
  { 
    question: "I ___ dinner when you called.", 
    options: ["was having", "is having", "had", "have", "was have"], 
    answer: "was having" 
  },
  { 
    question: "What ___ he ___ during the meeting?", 
    options: ["was, doing", "is, doing", "were, doing", "was, do", "is, do"], 
    answer: "was, doing" 
  },
  { 
    question: "They ___ when I joined them.", 
    options: ["were not listening", "are not listening", "did not listen", "do not listen", "was not listening"], 
    answer: "were not listening" 
  }
],

// Stage 10
[
  { 
    question: "You ___ all night when I checked on you.", 
    options: ["were studying", "are studying", "studied", "study", "was studying"], 
    answer: "were studying" 
  },
  { 
    question: "She ___ when the teacher entered the classroom.", 
    options: ["was explaining", "is explaining", "explained", "explain", "was explain"], 
    answer: "was explaining" 
  },
  { 
    question: "I ___ a movie when the power went out.", 
    options: ["was watching", "is watching", "watched", "watch", "was watch"], 
    answer: "was watching" 
  },
  { 
    question: "What ___ they ___ at 10 PM?", 
    options: ["were, doing", "are, doing", "was, doing", "were, do", "are, do"], 
    answer: "were, doing" 
  },
  { 
    question: "He ___ his homework when I called.", 
    options: ["was doing", "is doing", "did", "do", "was do"], 
    answer: "was doing" 
  }
],

// Stage 11
[
  { 
    question: "They ___ when the fire alarm went off.", 
    options: ["were evacuating", "are evacuating", "evacuated", "evacuate", "was evacuating"], 
    answer: "were evacuating" 
  },
  { 
    question: "She ___ her presentation when the computer crashed.", 
    options: ["was preparing", "is preparing", "prepared", "prepare", "was prepare"], 
    answer: "was preparing" 
  },
  { 
    question: "I ___ in the garden when it started raining.", 
    options: ["was working", "is working", "worked", "work", "was work"], 
    answer: "was working" 
  },
  { 
    question: "What ___ you ___ when the earthquake hit?", 
    options: ["were, doing", "are, doing", "was, doing", "were, do", "are, do"], 
    answer: "were, doing" 
  },
  { 
    question: "They ___ when I arrived because it was too late.", 
    options: ["were not sleeping", "are not sleeping", "did not sleep", "do not sleep", "was not sleeping"], 
    answer: "were not sleeping" 
  }
],

// Stage 12
[
  { 
    question: "She ___ a novel when her friend called.", 
    options: ["was reading", "is reading", "read", "reads", "was read"], 
    answer: "was reading" 
  },
  { 
    question: "They ___ when the storm hit.", 
    options: ["were hiding", "are hiding", "hid", "hide", "was hiding"], 
    answer: "were hiding" 
  },
  { 
    question: "I ___ to finish the report when the deadline changed.", 
    options: ["was trying", "am trying", "tried", "try", "was try"], 
    answer: "was trying" 
  },
  { 
    question: "What ___ he ___ at midnight?", 
    options: ["was, doing", "is, doing", "were, doing", "was, do", "is, do"], 
    answer: "was, doing" 
  },
  { 
    question: "They ___ their instruments when the conductor arrived.", 
    options: ["were tuning", "are tuning", "tuned", "tune", "was tuning"], 
    answer: "were tuning" 
  }
],

// Stage 13
[
  { 
    question: "She ___ when I saw her.", 
    options: ["was not studying", "is not studying", "did not study", "does not study", "was not study"], 
    answer: "was not studying" 
  },
  { 
    question: "You ___ all day when I tried to reach you.", 
    options: ["were working", "are working", "worked", "work", "was working"], 
    answer: "were working" 
  },
  { 
    question: "I ___ my bicycle when it started to rain.", 
    options: ["was fixing", "is fixing", "fixed", "fix", "was fix"], 
    answer: "was fixing" 
  },
  { 
    question: "What ___ they ___ at the library?", 
    options: ["were, researching", "are, researching", "was, researching", "were, research", "are, research"], 
    answer: "were, researching" 
  },
  { 
    question: "He ___ his car when the storm began.", 
    options: ["was washing", "is washing", "washed", "wash", "was wash"], 
    answer: "was washing" 
  }
],

// Stage 14
[
  { 
    question: "They ___ when the news broke.", 
    options: ["were discussing", "are discussing", "discussed", "discuss", "was discussing"], 
    answer: "were discussing" 
  },
  { 
    question: "She ___ the documents when her boss called.", 
    options: ["was organizing", "is organizing", "organized", "organize", "was organize"], 
    answer: "was organizing" 
  },
  { 
    question: "I ___ a new recipe when you visited.", 
    options: ["was trying", "is trying", "tried", "try", "was try"], 
    answer: "was trying" 
  },
  { 
    question: "What ___ you ___ when the teacher entered?", 
    options: ["were, doing", "are, doing", "was, doing", "were, do", "are, do"], 
    answer: "were, doing" 
  },
  { 
    question: "They ___ because it was too early.", 
    options: ["were not sleeping", "are not sleeping", "did not sleep", "do not sleep", "was not sleeping"], 
    answer: "were not sleeping" 
  }
],

// Stage 15
[
  { 
    question: "She ___ a presentation when the computer crashed.", 
    options: ["was giving", "is giving", "gave", "give", "was give"], 
    answer: "was giving" 
  },
  { 
    question: "They ___ when I saw them.", 
    options: ["were traveling", "are traveling", "traveled", "travel", "was traveling"], 
    answer: "were traveling" 
  },
  { 
    question: "I ___ to fix the leak all morning.", 
    options: ["was trying", "am trying", "tried", "try", "was try"], 
    answer: "was trying" 
  },
  { 
    question: "What ___ he ___ during the lunch break?", 
    options: ["was, doing", "is, doing", "were, doing", "was, do", "is, do"], 
    answer: "was, doing" 
  },
  { 
    question: "They ___ their project when the advisor arrived.", 
    options: ["were presenting", "are presenting", "presented", "present", "was presenting"], 
    answer: "were presenting" 
  }
],

// Stage 16
[
  { 
    question: "She ___ when the emergency call came.", 
    options: ["was not responding", "is not responding", "did not respond", "does not respond", "was not respond"], 
    answer: "was not responding" 
  },
  { 
    question: "You ___ all evening when I came home.", 
    options: ["were painting", "are painting", "painted", "paint", "was painting"], 
    answer: "were painting" 
  },
  { 
    question: "I ___ for the exam when the power went out.", 
    options: ["was studying", "am studying", "studied", "study", "was study"], 
    answer: "was studying" 
  },
  { 
    question: "What ___ they ___ while waiting for the meeting?", 
    options: ["were, discussing", "are, discussing", "was, discussing", "were, discuss", "are, discuss"], 
    answer: "were, discussing" 
  },
  { 
    question: "He ___ his vacation plans when he received the news.", 
    options: ["was making", "is making", "made", "make", "was make"], 
    answer: "was making" 
  }
],

// Stage 17
[
  { 
    question: "They ___ dinner when the unexpected visitor arrived.", 
    options: ["were preparing", "are preparing", "prepared", "prepare", "was preparing"], 
    answer: "were preparing" 
  },
  { 
    question: "She ___ the new software when the bug was discovered.", 
    options: ["was testing", "is testing", "tested", "test", "was test"], 
    answer: "was testing" 
  },
  { 
    question: "I ___ the documents when you sent the email.", 
    options: ["was reviewing", "is reviewing", "reviewed", "review", "was review"], 
    answer: "was reviewing" 
  },
  { 
    question: "What ___ you ___ while waiting for the train?", 
    options: ["were, reading", "are, reading", "was, reading", "were, read", "are, read"], 
    answer: "were, reading" 
  },
  { 
    question: "They ___ the strategy when the opponent changed tactics.", 
    options: ["were adjusting", "are adjusting", "adjusted", "adjust", "was adjusting"], 
    answer: "were adjusting" 
  }
],

// Stage 18
[
  { 
    question: "She ___ when the unexpected event occurred.", 
    options: ["was meditating", "is meditating", "meditated", "meditate", "was meditate"], 
    answer: "was meditating" 
  },
  { 
    question: "They ___ during the workshop when the fire alarm went off.", 
    options: ["were participating", "are participating", "participated", "participate", "was participating"], 
    answer: "were participating" 
  },
  { 
    question: "I ___ the new policy when the announcement was made.", 
    options: ["was studying", "am studying", "studied", "study", "was study"], 
    answer: "was studying" 
  },
  { 
    question: "What ___ he ___ while you were away?", 
    options: ["was, working on", "is, working on", "were, working on", "was, work on", "is, work on"], 
    answer: "was, working on" 
  },
  { 
    question: "They ___ the building when the storm hit.", 
    options: ["were repairing", "are repairing", "repaired", "repair", "was repairing"], 
    answer: "were repairing" 
  }
],

// Stage 19
[
  { 
    question: "She ___ when the power outage occurred.", 
    options: ["was sleeping", "is sleeping", "slept", "sleep", "was sleep"], 
    answer: "was sleeping" 
  },
  { 
    question: "You ___ the concert when the power went out.", 
    options: ["were enjoying", "are enjoying", "enjoyed", "enjoy", "was enjoying"], 
    answer: "were enjoying" 
  },
  { 
    question: "I ___ the package when the delivery was delayed.", 
    options: ["was receiving", "is receiving", "received", "receive", "was receive"], 
    answer: "was receiving" 
  },
  { 
    question: "What ___ they ___ when you arrived at the party?", 
    options: ["were, dancing", "are, dancing", "was, dancing", "were, dance", "are, dance"], 
    answer: "were, dancing" 
  },
  { 
    question: "He ___ his speech when the microphone failed.", 
    options: ["was delivering", "is delivering", "delivered", "deliver", "was deliver"], 
    answer: "was delivering" 
  }
],

// Stage 20
[
  { 
    question: "They ___ when the unexpected event took place.", 
    options: ["were celebrating", "are celebrating", "celebrated", "celebrate", "was celebrating"], 
    answer: "were celebrating" 
  },
  { 
    question: "She ___ the entire time when the meeting ended.", 
    options: ["was attending", "is attending", "attended", "attend", "was attend"], 
    answer: "was attending" 
  },
  { 
    question: "I ___ for the exam when the internet connection dropped.", 
    options: ["was studying", "am studying", "studied", "study", "was study"], 
    answer: "was studying" 
  },
  { 
    question: "What ___ you ___ while waiting for the interview?", 
    options: ["were, preparing", "are, preparing", "was, preparing", "were, prepare", "are, prepare"], 
    answer: "were, preparing" 
  },
  { 
    question: "They ___ the presentation when the leader arrived.", 
    options: ["were finalizing", "are finalizing", "finalized", "finalize", "was finalizing"], 
    answer: "were finalizing" 
  }
],

// Stage 21
[
  { 
    question: "She ___ when the sudden noise startled her.", 
    options: ["was meditating", "is meditating", "meditated", "meditate", "was meditate"], 
    answer: "was meditating" 
  },
  { 
    question: "They ___ during the seminar when the speaker made a surprising announcement.", 
    options: ["were listening attentively", "are listening attentively", "listened attentively", "listen attentively", "was listening attentively"], 
    answer: "were listening attentively" 
  },
  { 
    question: "I ___ the document when you submitted the feedback.", 
    options: ["was reviewing", "is reviewing", "reviewed", "review", "was review"], 
    answer: "was reviewing" 
  },
  { 
    question: "What ___ he ___ while coordinating the team?", 
    options: ["was, managing", "is, managing", "were, managing", "was, manage", "is, manage"], 
    answer: "was, managing" 
  },
  { 
    question: "They ___ the software update when the system crashed.", 
    options: ["were installing", "are installing", "installed", "install", "was installing"], 
    answer: "were installing" 
  }
],

// Stage 22
[
  { 
    question: "She ___ when the emergency siren sounded.", 
    options: ["was driving", "is driving", "drove", "drive", "was drive"], 
    answer: "was driving" 
  },
  { 
    question: "You ___ throughout the workshop when the break was announced.", 
    options: ["were participating actively", "are participating actively", "participated actively", "participate actively", "was participating actively"], 
    answer: "were participating actively" 
  },
  { 
    question: "I ___ the new guidelines when the meeting was postponed.", 
    options: ["was studying", "am studying", "studied", "study", "was study"], 
    answer: "was studying" 
  },
  { 
    question: "What ___ they ___ when the unexpected visitor arrived?", 
    options: ["were, preparing", "are, preparing", "was, preparing", "were, prepare", "are, prepare"], 
    answer: "were, preparing" 
  },
  { 
    question: "He ___ his notes when the professor interrupted.", 
    options: ["was organizing", "is organizing", "organized", "organize", "was organize"], 
    answer: "was organizing" 
  }
],

// Stage 23
[
  { 
    question: "They ___ when the critical error was detected.", 
    options: ["were troubleshooting", "are troubleshooting", "troubleshooted", "troubleshoot", "was troubleshooting"], 
    answer: "were troubleshooting" 
  },
  { 
    question: "She ___ the testing phase when the system crashed.", 
    options: ["was monitoring", "is monitoring", "monitored", "monitor", "was monitor"], 
    answer: "was monitoring" 
  },
  { 
    question: "I ___ the proposal when the client requested changes.", 
    options: ["was drafting", "is drafting", "drafted", "draft", "was draft"], 
    answer: "was drafting" 
  },
  { 
    question: "What ___ you ___ while handling multiple tasks?", 
    options: ["were, handling", "are, handling", "was, handling", "were, handle", "are, handle"], 
    answer: "were, handling" 
  },
  { 
    question: "They ___ the final version when the deadline was extended.", 
    options: ["were editing", "are editing", "edited", "edit", "was editing"], 
    answer: "were editing" 
  }
],

// Stage 24
[
  { 
    question: "She ___ when the unexpected challenge arose.", 
    options: ["was strategizing", "is strategizing", "strategized", "strategize", "was strategize"], 
    answer: "was strategizing" 
  },
  { 
    question: "They ___ during the negotiation when the power went out.", 
    options: ["were discussing terms", "are discussing terms", "discussed terms", "discuss terms", "was discussing terms"], 
    answer: "were discussing terms" 
  },
  { 
    question: "I ___ the contract when new clauses were added.", 
    options: ["was reviewing", "is reviewing", "reviewed", "review", "was review"], 
    answer: "was reviewing" 
  },
  { 
    question: "What ___ he ___ while coordinating between different departments?", 
    options: ["was, managing", "is, managing", "were, managing", "was, manage", "is, manage"], 
    answer: "was, managing" 
  },
  { 
    question: "They ___ the system when the outage occurred.", 
    options: ["were updating", "are updating", "updated", "update", "was updating"], 
    answer: "were updating" 
  }
],

// Stage 25
[
  { 
    question: "She ___ when the urgent task was assigned.", 
    options: ["was analyzing", "is analyzing", "analyzed", "analyze", "was analyze"], 
    answer: "was analyzing" 
  },
  { 
    question: "You ___ throughout the conference when the fire alarm sounded.", 
    options: ["were taking notes", "are taking notes", "took notes", "take notes", "was taking notes"], 
    answer: "were taking notes" 
  },
  { 
    question: "I ___ the presentation when unexpected feedback was received.", 
    options: ["was preparing", "is preparing", "prepared", "prepare", "was prepare"], 
    answer: "was preparing" 
  },
  { 
    question: "What ___ they ___ while implementing the new strategy?", 
    options: ["were, executing", "are, executing", "was, executing", "were, execute", "are, execute"], 
    answer: "were, executing" 
  },
  { 
    question: "He ___ his responsibilities when the manager intervened.", 
    options: ["was fulfilling", "is fulfilling", "fulfilled", "fulfill", "was fulfill"], 
    answer: "was fulfilling" 
  }
],

// Stage 26
[
  { 
    question: "They ___ when the critical update was required.", 
    options: ["were implementing", "are implementing", "implemented", "implement", "was implementing"], 
    answer: "were implementing" 
  },
  { 
    question: "She ___ the testing phase when the bug was discovered.", 
    options: ["was monitoring", "is monitoring", "monitored", "monitor", "was monitor"], 
    answer: "was monitoring" 
  },
  { 
    question: "I ___ the new feature when the feedback was provided.", 
    options: ["was developing", "is developing", "developed", "develop", "was develop"], 
    answer: "was developing" 
  },
  { 
    question: "What ___ you ___ while handling multiple projects?", 
    options: ["were, juggling", "are, juggling", "was, juggling", "were, juggle", "are, juggle"], 
    answer: "were, juggling" 
  },
  { 
    question: "They ___ the marketing campaign when the budget was revised.", 
    options: ["were planning", "are planning", "planned", "plan", "was planning"], 
    answer: "were planning" 
  }
],

// Stage 27
[
  { 
    question: "She ___ when the unexpected issue arose.", 
    options: ["was troubleshooting", "is troubleshooting", "troubleshooted", "troubleshoot", "was troubleshoot"], 
    answer: "was troubleshooting" 
  },
  { 
    question: "They ___ during the product launch when the website crashed.", 
    options: ["were coordinating activities", "are coordinating activities", "coordinated activities", "coordinate activities", "was coordinating activities"], 
    answer: "were coordinating activities" 
  },
  { 
    question: "I ___ the data when the system failed.", 
    options: ["was analyzing", "is analyzing", "analyzed", "analyze", "was analyze"], 
    answer: "was analyzing" 
  },
  { 
    question: "What ___ he ___ while managing the crisis?", 
    options: ["was, addressing", "is, addressing", "were, addressing", "was, address", "is, address"], 
    answer: "was, addressing" 
  },
  { 
    question: "They ___ the infrastructure when the breach was detected.", 
    options: ["were securing", "are securing", "secured", "secure", "was securing"], 
    answer: "were securing" 
  }
],

// Stage 28
[
  { 
    question: "She ___ when the sudden change was announced.", 
    options: ["was adapting", "is adapting", "adapted", "adapt", "was adapt"], 
    answer: "was adapting" 
  },
  { 
    question: "You ___ features throughout the development cycle when the deadline was changed.", 
    options: ["were testing", "are testing", "tested", "test", "was testing"], 
    answer: "were testing" 
  },
  { 
    question: "I ___ the requirements when the scope was modified.", 
    options: ["was reviewing", "is reviewing", "reviewed", "review", "was review"], 
    answer: "was reviewing" 
  },
  { 
    question: "What ___ they ___ while optimizing the process?", 
    options: ["were, improving", "are, improving", "was, improving", "were, improve", "are, improve"], 
    answer: "were, improving" 
  },
  { 
    question: "He ___ his strategy when new data emerged.", 
    options: ["was adjusting", "is adjusting", "adjusted", "adjust", "was adjust"], 
    answer: "was adjusting" 
  }
],

// Stage 29
[
  { 
    question: "They ___ when the unexpected challenge presented itself.", 
    options: ["were brainstorming", "are brainstorming", "brainstormed", "brainstorm", "was brainstorming"], 
    answer: "were brainstorming" 
  },
  { 
    question: "She ___ the research data when the new information came in.", 
    options: ["was compiling", "is compiling", "compiled", "compile", "was compile"], 
    answer: "was compiling" 
  },
  { 
    question: "I ___ the project timeline when new tasks were added.", 
    options: ["was revising", "is revising", "revised", "revise", "was revise"], 
    answer: "was revising" 
  },
  { 
    question: "What ___ you ___ while balancing multiple deadlines?", 
    options: ["were, managing", "are, managing", "was, managing", "were, manage", "are, manage"], 
    answer: "were, managing" 
  },
  { 
    question: "They ___ the user feedback when the update was released.", 
    options: ["were incorporating", "are incorporating", "incorporated", "incorporate", "was incorporating"], 
    answer: "were incorporating" 
  }
],

// Stage 30
[
  { 
    question: "She ___ when the unexpected situation demanded immediate action.", 
    options: ["was reacting", "is reacting", "reacted", "react", "was react"], 
    answer: "was reacting" 
  },
  { 
    question: "They ___ plans during the implementation when the system failed.", 
    options: ["were executing", "are executing", "executed", "execute", "was executing"], 
    answer: "were executing" 
  },
  { 
    question: "I ___ the final report when the last-minute changes were requested.", 
    options: ["was finalizing", "is finalizing", "finalized", "finalize", "was finalize"], 
    answer: "was finalizing" 
  },
  { 
    question: "What ___ he ___ while coordinating between different departments?", 
    options: ["was, facilitating", "is, facilitating", "were, facilitating", "was, facilitate", "is, facilitate"], 
    answer: "was, facilitating" 
  },
  { 
    question: "They ___ the compliance standards when the audit was conducted.", 
    options: ["were ensuring", "are ensuring", "ensured", "ensure", "was ensuring"], 
    answer: "were ensuring" 
  }
]

        ];

        const stageCount = quizData.length;

        const stateContents = {


		   'Practice': `<div id="stage-number" class="stage-number">Stage 1 of ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">Attempts: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">Check Answers</button>`
           ,'Subject Overview 🗝️': `<div class="subject-overview-content">   <h1>Past Progressive in English: A Detailed Guide</h1>   <p><strong>Past Progressive</strong> is used to describe actions that were ongoing at a specific time in the past. It highlights the duration of the action and is often used when one action was interrupted by another, or when two actions were happening at the same time.</p>   <hr>   <h2>Table of Contents</h2>   <ol>     <li><a href="#what-is-past-progressive">What is Past Progressive?</a></li>     <li><a href="#how-to-use-past-progressive">How to Use Past Progressive</a></li>     <li><a href="#examples-of-use">Examples of Use</a></li>     <li><a href="#conclusion">Conclusion</a></li>   </ol>   <hr>   <h2 id="what-is-past-progressive">What is Past Progressive?</h2>   <p>Past Progressive is a tense used to describe actions that were ongoing at a specific point in the past. It emphasizes the fact that the action had a duration and was not immediately completed.</p>   <hr>   <h2 id="how-to-use-past-progressive">How to Use Past Progressive</h2>   <p>To form the Past Progressive, use the past tense of the verb "to be" (<em>was/were</em>) followed by the base verb with an <em>-ing</em> ending.</p>   <ul>     <li><strong>Ongoing actions:</strong> Describes an action that was happening at a specific time in the past.<br>         <p><em>At 8 PM, I was watching a movie.</em></p></li>     <li><strong>Interrupted actions:</strong> Describes an ongoing action that was interrupted by another action.<br>         <p><em>I was cooking dinner when the phone rang.</em></p></li>     <li><strong>Parallel actions:</strong> Describes two actions happening simultaneously.<br>         <p><em>She was talking on the phone while walking to work.</em></p></li>   </ul>   <hr>   <h2 id="examples-of-use">Examples of Use</h2>   <p>Here are some examples of how to use the Past Progressive tense:</p>   <ul>     <li><strong>Ongoing action at a specific time:</strong><br>         <p><em>They were playing soccer all afternoon.</em></p></li>     <li><strong>Interrupted action:</strong><br>         <p><em>I was reading a book when you called.</em></p></li>     <li><strong>Parallel actions:</strong><br>         <p><em>We were having dinner while they were watching TV.</em></p></li>   </ul>   <hr>   <h2 id="conclusion">Conclusion</h2>   <p>The Past Progressive is a useful tense for describing ongoing actions in the past, especially when they are interrupted by another action or happening alongside another action. It helps add context and clarity when discussing events in the past.</p>   <ul>     <li><strong>Past Progressive:</strong> Used to describe ongoing actions in the past, often in combination with <em>while</em> or <em>as</em>.</li>   </ul>   <p><strong>Remember:</strong> To use the Past Progressive, always use the past form of "to be" (<em>was/were</em>) followed by a verb ending in <em>-ing</em>.</p>   <hr>   <p>Keep practicing this tense to improve your ability to describe actions in the past with more precision and clarity.</p> </div>

			`

		
		};

        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'Practice') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';
    quizData[currentStage].forEach((question, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question-one-line";
        
        // Create label for the question text
        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${question.question}`;
        
        // Create div for result feedback
        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-ltr";
        resultDiv.id = `result${index}`;
        
        // Create select element for answers
        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;
        
        // Add default option
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Select";
        select.appendChild(defaultOption);
        
        // Shuffle and add answer options
        const shuffledOptions = shuffleArray([...question.options]);
        shuffledOptions.forEach((option, optionIndex) => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
        
        // Append elements to questionElement in the desired order
        questionElement.appendChild(label);
        questionElement.appendChild(resultDiv); // Feedback before dropdown
        questionElement.appendChild(select);
        
        quizContainer.appendChild(questionElement);
    });

    updateStageNumber();
}

		function checkStage() {
   attempts++;
    document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[currentStage].length;

    quizData[currentStage].forEach((question, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        if (selectedAnswer === question.answer) {
            resultElement.textContent = "Correct!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "Incorrect answer.";
            resultElement.style.color = "red";
        }

        if (attempts >= 10) {
            selectElement.value = question.answer;
            selectElement.disabled = true;
            resultElement.textContent += ` The correct answer is: ${question.answer}`;
        }
    });

    console.log(`Stage ${currentStage + 1}: ${correctCount} correct out of ${totalQuestions}`);

			if (correctCount === totalQuestions) {
				console.log(`Stage ${currentStage + 1} completed. Adding ${totalQuestions} animals.`);
				addAnimalsToFarm(totalQuestions); // Add animals to the farm

				if (currentStage < stageCount - 1) {
					singleStageConfetti();
					showEncouragingPopup(correctCount, totalQuestions, true);
					currentStage++; // Increment stage immediately
					updateProgressBar(); // Update progress bar right after incrementing stage
					console.log(`Moving to stage ${currentStage + 1}`);
					setTimeout(() => {
						attempts = 0;
						renderQuiz();
						document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
					}, 1500);
				} else {
					// This is the final stage completion
					currentStage++;
					updateProgressBar(); // This will now show 100%
					allStagesConfetti();
					showModal("Congratulations! You've completed all stages.");
				}
			} else {
				showEncouragingPopup(correctCount, totalQuestions, false);
				if (attempts >= 10) {
					showModal("You've reached the maximum number of attempts. The correct answers have been revealed.");
				}
			}

			scrollToTop();
		}
		
		function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
			const incorrectCount = totalQuestions - correctCount;
			let message = `You got ${correctCount} correct and ${incorrectCount} incorrect.`;
			
			// Add encouraging message based on performance
			if (correctCount === totalQuestions) {
				message += " Perfect score!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
				message += " Great job! You're really getting the hang of this!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
				message += " Good effort! Keep practicing and you'll improve in no time!";
			} else {
				message += " Don't give up! Every attempt helps you learn. Try again!";
			}

			// Add stage completion message if applicable
			if (isStageComplete) {
				message += "\n\n You've completed this stage. Moving to the next stage.";
			}

			showModal(message);
		}

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
			updateStageNumber();
		}

		function updateProgressBar() {
			const progressBar = document.getElementById("progress-bar");
			const completedStages = currentStage; // Remove the +1 here
			const progress = (completedStages / stageCount) * 100;
			const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
			progressBar.style.width = `${roundedProgress}%`;
			progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
			console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
		}

		function updateStageNumber() {
			const stageElement = document.getElementById("stage-number");
			stageElement.textContent = `Stage ${currentStage + 1} of ${stageCount}`;
		}

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>