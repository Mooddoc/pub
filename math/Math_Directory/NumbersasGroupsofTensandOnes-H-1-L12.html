<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-heb.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
	<title>✅ EZ42 - זה קל</title>
	 
	<style>
	
	</style>
	
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
			<div class="logo-container">
				<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
					<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
				</a>
			</div>
                <h2>הוראות</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                    <li>יש לקרוא כל שאלה בעיון.</li>
                    <li>בחר/י את התשובה הנכונה ביותר מתוך התפריט הנפתח.</li>
                    <li>יש ללחוץ על בדיקת תשובות כשמוכנים!</li>
                    <li>יש להשלים את כל השאלות כדי לעבור לשלב הבא.</li>
                    <li>לאחר 5 ניסיונות, התשובות הנכונות יוצגו.</li>
                    <li>שיהיה כיף!</li>
                </ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->		
                <h1>מספרים כקבוצות של עשרות ואחדות</h1>
				
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>

                <div id="tabContent">
                    <!--PLACHOLDERFORNEWGAME-START-->

                    <!--PLACHOLDERFORNEWGAME-END-->
                </div>
            </div>
			
		<!--  Side Panel 2  -->
            <div id="sidePanel2" class="side-panel">
                <h2>חוות החיות</h2>
				<p>החווה שלך גדלה תוך כדי התקדמות! כל שלב מוסיף חיות חדשות לאוסף שלך.</p>
                <ul id="animalFarm" class="emoji-list">
                </ul>
            </div>
        </div>
    </div>
    <div id="copyright-container"></div>

    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">אישור</button>
        </div>
    </div>
	<button id="scrollToTopBtn" title="Go to top">↑</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

        const quizData = [ 												//  PH3 - Quiz Data 
// Stage 1 - היכרות עם ספירת אובייקטים וקיבוץ בסיסי
[  {    question: "ספר את התפוחים: 🍎🍎🍎. כמה תפוחים יש?",    options: ["3", "2", "4", "5", "1"],
    answer: "3"
  },
  {
    question: "כמה כוכבים אתה רואה? ⭐⭐⭐⭐",
    options: ["4", "3", "5", "6", "2"],
    answer: "4"
  },
  {
    question: "ספר את הלבבות: ❤️❤️. כמה לבבות יש?",
    options: ["2", "3", "1", "4", "5"],
    answer: "2"
  },
  {
    question: "כמה שמשות אתה יכול לספור? ☀️☀️☀️☀️☀️",
    options: ["5", "4", "6", "3", "2"],
    answer: "5"
  },
  {
    question: "ספר את הירחים: 🌙🌙🌙. כמה ירחים יש?",
    options: ["3", "4", "2", "5", "1"],
    answer: "3"
  }
],

// Stage 2 - קיבוץ פשוט עם מספרים קטנים
[  {    question: "הנה כמה כדורים: ⚽⚽⚽⚽⚽ ⚽. כמה כדורים בסך הכל?",    options: ["6", "5", "7", "4", "8"],
    answer: "6"
  },
  {
    question: "ספר את הפרחים בקבוצות: 🌸🌸🌸 🌸🌸. כמה פרחים בסך הכל?",
    options: ["5", "4", "6", "3", "7"],
    answer: "5"
  },
  {
    question: "עצים בקבוצות: 🌳🌳 🌳🌳. כמה עצים יש?",
    options: ["4", "3", "5", "2", "6"],
    answer: "4"
  },
  {
    question: "ספר בקבוצות: 🎈🎈 🎈🎈 🎈. כמה בלונים בסך הכל?",
    options: ["5", "4", "6", "3", "7"],
    answer: "5"
  },
  {
    question: "כמה בסך הכל: 🐶🐶 🐶. ספר את הכלבים.",
    options: ["3", "4", "2", "5", "1"],
    answer: "3"
  }
],

// Stage 3 - היכרות עם עשרות
[  {    question: "ספר את הכוכבים: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐. כמה יש?",    options: ["10", "9", "11", "8", "12"],
    answer: "10"
  },
  {
    question: "קבוצות של לבבות: ❤️❤️❤️❤️❤️ ❤️❤️. כמה לבבות בסך הכל?",
    options: ["7", "6", "8", "9", "5"],
    answer: "7"
  },
  {
    question: "ספר בקבוצות: 🎈🎈🎈🎈🎈 🎈🎈🎈. כמה בלונים בסך הכל?",
    options: ["8", "7", "9", "6", "10"],
    answer: "8"
  },
  {
    question: "כמה תפוחים: 🍎🍎🍎🍎🍎 🍎🍎🍎🍎. ספר אותם.",
    options: ["9", "8", "10", "7", "11"],
    answer: "9"
  },
  {
    question: "ספר את הסך הכל: 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟. כמה כוכבים יש?",
    options: ["10", "9", "11", "8", "12"],
    answer: "10"
  }
],

// Stage 4 - זיהוי עשרות ואחדות
[  {    question: "ספר קבוצות: 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈. כמה אחדות יש?",    options: ["1", "2", "3", "4", "5"],
    answer: "1"
  },
  {
    question: "הסתכל: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐. כמה אחרי העשר?",
    options: ["2", "3", "1", "4", "5"],
    answer: "2"
  },
  {
    question: "ספר: 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸. כמה אחדות יש?",
    options: ["3", "2", "4", "1", "5"],
    answer: "3"
  },
  {
    question: "קבוצות: 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 🐶🐶🐶🐶. כמה נוספים אחרי העשר?",
    options: ["4", "3", "5", "2", "6"],
    answer: "4"
  },
  {
    question: "ספר: 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈. כמה קבוצות של עשר?",
    options: ["1", "2", "3", "0", "4"],
    answer: "1"
  }
],

// Stage 5 - עבודה עם עשרות ואחדות
[  {    question: "ספר: 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟. איזה מספר זה?",    options: ["12", "11", "13", "10", "14"],
    answer: "12"
  },
  {
    question: "קבוצות: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐. איזה מספר מוצג?",
    options: ["13", "12", "14", "11", "15"],
    answer: "13"
  },
  {
    question: "ספר הכל: 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈. סך הכל?",
    options: ["14", "13", "15", "12", "16"],
    answer: "14"
  },
  {
    question: "כמה יש: 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸?",
    options: ["15", "14", "16", "13", "17"],
    answer: "15"
  },
  {
    question: "ספר קבוצות של עשר ואחדות: ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️. סך הכל?",
    options: ["16", "15", "17", "14", "18"],
    answer: "16"
  }
],

// Stage 6 - עבודה עם מספרים גדולים יותר בעשרה
[  {    question: "ספר את הפרחים: 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸. כמה יש?",    options: ["17", "16", "18", "15", "19"],
    answer: "17"
  },
  {
    question: "כמה כוכבים יוצרים 1 עשר ו-8 אחדות? ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐",
    options: ["18", "17", "19", "16", "20"],
    answer: "18"
  },
  {
    question: "ספר בעשרות ואחדות: 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈. סך הכל?",
    options: ["19", "18", "20", "17", "21"],
    answer: "19"
  },
  {
    question: "צור קבוצות של עשר: ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️. כמה עשרות יש?",
    options: ["2", "1", "3", "4", "0"],
    answer: "2"
  },
  {
    question: "ספר את האחדות: 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟. כמה אחדות יש?",
    options: ["5", "0", "4", "1", "6"],
    answer: "5"
  }
],

// Stage 7 - הבנת ערך המקום
[  {    question: "ב-🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 (20), כמה קבוצות של עשר?",    options: ["2", "1", "3", "4", "0"],
    answer: "2"
  },
  {
    question: "כמה אחדות ב: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐? (13)",
    options: ["3", "2", "4", "1", "5"],
    answer: "3"
  },
  {
    question: "איזה מספר יש לו 1 עשר ו-5 אחדות? 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸",
    options: ["15", "51", "5", "10", "50"],
    answer: "15"
  },
  {
    question: "ספר עשרות תחילה: 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 🐶. כמה בסך הכל?",
    options: ["16", "15", "17", "14", "18"],
    answer: "16"
  },
  {
    question: "אם יש לך 2 עשרות, כמה ❤️ נוספים אתה צריך כדי להגיע ל-23?",
    options: ["3", "2", "4", "5", "1"],
    answer: "3"
  }
],

// Stage 8 - השוואת מספרים עם עשרות ואחדות
[  {    question: "מי יותר: 1 עשר ו-5 אחדות (🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟) או 2 עשרות?",    options: ["20", "15", "אותו דבר", "25", "10"],
    answer: "20"
  },
  {
    question: "מה בא אחרי 19 כדורים? 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈",
    options: ["20", "19", "21", "18", "22"],
    answer: "20"
  },
  {
    question: "כמה נוספים כדי להגיע ל-2 עשרות: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐?",
    options: ["3", "2", "4", "5", "1"],
    answer: "3"
  },
  {
    question: "מה זה 1 עשר ו-7 אחדות ועוד 1 נוסף? 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸 + 🌸",
    options: ["18", "17", "19", "16", "20"],
    answer: "18"
  },
  {
    question: "כמה עשרות ב-24 כוכבים? ⭐ (עשרים וארבע)",
    options: ["2", "4", "3", "1", "5"],
    answer: "2"
  }
],

// Stage 9 - חיבור פשוט עם עשרות ואחדות
[  {    question: "אם יש לך 1 עשר (🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈) ומוסיף עוד 5 🎈, איזה מספר יש לך?",    options: ["15", "11", "14", "16", "10"],
    answer: "15"
  },
  {
    question: "מה זה 2 עשרות ועוד 3 לבבות? ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ + ❤️❤️❤️",
    options: ["23", "20", "22", "21", "24"],
    answer: "23"
  },
  {
    question: "הוסף 1 עשר ל-13 כוכבים: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐ + ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐",
    options: ["23", "24", "22", "21", "25"],
    answer: "23"
  },
  {
    question: "מה זה 16 ועוד 1 עשר? 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟 + 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟",
    options: ["26", "25", "27", "24", "28"],
    answer: "26"
  },
  {
    question: "הוסף 5 ל-2 עשרות: 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 🐶🐶🐶🐶🐶 + 🐶🐶🐶🐶🐶",
    options: ["25", "24", "26", "23", "27"],
    answer: "25"
  }
],

// Stage 10 - פעולות מעורבות עם עשרות ואחדות
[  {    question: "מה זה 2 עשרות ו-3 אחדות פחות 1 אחדות? 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈 - 🎈",    options: ["22", "21", "23", "20", "24"],
    answer: "22"
  },
  {
    question: "הוסף 1 עשר ל-17 פרחים: 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸 🌸🌸 + 🌸🌸🌸🌸🌸 🌸🌸🌸🌸🌸",
    options: ["27", "26", "28", "25", "29"],
    answer: "27"
  },
  {
    question: "מה זה 1 פחות מ-2 עשרות? ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ - ⭐",
    options: ["19", "18", "20", "17", "21"],
    answer: "19"
  },
  {
    question: "כמה עשרות ב-25 לבבות? ❤️ (עשרים וחמש)",
    options: ["2", "5", "3", "1", "4"],
    answer: "2"
  },
  {
    question: "מה זה 3 יותר מ-2 עשרות? 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 + 🌟🌟🌟",
    options: ["23", "22", "24", "21", "25"],
    answer: "23"
  }
],

// Stage 11 - הבנת עשרות מרובות
[  {    question: "כמה קבוצות של עשר ב: 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈 🎈🎈🎈?",    options: ["2", "3", "4", "5", "1"],
    answer: "2"
  },
  {
    question: "ספר: 3 עשרות ו-2 אחדות הם ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐. סך הכל?",
    options: ["32", "23", "31", "33", "30"],
    answer: "32"
  },
  {
    question: "כמה אחדות ב-24 פרחים? 🌸 (עשרים וארבע)",
    options: ["4", "2", "14", "24", "40"],
    answer: "4"
  },
  {
    question: "איזה מספר הוא 2 עשרות ו-8 אחדות? ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️❤️❤️ ❤️❤️❤️",
    options: ["28", "82", "20", "38", "18"],
    answer: "28"
  },
  {
    question: "ספר עשרות תחילה: 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟🌟🌟🌟🌟 🌟. איזה מספר?",
    options: ["26", "25", "27", "24", "28"],
    answer: "26"
  }
],

// Stage 12 - בעיות מילוליות פשוטות עם עשרות
[  {    question: "יש לי 2 עשרות של תפוחים 🍎, ומקבל עוד 5 🍎. כמה תפוחים יש עכשיו?",    options: ["25", "15", "20", "30", "35"],
    answer: "25"
  },
  {
    question: "יש 3 עשרות של כוכבים ⭐. כמה נוספים כדי להגיע ל-34?",
    options: ["4", "3", "5", "6", "7"],
    answer: "4"
  },
  {
    question: "יש לך 27 לבבות ❤️. כמה עשרות?",
    options: ["2", "7", "27", "20", "17"],
    answer: "2"
  },
  {
    question: "2 עשרות של בלונים 🎈 ועוד 1 עשר שווה לכמה בלונים?",
    options: ["30", "20", "21", "40", "31"],
    answer: "30"
  },
  {
    question: "אני רואה 35 פרחים 🌸. האם זה יותר מ-3 עשרות?",
    options: ["כן", "לא", "אותו דבר", "לא יכול לומר", "לא זה ולא זה"],
    answer: "כן"
  }
],

// Stage 13 - השוואת מספרים גדולים יותר
[  {    question: "מי יותר: 2 עשרות ו-7 אחדות או 3 עשרות ו-2 אחדות? 🎈",    options: ["32", "27", "אותו דבר", "37", "22"],
    answer: "32"
  },
  {
    question: "ספר: ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐⭐⭐ ⭐⭐⭐. כמה יש?",
    options: ["33", "32", "34", "31", "35"],
    answer: "33"
  },
  {
    question: "מה בא אחרי 29 לבבות? ❤️",
    options: ["30", "31", "28", "20", "19"],
    answer: "30"
  },
  {
    question: "האם 35 קרוב יותר ל-3 עשרות או ל-4 עשרות? 🌸",
    options: ["3 עשרות", "4 עשרות", "אותו דבר", "לא זה ולא זה", "לא יכול לומר"],
    answer: "אותו דבר"
  },
  {
    question: "לאיזה מספר יש יותר אחדות: 24 או 31? 🌟",
    options: ["31", "24", "אותו דבר", "לא זה ולא זה", "לא יכול לומר"],
    answer: "24"
  }
],

// Stage 14 - חיבור פשוט עם מספרים גדולים יותר
[  {    question: "הוסף 1 עשר ל-25 בלונים: 🎈🎈🎈🎈🎈 ... 🎈🎈🎈🎈🎈 + 🎈🎈🎈🎈🎈 🎈🎈🎈🎈🎈",    options: ["35", "26", "45", "15", "25"],
    answer: "35"
  },
  {
    question: "מה זה 2 עשרות ו-6 אחדות ועוד 2 נוספים? ⭐",
    options: ["28", "26", "27", "29", "25"],
    answer: "28"
  },
  {
    question: "הוסף 3 עשרות ו-4 אחדות: \u202A30 + 4 = ?\u202C",
    options: ["34", "43", "31", "33", "44"],
    answer: "34"
  },
  {
    question: "מה זה 27 ועוד 1 עשר? 🌸",
    options: ["37", "28", "17", "47", "26"],
    answer: "37"
  },
  {
    question: "כמה זה 2 עשרות ועוד 2 עשרות ועוד 5? ❤️",
    options: ["45", "25", "40", "35", "50"],
    answer: "45"
  }
],

// Stage 15 - מספרים חסרים ותבניות
[  {    question: "מלא את המספר החסר: 25, 26, __, 28, 29 🎈",    options: ["27", "24", "30", "31", "25"],
    answer: "27"
  },
  {
    question: "מה בא בין 3 עשרות ו-32? ⭐",
    options: ["31", "29", "33", "30", "34"],
    answer: "31"
  },
  {
    question: "השלם: 15, 25, 35, __ 🌸",
    options: ["45", "40", "30", "50", "55"],
    answer: "45"
  },
  {
    question: "תבנית: 22, 24, 26, __, 30 ❤️",
    options: ["28", "27", "29", "25", "31"],
    answer: "28"
  },
  {
    question: "מה חסר: 2 עשרות, 21, __, 23, 24 🌟",
    options: ["22", "20", "25", "19", "26"],
    answer: "22"
  }
],

// Stage 16 - חיסור פשוט עם עשרות
[  {    question: "אם יש לך 3 עשרות (🎈🎈🎈🎈🎈...🎈🎈🎈🎈🎈) ומסיר 1 עשר, כמה בלונים נשארו?",    options: ["20", "30", "10", "40", "25"],
    answer: "20"
  },
  {
    question: "התחל עם 25 כוכבים ⭐. הורד 5. כמה נשארו?",
    options: ["20", "15", "25", "30", "19"],
    answer: "20"
  },
  {
    question: "מה זה 34 לבבות ❤️ פחות 1 עשר?",
    options: ["24", "33", "23", "14", "44"],
    answer: "24"
  },
  {
    question: "קח 2 מ-28 פרחים 🌸. איזה מספר עכשיו?",
    options: ["26", "27", "25", "24", "29"],
    answer: "26"
  },
  {
    question: "3 עשרות פחות 1 עשר שווה לכמה כוכבים? ⭐",
    options: ["20", "10", "30", "40", "25"],
    answer: "20"
  }
],

// Stage 17 - בעיות מילוליות עם חיסור
[  {    question: "היו לי 25 בלונים 🎈. 5 עפו. כמה נשארו?",    options: ["20", "15", "25", "30", "10"],
    answer: "20"
  },
  {
    question: "היו 34 כוכבים ⭐. 4 נעלמו. עכשיו יש...",
    options: ["30", "29", "31", "24", "34"],
    answer: "30"
  },
  {
    question: "התחל עם 3 עשרות של לבבות ❤️. תרום 1 עשר. נשאר עם?",
    options: ["20", "30", "10", "40", "25"],
    answer: "20"
  },
  {
    question: "היו 27 פרחים 🌸. אבדו 7. כמה נשארו?",
    options: ["20", "21", "19", "17", "26"],
    answer: "20"
  },
  {
    question: "38 כוכבים ⭐ פחות 8 שווה ל?",
    options: ["30", "31", "29", "28", "40"],
    answer: "30"
  }
],

// Stage 18 - פעולות מעורבות עם בעיות מילוליות
[  {    question: "2 עשרות של בלונים 🎈 ועוד 5, ואז הורד 3. כמה יש?",    options: ["22", "25", "20", "23", "21"],
    answer: "22"
  },
  {
    question: "התחל עם 15 כוכבים ⭐, הוסף 1 עשר, ואז הורד 2. סך הכל עכשיו?",
    options: ["23", "25", "13", "24", "22"],
    answer: "23"
  },
  {
    question: "היו 3 עשרות של לבבות ❤️, אבד 1 עשר, קיבל עוד 5. כמה יש?",
    options: ["25", "20", "35", "15", "30"],
    answer: "25"
  },
  {
    question: "4 עשרות של פרחים 🌸 פחות 1 עשר, ועוד 3. סך הכל?",
    options: ["33", "43", "23", "30", "13"],
    answer: "33"
  },
  {
    question: "26 כוכבים ⭐, הורד 6, הוסף 1 עשר. עכשיו יש?",
    options: ["30", "20", "36", "40", "16"],
    answer: "30"
  }
],

// Stage 19 - תבניות מורכבות וסדרות
[  {    question: "השלם: 20, 22, 24, __, 28, 30 🎈",    options: ["26", "25", "23", "27", "29"],
    answer: "26"
  },
  {
    question: "תבנית: 15, 25, 35, __, 55 ⭐",
    options: ["45", "40", "50", "30", "20"],
    answer: "45"
  },
  {
    question: "מלא: 33, 30, 27, __, 21 ❤️",
    options: ["24", "23", "25", "26", "22"],
    answer: "24"
  },
  {
    question: "מה הבא: 18, 20, 22, 24, __ 🌸",
    options: ["26", "25", "23", "27", "28"],
    answer: "26"
  },
  {
    question: "השלם: 40, 35, 30, __, 20 ⭐",
    options: ["25", "24", "26", "15", "35"],
    answer: "25"
  }
],

// Stage 20 - בעיות מילוליות רב-שלביות
[  {    question: "יש לי 2 עשרות של בלונים 🎈. קיבלתי עוד 1 עשר, ואז 5 עפו. סך הכל עכשיו?",    options: ["25", "30", "20", "35", "15"],
    answer: "25"
  },
  {
    question: "התחלתי עם 15 כוכבים ⭐, הכפלתי אותם, ואז הוספתי 5. כמה יש?",
    options: ["35", "30", "25", "40", "20"],
    answer: "35"
  },
  {
    question: "היו 40 לבבות ❤️, תרמתי חצי, ואז קיבלתי עוד 5. סך הכל?",
    options: ["25", "20", "30", "35", "15"],
    answer: "25"
  },
  {
    question: "3 עשרות של פרחים 🌸, אבד 1 עשר, מצאתי עוד 7. כמה יש עכשיו?",
    options: ["27", "37", "17", "47", "20"],
    answer: "27"
  },
  {
    question: "התחל עם 24 כוכבים ⭐, הוסף 1 עשר, הורד 4. נשאר עם?",
    options: ["30", "34", "20", "40", "14"],
    answer: "30"
  }
]


        ];

        const stageCount = quizData.length;

        const stateContents = {
	
		'תרגול': `<div id="stage-number" class="stage-number">שלב 1 מתוך ${quizData.length}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">ניסיונות: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">בדיקת תשובות</button>`
		,'לימוד הנושא 🗝️': 
		`<div class="subject-overview-content subject-overview-content_heb">   <h1>מספרים: קבוצות של עשרות ואחדות</h1>   <p>הבנת מספרים היא חלק חשוב בלימוד המתמטיקה. כשאנחנו מסתכלים על מספרים, אנחנו יכולים לראות אותם כקבוצות של עשרות ואחדות. זה עוזר לנו להבין איך מספרים בנויים ואיך לעבוד איתם בקלות. בואו נחקור כיצד עשרות ואחדות מתחברות יחד ליצירת מספרים!</p>   <hr>   <h2 class="highlight_heb">תוכן העניינים</h2>   <ol>     <li><a href="#what-are-tens-and-ones" class="highlight_heb">מהן עשרות ואחדות?</a></li>     <li><a href="#how-to-group-numbers" class="highlight_heb">איך מקבצים מספרים?</a></li>     <li><a href="#examples" class="highlight_heb">דוגמאות</a></li>     <li><a href="#practice" class="highlight_heb">תרגול</a></li>     <li><a href="#conclusion" class="highlight_heb">סיכום</a></li>   </ol>   <hr>     <h2 id="what-are-tens-and-ones" class="highlight_heb">מהן עשרות ואחדות?</h2>   <p>כל מספר מורכב מעשרות ואחדות. <strong>עשרות</strong> מראות כמה קבוצות של עשר יש במספר, ו<strong>אחדות</strong> מראות כמה יחידות בודדות יש.</p>   <p>לדוגמא:</p>   <ul>     <li>במספר <strong>23</strong>, ה-<em>2</em> הוא במקום העשרות (שזה 20) וה-<em>3</em> הוא במקום האחדות.</li>     <li>במספר <strong>47</strong>, ה-<em>4</em> הוא במקום העשרות וה-<em>7</em> הוא במקום האחדות.</li>   </ul>   <hr>     <h2 id="how-to-group-numbers" class="highlight_heb">איך מקבצים מספרים?</h2>   <p>קיבוץ מספרים לעשרות ואחדות עושה את החיבור והחיסור לקלים יותר. הנה איך עושים את זה:</p>   <ol>     <li><strong>זהו את העשרות:</strong> הסתכלו על הספרה הראשונה מימין. זו עשרת המקום.</li>     <li><strong>זהו את האחדות:</strong> הסתכלו על הספרה השנייה מימין. זו אחדות המקום.</li>     <li><strong>כתבו אותם בנפרד:</strong> הפרידו את העשרות והאחדות כדי לראות כמה יש מכל אחת.</li>   </ol>   <p>נראה דוגמא:</p>   <ul>     <li>מספר <strong>35</strong>:       <ul>         <li>עשרות: 3 עשרות (שזה 30)</li>         <li>אחדות: 5 אחדות (שזה 5)</li>       </ul>     </li>     <li>מספר <strong>68</strong>:       <ul>         <li>עשרות: 6 עשרות (שזה 60)</li>         <li>אחדות: 8 אחדות (שזה 8)</li>       </ul>     </li>   </ul>   <hr>     <h2 id="examples" class="highlight_heb">דוגמאות</h2>   <h3 class="highlight_heb">דוגמה 1: מספר 14</h3>   <p>נפרט את המספר <strong>14</strong>:</p>   <ul>     <li>עשרות: 1 עשרה (שזה 10)</li>     <li>אחדות: 4 אחדות (שזה 4)</li>     <li>כלומר, 14 = 10 + 4</li>   </ul>     <h3 class="highlight_heb">דוגמה 2: מספר 29</h3>   <p>נפרט את המספר <strong>29</strong>:</p>   <ul>     <li>עשרות: 2 עשרות (שזה 20)</li>     <li>אחדות: 9 אחדות (שזה 9)</li>     <li>כלומר, 29 = 20 + 9</li>   </ul>   <hr>     <h2 id="practice" class="highlight_heb">תרגול</h2>   <p>נסו לפרק את המספרים הבאים לעשרות ואחדות:</p>   <ul>     <li>מספר <strong>46</strong>:       <ul>         <li>עשרות: ___ עשרות</li>         <li>אחדות: ___ אחדות</li>       </ul>     </li>     <li>מספר <strong>53</strong>:       <ul>         <li>עשרות: ___ עשרות</li>         <li>אחדות: ___ אחדות</li>       </ul>     </li>     <li>מספר <strong>81</strong>:       <ul>         <li>עשרות: ___ עשרות</li>         <li>אחדות: ___ אחדות</li>       </ul>     </li>   </ul>     <h2 id="conclusion" class="highlight_heb">סיכום</h2>   <p>הבנת מספרים כקבוצות של עשרות ואחדות עוזרת לראות איך מספרים בנויים ומקלה על לימוד המתמטיקה. זכרו:</p>   <ul>     <li>לכל מספר יש מקום לעשרות ולמקום לאחדות.</li>     <li>קיבוץ מספרים עוזר בחיבור וחיסור.</li>     <li>תרגול פירוק מספרים ישפר את המיומנויות המתמטיות שלכם!</li>   </ul>   <hr>   <p>המשיכו לתרגל, ובקרוב תהיו מומחים במספרים!</p> </div>`

		};

        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'תרגול') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}


function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';
    quizData[currentStage].forEach((question, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question-one-line";
        
        // Create label for the question text
        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${question.question}`;
        
        // Create div for result feedback
        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-ltr";
        resultDiv.id = `result${index}`;
        
        // Create select element for answers
        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;
        
        // Add default option
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "בחירה";
        select.appendChild(defaultOption);
        
        // Shuffle and add answer options
        const shuffledOptions = shuffleArray([...question.options]);
        shuffledOptions.forEach((option, optionIndex) => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
        
        // Append elements to questionElement in the desired order
        questionElement.appendChild(label);
        questionElement.appendChild(resultDiv); // Feedback before dropdown
        questionElement.appendChild(select);
        
        quizContainer.appendChild(questionElement);
    });

    updateStageNumber();
}



function checkStage() {
    attempts++;
    document.getElementById("attempts").textContent = `ניסיונות: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[currentStage].length;

    quizData[currentStage].forEach((question, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        if (selectedAnswer === question.answer) {
            resultElement.textContent = "נכון!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "תשובה שגויה.";
            resultElement.style.color = "red";
        }

        if (attempts >= 5) {
            selectElement.value = question.answer;
            selectElement.disabled = true;
            resultElement.textContent += ` התשובה הנכונה היא: ${question.answer}`;
        }
    });

			console.log(`שלב ${currentStage + 1}: ${correctCount} נכונות מתוך ${totalQuestions}`);

			if (correctCount === totalQuestions) {
				console.log(`שלב ${currentStage + 1} הושלם. מוסיף ${totalQuestions} חיות.`);
				addAnimalsToFarm(totalQuestions); // Add animals to the farm

				if (currentStage < stageCount - 1) {
					singleStageConfetti();
					showEncouragingPopup(correctCount, totalQuestions, true);
					currentStage++; // Increment stage immediately
					updateProgressBar(); // Update progress bar right after incrementing stage
					console.log(`עובר לשלב ${currentStage + 1}`);
					setTimeout(() => {
						attempts = 0;
						renderQuiz();
						document.getElementById("attempts").textContent = `ניסיונות: ${attempts}`;
					}, 1500);
				} else {
					// This is the final stage completion
					currentStage++;
					updateProgressBar(); // This will now show 100%
					allStagesConfetti();
					showModal("כל הכבוד! השלמת את כל השלבים.");
				}
			} else {
				showEncouragingPopup(correctCount, totalQuestions, false);
				if (attempts >= 5) {
					showModal("הגעת למספר הניסיונות המקסימלי. התשובות הנכונות נחשפו.");
				}
			}

			scrollToTop();
		}
		
        function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
            const incorrectCount = totalQuestions - correctCount;
            let message = `קיבלת ${correctCount} נכונות ו-${incorrectCount} שגויות.`;
            
            if (correctCount === totalQuestions) {
                message += " ציון מושלם!";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
                message += " עבודה מצוינת! רואים שהנושא מתחיל להיות מובן!";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
                message += " מאמץ טוב! נמשיך לתרגל כי השיפור קרוב!";
            } else {
                message += " לא לוותר! כל נסיון עוזר לך ללמוד. ננסה שוב!";
            }

            if (isStageComplete) {
                message += "\n\n השלב הזה הסתיים, עוברים לשלב הבא.";
            }

            showModal(message);
        }

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `נסיונות: ${attempts}`;
			updateStageNumber();
		}

		function updateProgressBar() {
			const progressBar = document.getElementById("progress-bar");
			const completedStages = currentStage; // Remove the +1 here
			const progress = (completedStages / stageCount) * 100;
			const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
			progressBar.style.width = `${roundedProgress}%`;
			progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
			console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
		}

        function updateStageNumber() {
            const stageElement = document.getElementById("stage-number");
            stageElement.textContent = `שלב ${currentStage + 1} מתוך ${stageCount}`;
        }

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>