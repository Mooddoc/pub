<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-eng.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
    <title>✅ EZ42 LIVE - It's EZ</title>
	<style>
  
	</style>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
				<div class="logo-container">
					<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
						<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
					</a>
				</div>
			<h2>Instructions & Rules</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                <li>Read the text and questions carefully.</li>
                <li>Select the best answer.</li>
                <li>Click "Check Answers" when you're ready to see how you did!</li>
                <li>You can check your answers multiple times to improve your score.</li>
                <li>Correct answers are revealed after 10 attempts.</li>
                <li>You must answer all questions correctly to proceed to the next stage.</li>
				<li>Have fun!</li>
			</ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->	
                <h1>Correct sequence of operations</h1>
                
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>
                <div id="tabContent"></div>
            </div>
			
		<!--  Side Panel 2  -->
			<div id="sidePanel2" class="side-panel">
				<h2>Animal Farm</h2>
				<p>Watch your farm grow as you progress! Each completed stage adds new animal friends to your collection.</p>
				<ul id="animalFarm" class="emoji-list">
				</ul>
			</div>
        </div>
    </div>
    <div id="copyright-container"></div>
 
    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">OK</button>
        </div>
    </div>
	<button id="scrollToTopBtn" title="Go to top">↑</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

																		//  PH3 - Quiz Data 
        const quizData = [ 												   	
				{
				  "stages": [

    // Stage 1
    {
      "text": "Let's solve this expression step by step: 2 + 3 × 4",
      "questions": [
        // Question 1.1
        {
          "question": "What should be solved first in this expression?",
          "options": ["Addition (2 + 3)", "Multiplication (3 × 4)", "The leftmost numbers (2 + 3)", "Just add all numbers", "Count the numbers first"],
          "answer": "Multiplication (3 × 4)"
        },
        // Question 1.2
        {
          "question": "What is 3 × 4 equal to?",
          "options": ["7", "12", "34", "43", "Three-four"],
          "answer": "12"
        },
        // Question 1.3
        {
          "question": "After solving 3 × 4, what becomes our new expression?",
          "options": ["2 × 12", "2 + 12", "12 + 2", "14", "Twenty-fourteen"],
          "answer": "2 + 12"
        },
        // Question 1.4
        {
          "question": "What is the final answer to 2 + 3 × 4?",
          "options": ["20", "14", "10", "24", "A lot"],
          "answer": "14"
        },
        // Question 1.5
        {
          "question": "Why didn't we solve 2 + 3 first?",
          "options": [
            "Because multiplication comes before addition",
            "Because 3 and 4 are friends",
            "Because 2 is too small",
            "Because numbers said so",
            "Because it's Thursday"
          ],
          "answer": "Because multiplication comes before addition"
        }
      ]
    },
    // Stage 2
    {
      "text": "Let's solve: 10 - 2 × 3",
      "questions": [
        // Question 2.1
        {
          "question": "Which operation should we do first?",
          "options": ["Subtraction", "Multiplication", "Adding zero", "Count backwards", "Ask a friend"],
          "answer": "Multiplication"
        },
        // Question 2.2
        {
          "question": "What is 2 × 3 equal to?",
          "options": ["23", "6", "5", "8", "Two-three"],
          "answer": "6"
        },
        // Question 2.3
        {
          "question": "What is our new expression after solving 2 × 3?",
          "options": ["10 - 6", "10 × 6", "4", "16", "Ten-six"],
          "answer": "10 - 6"
        },
        // Question 2.4
        {
          "question": "What is the final answer to 10 - 2 × 3?",
          "options": ["24", "4", "16", "8", "A bunch"],
          "answer": "4"
        },
        // Question 2.5
        {
          "question": "If we had solved 10 - 2 first, what wrong answer would we get?",
          "options": ["24", "8", "4", "12", "Potato"],
          "answer": "24"
        }
      ]
    },
    // Stage 3
    {
      "text": "Solve this expression: 15 ÷ 3 + 2 × 4",
      "questions": [
        // Question 3.1
        {
          "question": "Which operations should we solve first?",
          "options": [
            "Both division and multiplication",
            "Addition only",
            "Just the division",
            "Addition and multiplication",
            "Take a nap first"
          ],
          "answer": "Both division and multiplication"
        },
        // Question 3.2
        {
          "question": "What is 15 ÷ 3?",
          "options": ["5", "45", "18", "12", "Fifteen-three"],
          "answer": "5"
        },
        // Question 3.3
        {
          "question": "What is 2 × 4?",
          "options": ["6", "8", "24", "42", "Two-four"],
          "answer": "8"
        },
        // Question 3.4
        {
          "question": "After solving division and multiplication, what is our new expression?",
          "options": ["5 + 8", "13", "5 × 8", "40", "Five-eight"],
          "answer": "5 + 8"
        },
        // Question 3.5
        {
          "question": "What is the final answer to 15 ÷ 3 + 2 × 4?",
          "options": ["13", "28", "40", "20", "A lot of numbers"],
          "answer": "13"
        }
      ]
    },
    // Stage 4
    {
      "text": "Let's solve this expression with parentheses: (4 + 2) × 3",
      "questions": [
        // Question 4.1
        {
          "question": "What should we solve first in this expression?",
          "options": ["Multiplication first", "Numbers inside parentheses", "Just the number 4", "Add all numbers", "Count the symbols"],
          "answer": "Numbers inside parentheses"
        },
        // Question 4.2
        {
          "question": "What is 4 + 2?",
          "options": ["42", "6", "24", "8", "Four-two"],
          "answer": "6"
        },
        // Question 4.3
        {
          "question": "After solving what's in parentheses, what's our new expression?",
          "options": ["6 + 3", "6 × 3", "4 × 3", "18", "Six-three"],
          "answer": "6 × 3"
        },
        // Question 4.4
        {
          "question": "What is the final answer to (4 + 2) × 3?",
          "options": ["18", "9", "12", "24", "A bunch"],
          "answer": "18"
        },
        // Question 4.5
        {
          "question": "If we had ignored the parentheses and solved 4 + (2 × 3) instead, what different answer would we get?",
          "options": ["18", "10", "14", "8", "Who knows?"],
          "answer": "10"
        }
      ]
    },
    // Stage 5
    {
      "text": "Solve this expression: 20 ÷ 4 × 2 + 3",
      "questions": [
        // Question 5.1
        {
          "question": "Which operations should we solve first?",
          "options": [
            "Division and multiplication from left to right",
            "Addition first",
            "Just multiplication",
            "All at once",
            "Ask the calculator"
          ],
          "answer": "Division and multiplication from left to right"
        },
        // Question 5.2
        {
          "question": "What is 20 ÷ 4?",
          "options": ["5", "80", "16", "24", "Twenty-four"],
          "answer": "5"
        },
        // Question 5.3
        {
          "question": "After 20 ÷ 4, what do we solve next?",
          "options": ["5 × 2", "5 + 3", "2 + 3", "10", "High five"],
          "answer": "5 × 2"
        },
        // Question 5.4
        {
          "question": "After solving 5 × 2, what's our new expression?",
          "options": ["10 + 3", "13", "5 + 3", "15", "Ten-three"],
          "answer": "10 + 3"
        },
        // Question 5.5
        {
          "question": "What is the final answer to 20 ÷ 4 × 2 + 3?",
          "options": ["13", "28", "40", "16", "A baker's dozen"],
          "answer": "13"
        }
      ]
    },
    // Stage 6
    {
      "text": "Let's solve: (12 - 4) ÷ (1 + 1)",
      "questions": [
        // Question 6.1
        {
          "question": "Which parentheses should we solve first?",
          "options": [
            "We can solve either set first",
            "Only left parentheses",
            "Only right parentheses",
            "Skip parentheses",
            "The prettier ones"
          ],
          "answer": "We can solve either set first"
        },
        // Question 6.2
        {
          "question": "What is 12 - 4?",
          "options": ["8", "16", "3", "-8", "Twelve-four"],
          "answer": "8"
        },
        // Question 6.3
        {
          "question": "What is 1 + 1?",
          "options": ["2", "11", "0", "3", "One-one"],
          "answer": "2"
        },
        // Question 6.4
        {
          "question": "After solving both parentheses, what's our new expression?",
          "options": ["8 ÷ 2", "8 × 2", "4", "16", "Eight-two"],
          "answer": "8 ÷ 2"
        },
        // Question 6.5
        {
          "question": "What is the final answer to (12 - 4) ÷ (1 + 1)?",
          "options": ["4", "8", "6", "2", "A couple"],
          "answer": "4"
        }
      ]
    },
    // Stage 7
    {
      "text": "Solve this expression: 5 × (3 + 2) - 4",
      "questions": [
        // Question 7.1
        {
          "question": "What should we solve first?",
          "options": [
            "Expression in parentheses",
            "Multiplication",
            "Subtraction",
            "5 × 3",
            "Time for lunch"
          ],
          "answer": "Expression in parentheses"
        },
        // Question 7.2
        {
          "question": "What is 3 + 2?",
          "options": ["5", "32", "6", "23", "Three-two"],
          "answer": "5"
        },
        // Question 7.3
        {
          "question": "After solving parentheses, what's next?",
          "options": ["5 × 5", "5 - 4", "25 - 4", "9", "High five"],
          "answer": "5 × 5"
        },
        // Question 7.4
        {
          "question": "What is 5 × 5?",
          "options": ["25", "10", "55", "15", "Five-five"],
          "answer": "25"
        },
        // Question 7.5
        {
          "question": "What is the final answer to 5 × (3 + 2) - 4?",
          "options": ["21", "16", "29", "19", "A lot minus four"],
          "answer": "21"
        }
      ]
    },
    // Stage 8
    {
      "text": "Let's solve: 24 ÷ (2 × 3) + 1",
      "questions": [
        // Question 8.1
        {
          "question": "What should we solve first?",
          "options": [
            "2 × 3 in parentheses",
            "24 ÷ 2",
            "Addition",
            "All multiplication",
            "Count to ten first"
          ],
          "answer": "2 × 3 in parentheses"
        },
        // Question 8.2
        {
          "question": "What is 2 × 3?",
          "options": ["6", "23", "5", "8", "Two-three"],
          "answer": "6"
        },
        // Question 8.3
        {
          "question": "After solving parentheses, what's our new expression?",
          "options": ["24 ÷ 6 + 1", "24 ÷ 7", "4 + 1", "30", "Twenty-four-six"],
          "answer": "24 ÷ 6 + 1"
        },
        // Question 8.4
        {
          "question": "What is 24 ÷ 6?",
          "options": ["4", "144", "30", "18", "Twenty-four-six"],
          "answer": "4"
        },
        // Question 8.5
        {
          "question": "What is the final answer to 24 ÷ (2 × 3) + 1?",
          "options": ["5", "9", "7", "3", "Just about five"],
          "answer": "5"
        }
      ]
    },
    // Stage 9
    {
      "text": "Solve: (15 - 5) × (4 ÷ 2)",
      "questions": [
        // Question 9.1
        {
          "question": "Which expressions in parentheses should we solve first?",
          "options": [
            "We can solve either set first",
            "Only 15 - 5",
            "Only 4 ÷ 2",
            "Skip parentheses",
            "The rounder ones"
          ],
          "answer": "We can solve either set first"
        },
        // Question 9.2
        {
          "question": "What is 15 - 5?",
          "options": ["10", "20", "-10", "25", "Fifteen-five"],
          "answer": "10"
        },
        // Question 9.3
        {
          "question": "What is 4 ÷ 2?",
          "options": ["2", "6", "8", "42", "Four-two"],
          "answer": "2"
        },
        // Question 9.4
        {
          "question": "After solving both parentheses, what's our new expression?",
          "options": ["10 × 2", "12", "20", "8", "Ten-two"],
          "answer": "10 × 2"
        },
        // Question 9.5
        {
          "question": "What is the final answer to (15 - 5) × (4 ÷ 2)?",
          "options": ["20", "30", "10", "40", "A score"],
          "answer": "20"
        }
      ]
    },
    // Stage 10
    {
      "text": "Calculate: (18 ÷ 3 + 2) × 4",
      "questions": [
        // Question 10.1
        {
          "question": "What should we solve first inside the parentheses?",
          "options": ["18 ÷ 3", "3 + 2", "18 ÷ 5", "All at once", "The division symbol looks fun"],
          "answer": "18 ÷ 3"
        },
        // Question 10.2
        {
          "question": "What is 18 ÷ 3?",
          "options": ["6", "21", "15", "54", "Eighteen-three"],
          "answer": "6"
        },
        // Question 10.3
        {
          "question": "After division, what's our new expression inside parentheses?",
          "options": ["6 + 2", "8 × 4", "32", "10", "Six-two"],
          "answer": "6 + 2"
        },
        // Question 10.4
        {
          "question": "After solving parentheses completely, what's our new expression?",
          "options": ["8 × 4", "12 × 4", "32", "48", "Eight-four"],
          "answer": "8 × 4"
        },
        // Question 10.5
        {
          "question": "What is the final answer to (18 ÷ 3 + 2) × 4?",
          "options": ["32", "28", "40", "24", "Almost three dozen"],
          "answer": "32"
        }
      ]
    },
   // Stage 11
    {
      "text": "Solve this expression with nested parentheses: (20 - (4 + 1)) × 3",
      "questions": [
        // Question 11.1
        {
          "question": "Which parentheses should we solve first?",
          "options": [
            "The innermost (4 + 1)",
            "The outer parentheses",
            "Multiply by 3 first",
            "20 - 4 first",
            "The cutest parentheses"
          ],
          "answer": "The innermost (4 + 1)"
        },
        // Question 11.2
        {
          "question": "What is 4 + 1?",
          "options": ["5", "41", "6", "3", "Four-one"],
          "answer": "5"
        },
        // Question 11.3
        {
          "question": "After solving the inner parentheses, what's our new expression?",
          "options": ["(20 - 5) × 3", "15 × 3", "45", "60", "Twenty-five"],
          "answer": "(20 - 5) × 3"
        },
        // Question 11.4
        {
          "question": "What is 20 - 5?",
          "options": ["15", "25", "10", "30", "Twenty-five"],
          "answer": "15"
        },
        // Question 11.5
        {
          "question": "What is the final answer to (20 - (4 + 1)) × 3?",
          "options": ["45", "60", "30", "75", "Three times fifteen"],
          "answer": "45"
        }
      ]
    },
    // Stage 12
    {
      "text": "Calculate: 30 ÷ (5 + 5) × 2",
      "questions": [
        // Question 12.1
        {
          "question": "What should we solve first?",
          "options": [
            "5 + 5 in parentheses",
            "30 ÷ 5",
            "Multiplication",
            "All addition first",
            "Phone a friend"
          ],
          "answer": "5 + 5 in parentheses"
        },
        // Question 12.2
        {
          "question": "What is 5 + 5?",
          "options": ["10", "55", "25", "15", "Five-five"],
          "answer": "10"
        },
        // Question 12.3
        {
          "question": "After solving parentheses, what's our new expression?",
          "options": ["30 ÷ 10 × 2", "3 × 2", "6", "20", "Thirty-ten"],
          "answer": "30 ÷ 10 × 2"
        },
        // Question 12.4
        {
          "question": "What is 30 ÷ 10?",
          "options": ["3", "300", "40", "13", "Thirty-ten"],
          "answer": "3"
        },
        // Question 12.5
        {
          "question": "What is the final answer to 30 ÷ (5 + 5) × 2?",
          "options": ["6", "12", "9", "15", "Half a dozen"],
          "answer": "6"
        }
      ]
    },
    // Stage 13
    {
      "text": "Solve: (16 ÷ 4 × 2) + (15 - 5)",
      "questions": [
        // Question 13.1
        {
          "question": "Which operation inside the first parentheses should we solve first?",
          "options": [
            "16 ÷ 4",
            "4 × 2",
            "Addition",
            "15 - 5",
            "The left-handed one"
          ],
          "answer": "16 ÷ 4"
        },
        // Question 13.2
        {
          "question": "After 16 ÷ 4, what's our next step in the first parentheses?",
          "options": ["4 × 2", "8", "16", "12", "Four-two"],
          "answer": "4 × 2"
        },
        // Question 13.3
        {
          "question": "What is 15 - 5 in the second parentheses?",
          "options": ["10", "20", "5", "25", "Fifteen-five"],
          "answer": "10"
        },
        // Question 13.4
        {
          "question": "After solving both parentheses, what's our expression?",
          "options": ["8 + 10", "18", "28", "810", "Eight-ten"],
          "answer": "8 + 10"
        },
        // Question 13.5
        {
          "question": "What is the final answer to (16 ÷ 4 × 2) + (15 - 5)?",
          "options": ["18", "20", "16", "24", "Almost twenty"],
          "answer": "18"
        }
      ]
    },
    // Stage 14
    {
      "text": "Calculate: 40 ÷ (4 × 2) - (3 + 2)",
      "questions": [
        // Question 14.1
        {
          "question": "What should we solve first?",
          "options": [
            "4 × 2 and 3 + 2 in parentheses",
            "40 ÷ 4",
            "Subtraction",
            "Addition only",
            "Count to forty first"
          ],
          "answer": "4 × 2 and 3 + 2 in parentheses"
        },
        // Question 14.2
        {
          "question": "What is 4 × 2 in the first parentheses?",
          "options": ["8", "42", "6", "24", "Four-two"],
          "answer": "8"
        },
        // Question 14.3
        {
          "question": "What is 3 + 2 in the second parentheses?",
          "options": ["5", "32", "6", "1", "Three-two"],
          "answer": "5"
        },
        // Question 14.4
        {
          "question": "After solving both parentheses, what's our expression?",
          "options": ["40 ÷ 8 - 5", "5 - 5", "35", "0", "Forty-eight-five"],
          "answer": "40 ÷ 8 - 5"
        },
        // Question 14.5
        {
          "question": "What is the final answer to 40 ÷ (4 × 2) - (3 + 2)?",
          "options": ["0", "5", "10", "-5", "Zero exactly"],
          "answer": "0"
        }
      ]
    },
    // Stage 15
    {
      "text": "Solve: (25 - 5) ÷ (3 + 2) × 4",
      "questions": [
        // Question 15.1
        {
          "question": "Which parentheses should we solve first?",
          "options": [
            "Either set can be solved first",
            "Only 25 - 5",
            "Only 3 + 2",
            "Skip parentheses",
            "The most important ones"
          ],
          "answer": "Either set can be solved first"
        },
        // Question 15.2
        {
          "question": "What are the results of both parentheses?",
          "options": [
            "20 and 5",
            "30 and 5",
            "20 and 6",
            "15 and 5",
            "Twenty and five"
          ],
          "answer": "20 and 5"
        },
        // Question 15.3
        {
          "question": "After solving parentheses, what's our new expression?",
          "options": ["20 ÷ 5 × 4", "4 × 4", "16", "24", "Twenty-five-four"],
          "answer": "20 ÷ 5 × 4"
        },
        // Question 15.4
        {
          "question": "What is 20 ÷ 5?",
          "options": ["4", "100", "25", "15", "Twenty-five"],
          "answer": "4"
        },
        // Question 15.5
        {
          "question": "What is the final answer to (25 - 5) ÷ (3 + 2) × 4?",
          "options": ["16", "20", "12", "24", "Sweet sixteen"],
          "answer": "16"
        }
      ]
    },
    // Stage 16
    {
      "text": "Calculate this expression with decimals: (5.5 + 2.5) × 2",
      "questions": [
        // Question 16.1
        {
          "question": "What should we solve first?",
          "options": [
            "5.5 + 2.5 in parentheses",
            "Multiply by 2 first",
            "Round the decimals",
            "Add only whole numbers",
            "Count the decimal points"
          ],
          "answer": "5.5 + 2.5 in parentheses"
        },
        // Question 16.2
        {
          "question": "What is 5.5 + 2.5?",
          "options": ["8", "7.0", "5.7", "3", "Five point five plus two point five"],
          "answer": "8"
        },
        // Question 16.3
        {
          "question": "After solving parentheses, what's our new expression?",
          "options": ["8 × 2", "10.5", "16", "7", "Eight times two"],
          "answer": "8 × 2"
        },
        // Question 16.4
        {
          "question": "What is 8 × 2?",
          "options": ["16", "10", "20", "82", "Double eight"],
          "answer": "16"
        },
        // Question 16.5
        {
          "question": "What is the final answer to (5.5 + 2.5) × 2?",
          "options": ["16", "8", "20", "15", "Sweet sixteen again"],
          "answer": "16"
        }
      ]
    },
    // Stage 17
    {
      "text": "Solve: 24 ÷ [6 + (2 × 2)]",
      "questions": [
        // Question 17.1
        {
          "question": "What should we solve first?",
          "options": [
            "2 × 2 in parentheses",
            "6 + 2",
            "24 ÷ 6",
            "All at once",
            "Count the brackets"
          ],
          "answer": "2 × 2 in parentheses"
        },
        // Question 17.2
        {
          "question": "What is 2 × 2?",
          "options": ["4", "22", "8", "0", "Two-two"],
          "answer": "4"
        },
        // Question 17.3
        {
          "question": "After solving 2 × 2, what's the expression inside brackets?",
          "options": ["6 + 4", "10", "24", "14", "Six plus four"],
          "answer": "6 + 4"
        },
        // Question 17.4
        {
          "question": "What is 6 + 4?",
          "options": ["10", "64", "14", "4", "Six-four"],
          "answer": "10"
        },
        // Question 17.5
        {
          "question": "What is the final answer to 24 ÷ [6 + (2 × 2)]?",
          "options": ["2.4", "4", "6", "8", "Twenty-four divided by ten"],
          "answer": "2.4"
        }
      ]
    },
    // Stage 18
    {
      "text": "Calculate: (30 - 5) ÷ (3 × 2) + 1",
      "questions": [
        // Question 18.1
        {
          "question": "Which expression should we solve first?",
          "options": [
            "Both expressions in parentheses",
            "Only 30 - 5",
            "Only 3 × 2",
            "Addition first",
            "The biggest numbers"
          ],
          "answer": "Both expressions in parentheses"
        },
        // Question 18.2
        {
          "question": "What is 30 - 5 and 3 × 2?",
          "options": ["25 and 6", "35 and 6", "25 and 5", "35 and 5", "Thirty minus five and three times two"],
          "answer": "25 and 6"
        },
        // Question 18.3
        {
          "question": "After solving parentheses, what's our expression?",
          "options": ["25 ÷ 6 + 1", "19 + 1", "20", "4.17", "Twenty-five divided by six plus one"],
          "answer": "25 ÷ 6 + 1"
        },
        // Question 18.4
        {
          "question": "What is 25 ÷ 6?",
          "options": ["4.17", "4", "5", "21", "About four point two"],
          "answer": "4.17"
        },
        // Question 18.5
        {
          "question": "What is the final answer to (30 - 5) ÷ (3 × 2) + 1?",
          "options": ["5.17", "6.17", "4.17", "3.17", "A bit more than five"],
          "answer": "5.17"
        }
      ]
    },
    // Stage 19
    {
      "text": "Solve this expression with zero: (20 × 0) + (15 ÷ 3)",
      "questions": [
        // Question 19.1
        {
          "question": "What is 20 × 0 in the first parentheses?",
          "options": ["0", "20", "15", "1", "Twenty times nothing"],
          "answer": "0"
        },
        // Question 19.2
        {
          "question": "What is 15 ÷ 3 in the second parentheses?",
          "options": ["5", "45", "18", "0", "Fifteen divided by three"],
          "answer": "5"
        },
        // Question 19.3
        {
          "question": "After solving both parentheses, what's our expression?",
          "options": ["0 + 5", "5", "0", "10", "Zero plus five"],
          "answer": "0 + 5"
        },
        // Question 19.4
        {
          "question": "Why is 20 × 0 equal to 0?",
          "options": [
            "Any number times zero equals zero",
            "Because 20 is too big",
            "Because zero is lonely",
            "It isn't zero",
            "Magic!"
          ],
          "answer": "Any number times zero equals zero"
        },
        // Question 19.5
        {
          "question": "What is the final answer to (20 × 0) + (15 ÷ 3)?",
          "options": ["5", "0", "20", "15", "Zero plus hand"],
          "answer": "5"
        }
      ]
    },
    // Stage 20
    {
      "text": "Calculate: [(4 × 3) + 2] × (10 ÷ 2)",
      "questions": [
        // Question 20.1
        {
          "question": "What should we solve first?",
          "options": [
            "4 × 3 and 10 ÷ 2 first",
            "Addition first",
            "Only multiplication",
            "Outside multiplication",
            "Count the symbols"
          ],
          "answer": "4 × 3 and 10 ÷ 2 first"
        },
        // Question 20.2
        {
          "question": "What is 4 × 3 and 10 ÷ 2?",
          "options": ["12 and 5", "7 and 5", "12 and 8", "7 and 8", "Twelve and five"],
          "answer": "12 and 5"
        },
        // Question 20.3
        {
          "question": "After first steps, what's inside the square brackets?",
          "options": ["12 + 2", "14 × 5", "70", "10", "Twelve plus two"],
          "answer": "12 + 2"
        },
        // Question 20.4
        {
          "question": "After solving brackets, what's our expression?",
          "options": ["14 × 5", "19", "70", "65", "Fourteen times five"],
          "answer": "14 × 5"
        },
        // Question 20.5
        {
          "question": "What is the final answer to [(4 × 3) + 2] × (10 ÷ 2)?",
          "options": ["70", "65", "75", "60", "Seven tens"],
          "answer": "70"
        }
      ]
    },

    // Stage 21
    {
      "text": "Solve this expression with negative numbers: (-2 × 4) + 10",
      "questions": [
        // Question 21.1
        {
          "question": "What should we solve first?",
          "options": [
            "-2 × 4 in parentheses",
            "Add 10 first",
            "Remove the negative",
            "Add then multiply",
            "Think happy thoughts"
          ],
          "answer": "-2 × 4 in parentheses"
        },
        // Question 21.2
        {
          "question": "What is -2 × 4?",
          "options": ["-8", "8", "-6", "2", "Negative fun"],
          "answer": "-8"
        },
        // Question 21.3
        {
          "question": "After solving parentheses, what's our expression?",
          "options": ["-8 + 10", "2", "-18", "18", "Negative eight plus ten"],
          "answer": "-8 + 10"
        },
        // Question 21.4
        {
          "question": "What happens when we add a positive number to a negative number?",
          "options": [
            "The numbers move toward zero",
            "They multiply",
            "They become more negative",
            "They disappear",
            "They become best friends"
          ],
          "answer": "The numbers move toward zero"
        },
        // Question 21.5
        {
          "question": "What is the final answer to (-2 × 4) + 10?",
          "options": ["2", "-2", "6", "-6", "Two more than zero"],
          "answer": "2"
        }
      ]
    },
    // Stage 22
    {
      "text": "Calculate: (36 ÷ 6 × 2) - (8 + 4)",
      "questions": [
        // Question 22.1
        {
          "question": "In the first parentheses, which operation comes first?",
          "options": ["36 ÷ 6", "6 × 2", "36 × 2", "All at once", "The division symbol looks lonely"],
          "answer": "36 ÷ 6"
        },
        // Question 22.2
        {
          "question": "After 36 ÷ 6, what's the next step in first parentheses?",
          "options": ["6 × 2", "12", "36", "42", "Six times two"],
          "answer": "6 × 2"
        },
        // Question 22.3
        {
          "question": "What is 8 + 4 in the second parentheses?",
          "options": ["12", "84", "16", "24", "Eight plus four"],
          "answer": "12"
        },
        // Question 22.4
        {
          "question": "After solving both parentheses, what's our expression?",
          "options": ["12 - 12", "0", "24", "-12", "Twelve minus twelve"],
          "answer": "12 - 12"
        },
        // Question 22.5
        {
          "question": "What is the final answer to (36 ÷ 6 × 2) - (8 + 4)?",
          "options": ["0", "12", "24", "-12", "Nothing at all"],
          "answer": "0"
        }
      ]
    },
    // Stage 23
    {
      "text": "Solve: [(5 × 2) + 3] × [(4 × 2) - 3]",
      "questions": [
        // Question 23.1
        {
          "question": "What should we solve first?",
          "options": [
            "5 × 2 and 4 × 2",
            "Just additions",
            "Just subtractions",
            "Outside multiplication",
            "Count the brackets twice"
          ],
          "answer": "5 × 2 and 4 × 2"
        },
        // Question 23.2
        {
          "question": "After first multiplication, what are our expressions in brackets?",
          "options": ["10 + 3 and 8 - 3", "13 and 5", "15 and 8", "7 and 5", "Ten plus three and eight minus three"],
          "answer": "10 + 3 and 8 - 3"
        },
        // Question 23.3
        {
          "question": "After solving inside brackets, what are our numbers?",
          "options": ["13 and 5", "18", "65", "8", "Thirteen and five"],
          "answer": "13 and 5"
        },
        // Question 23.4
        {
          "question": "What's our final operation?",
          "options": ["13 × 5", "18", "65", "8", "Thirteen times five"],
          "answer": "13 × 5"
        },
        // Question 23.5
        {
          "question": "What is the final answer to [(5 × 2) + 3] × [(4 × 2) - 3]?",
          "options": ["65", "60", "70", "55", "Thirteen groups of five"],
          "answer": "65"
        }
      ]
    },
    // Stage 24
    {
      "text": "Calculate: (45 ÷ 5) × (2.5 + 1.5)",
      "questions": [
        // Question 24.1
        {
          "question": "What operations should we solve first?",
          "options": [
            "45 ÷ 5 and 2.5 + 1.5",
            "Just division",
            "Just decimals",
            "Outside multiplication",
            "Count the decimal points"
          ],
          "answer": "45 ÷ 5 and 2.5 + 1.5"
        },
        // Question 24.2
        {
          "question": "What is 45 ÷ 5?",
          "options": ["9", "40", "50", "15", "Forty-five divided by five"],
          "answer": "9"
        },
        // Question 24.3
        {
          "question": "What is 2.5 + 1.5?",
          "options": ["4", "3", "2", "5", "Two point five plus one point five"],
          "answer": "4"
        },
        // Question 24.4
        {
          "question": "After solving parentheses, what's our expression?",
          "options": ["9 × 4", "13", "36", "5", "Nine times four"],
          "answer": "9 × 4"
        },
        // Question 24.5
        {
          "question": "What is the final answer to (45 ÷ 5) × (2.5 + 1.5)?",
          "options": ["36", "40", "32", "44", "Three dozen exactly"],
          "answer": "36"
        }
      ]
    },
    // Stage 25
    {
      "text": "Solve: (-3 × 4) + (18 ÷ 2)",
      "questions": [
        // Question 25.1
        {
          "question": "Which operation should we solve first?",
          "options": [
            "Both operations in parentheses",
            "Only multiplication",
            "Only division",
            "Addition first",
            "Remove the negative"
          ],
          "answer": "Both operations in parentheses"
        },
        // Question 25.2
        {
          "question": "What is -3 × 4?",
          "options": ["-12", "12", "-7", "1", "Negative three times four"],
          "answer": "-12"
        },
        // Question 25.3
        {
          "question": "What is 18 ÷ 2?",
          "options": ["9", "20", "16", "36", "Eighteen divided by two"],
          "answer": "9"
        },
        // Question 25.4
        {
          "question": "After solving parentheses, what's our expression?",
          "options": ["-12 + 9", "-3", "-21", "21", "Negative twelve plus nine"],
          "answer": "-12 + 9"
        },
        // Question 25.5
        {
          "question": "What is the final answer to (-3 × 4) + (18 ÷ 2)?",
          "options": ["-3", "3", "-21", "21", "Three less than zero"],
          "answer": "-3"
        }
      ]
    },
    // Stage 26
    {
      "text": "Calculate: [(6.5 + 3.5) × 2] ÷ (5 + 5)",
      "questions": [
        // Question 26.1
        {
          "question": "What should we solve first?",
          "options": [
            "6.5 + 3.5 and 5 + 5",
            "Just multiplication",
            "Just division",
            "Outside operations",
            "Add all numbers"
          ],
          "answer": "6.5 + 3.5 and 5 + 5"
        },
        // Question 26.2
        {
          "question": "What is 6.5 + 3.5?",
          "options": ["10", "9", "11", "65", "Six point five plus three point five"],
          "answer": "10"
        },
        // Question 26.3
        {
          "question": "After 10 × 2, what's our expression?",
          "options": ["20 ÷ 10", "30", "2", "200", "Twenty divided by ten"],
          "answer": "20 ÷ 10"
        },
        // Question 26.4
        {
          "question": "What is 5 + 5 in the denominator?",
          "options": ["10", "55", "25", "0", "Five plus five"],
          "answer": "10"
        },
        // Question 26.5
        {
          "question": "What is the final answer to [(6.5 + 3.5) × 2] ÷ (5 + 5)?",
          "options": ["2", "20", "10", "4", "Twenty divided by ten"],
          "answer": "2"
        }
      ]
    },
    // Stage 27
    {
      "text": "Solve this complex expression: (48 ÷ 6 × 2) - (3 × 4 + 2)",
      "questions": [
        // Question 27.1
        {
          "question": "What should we solve first in the first parentheses?",
          "options": ["48 ÷ 6", "6 × 2", "48 × 2", "All at once", "The biggest numbers"],
          "answer": "48 ÷ 6"
        },
        // Question 27.2
        {
          "question": "What is 48 ÷ 6 × 2?",
          "options": ["16", "24", "12", "8", "Forty-eight divided by six times two"],
          "answer": "16"
        },
        // Question 27.3
        {
          "question": "In the second parentheses, what do we solve first?",
          "options": ["3 × 4", "4 + 2", "3 + 2", "14", "Three times four"],
          "answer": "3 × 4"
        },
        // Question 27.4
        {
          "question": "After solving both parentheses completely, what's our expression?",
          "options": ["16 - 14", "2", "30", "-2", "Sixteen minus fourteen"],
          "answer": "16 - 14"
        },
        // Question 27.5
        {
          "question": "What is the final answer to (48 ÷ 6 × 2) - (3 × 4 + 2)?",
          "options": ["2", "16", "14", "0", "Two more than zero"],
          "answer": "2"
        }
      ]
    },
    // Stage 28
    {
      "text": "Calculate: (-5 × 3) + (25 ÷ 5) × 2",
      "questions": [
        // Question 28.1
        {
          "question": "What operations should we solve first?",
          "options": [
            "-5 × 3 and 25 ÷ 5",
            "Just negatives",
            "Just division",
            "Addition first",
            "The scariest looking ones"
          ],
          "answer": "-5 × 3 and 25 ÷ 5"
        },
        // Question 28.2
        {
          "question": "What is -5 × 3?",
          "options": ["-15", "15", "-8", "-2", "Negative fifteen"],
          "answer": "-15"
        },
        // Question 28.3
        {
          "question": "What is 25 ÷ 5?",
          "options": ["5", "30", "20", "125", "Twenty-five divided by five"],
          "answer": "5"
        },
        // Question 28.4
        {
          "question": "After initial operations, what's our expression?",
          "options": ["-15 + (5 × 2)", "-5", "-25", "10", "Negative fifteen plus five times two"],
          "answer": "-15 + (5 × 2)"
        },
        // Question 28.5
        {
          "question": "What is the final answer to (-5 × 3) + (25 ÷ 5) × 2?",
          "options": ["-5", "5", "-15", "15", "Five less than zero"],
          "answer": "-5"
        }
      ]
    },
    // Stage 29
    {
      "text": "Solve: [(8 × 2) - (3 × 2)] × (20 ÷ 5)",
      "questions": [
        // Question 29.1
        {
          "question": "What should we solve first?",
          "options": [
            "8 × 2 and 3 × 2",
            "Subtraction first",
            "Division first",
            "Outside multiplication",
            "Count the brackets again"
          ],
          "answer": "8 × 2 and 3 × 2"
        },
        // Question 29.2
        {
          "question": "What is (8 × 2) - (3 × 2)?",
          "options": ["10", "22", "8", "12", "Sixteen minus six"],
          "answer": "10"
        },
        // Question 29.3
        {
          "question": "What is 20 ÷ 5?",
          "options": ["4", "25", "15", "100", "Twenty divided by five"],
          "answer": "4"
        },
        // Question 29.4
        {
          "question": "After solving all parentheses, what's our final operation?",
          "options": ["10 × 4", "14", "40", "6", "Ten times four"],
          "answer": "10 × 4"
        },
        // Question 29.5
        {
          "question": "What is the final answer to [(8 × 2) - (3 × 2)] × (20 ÷ 5)?",
          "options": ["40", "30", "50", "20", "Four tens"],
          "answer": "40"
        }
      ]
    },
    // Stage 30
    {
      "text": "Final challenge: (100 ÷ 10 + 5) × (4 × 2 - 3)",
      "questions": [
        // Question 30.1
        {
          "question": "What should we solve first in both parentheses?",
          "options": [
            "100 ÷ 10 and 4 × 2",
            "Addition and subtraction",
            "Just multiplication",
            "Outside operations",
            "The grand finale"
          ],
          "answer": "100 ÷ 10 and 4 × 2"
        },
        // Question 30.2
        {
          "question": "What is 100 ÷ 10 + 5?",
          "options": ["15", "105", "10", "20", "Ten plus five"],
          "answer": "15"
        },
        // Question 30.3
        {
          "question": "What is 4 × 2 - 3?",
          "options": ["5", "8", "1", "11", "Eight minus three"],
          "answer": "5"
        },
        // Question 30.4
        {
          "question": "After solving both parentheses, what's our expression?",
          "options": ["15 × 5", "20", "75", "25", "Fifteen times five"],
          "answer": "15 × 5"
        },
        // Question 30.5
        {
          "question": "What is the final answer to (100 ÷ 10 + 5) × (4 × 2 - 3)?",
          "options": ["75", "65", "85", "70", "Seventy-five exactly"],
          "answer": "75"
        }
      ]
    }
				  ]
				}
        ];

		const stageCount = quizData[0].stages.length; // This is the correct way to get the number of stages


		const stateContents = {
			'Practice': `<div id="stage-number" class="stage-number">Stage 1 of ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">Attempts: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">Check Answers</button>`
			,'Subject Overview 🗝️': `<div class="subject-overview-content">   <h1>Correct Sequence of Operations in Mathematics: A Comprehensive Guide</h1>   <p>The correct sequence of operations is a fundamental concept in mathematics that ensures expressions are evaluated consistently and accurately. Understanding the order in which to perform mathematical operations is crucial for solving equations, simplifying expressions, and performing calculations correctly. This guide will explore the standard sequence of operations, commonly remembered by the acronym PEMDAS: <strong>Parentheses</strong>, <strong>Exponents</strong>, <strong>Multiplication and Division</strong>, and <strong>Addition and Subtraction</strong>. We&#39;ll delve into each component, provide detailed explanations, and offer numerous examples to help you master the correct order of operations.</p>   <hr>   <h2>Table of Contents</h2>   <ol>     <li><a href="#what-is-sequence-of-operations">What Is the Correct Sequence of Operations?</a></li>     <li><a href="#general-rules-for-sequence-of-operations">General Rules for Sequence of Operations</a></li>     <li><a href="#detailed-explanation-of-sequence-of-operations">Detailed Explanation of Sequence of Operations</a>       <ul>         <li><a href="#parentheses">Parentheses</a></li>         <li><a href="#exponents">Exponents</a></li>         <li><a href="#multiplication-and-division">Multiplication and Division</a></li>         <li><a href="#addition-and-subtraction">Addition and Subtraction</a></li>       </ul>     </li>     <li><a href="#common-mistakes">Common Mistakes</a></li>     <li><a href="#conclusion">Conclusion</a></li>   </ol>   <hr>   <h2 id="what-is-sequence-of-operations">What Is the Correct Sequence of Operations?</h2>   <p>The correct sequence of operations refers to the standardized order in which mathematical operations should be performed to accurately evaluate expressions. This sequence eliminates ambiguity and ensures that everyone interprets and solves mathematical problems in the same way.</p>   <p>The acronym <strong>PEMDAS</strong> is commonly used to remember the order:</p>   <ul>     <li><strong>P</strong> - Parentheses</li>     <li><strong>E</strong> - Exponents</li>     <li><strong>M</strong> - Multiplication</li>     <li><strong>D</strong> - Division</li>     <li><strong>A</strong> - Addition</li>     <li><strong>S</strong> - Subtraction</li>   </ul>   <p>Some regions use <strong>BODMAS</strong> instead, where <strong>B</strong> stands for Brackets and <strong>O</strong> for Orders, but the underlying principles remain the same.</p>   <hr>   <h2 id="general-rules-for-sequence-of-operations">General Rules for Sequence of Operations</h2>   <p>Before diving into each operation, it&#39;s essential to understand the general principles that govern the sequence:</p>   <ol>     <li><strong>Follow the Order Strictly</strong>: Operations must be performed in the specified order to obtain the correct result.</li>     <li><strong>Left to Right for Same Level Operations</strong>: When operations are of the same level (e.g., multiplication and division), they should be performed from left to right.</li>     <li><strong>Use Parentheses to Clarify</strong>: Parentheses can alter the natural order of operations by giving certain operations higher priority.</li>     <li><strong>Apply Exponents Before Multiplication and Division</strong>: Exponential calculations are performed before moving on to multiplication or division.</li>     <li><strong>Multiplication and Division Are of Equal Priority</strong>: These operations are performed based on their position from left to right.</li>     <li><strong>Addition and Subtraction Are of Equal Priority</strong>: Similar to multiplication and division, these are performed from left to right.</li>   </ol>   <hr>   <h2 id="detailed-explanation-of-sequence-of-operations">Detailed Explanation of Sequence of Operations</h2>     <h3 id="parentheses">Parentheses</h3>   <p><strong>Meaning and Use:</strong></p>   <ol>     <li><strong>Grouping Operations</strong>: Parentheses indicate that the operations enclosed within them should be performed first, regardless of their position in the sequence.</li>     <li><strong>Clarifying Expressions</strong>: They help in removing ambiguity by clearly defining which parts of the expression should be calculated first.</li>   </ol>   <p><strong>Examples:</strong></p>   <ul>     <li><em>Calculate: 2 × (3 + 4)</em></li>     <li><em>Solution:</em> 2 × 7 = 14</li>     <li><em>Calculate: (5 + 2)²</em></li>     <li><em>Solution:</em> 7² = 49</li>   </ul>   <p><strong>Nested Parentheses:</strong></p>   <ul>     <li><em>Calculate: (2 + (3 × 4)) - 5</em></li>     <li><em>Solution:</em> (2 + 12) - 5 = 14 - 5 = 9</li>   </ul>   <hr>     <h3 id="exponents">Exponents</h3>   <p><strong>Meaning and Use:</strong></p>   <ol>     <li><strong>Power Operations</strong>: Exponents indicate repeated multiplication of a number by itself.</li>     <li><strong>Order of Operations</strong>: They are performed after parentheses but before multiplication and division.</li>   </ol>   <p><strong>Examples:</strong></p>   <ul>     <li><em>Calculate: 3² + 4</em></li>     <li><em>Solution:</em> 9 + 4 = 13</li>     <li><em>Calculate: 2³ × 5</em></li>     <li><em>Solution:</em> 8 × 5 = 40</li>   </ul>   <hr>     <h3 id="multiplication-and-division">Multiplication and Division</h3>   <p><strong>Meaning and Use:</strong></p>   <ol>     <li><strong>Equal Priority</strong>: Multiplication and division are of equal priority and are performed from left to right.</li>     <li><strong>Sequential Operations</strong>: When both operations appear in an expression, they are handled in the order they appear from left to right.</li>   </ol>   <p><strong>Examples:</strong></p>   <ul>     <li><em>Calculate: 8 ÷ 2 × 4</em></li>     <li><em>Solution:</em> (8 ÷ 2) × 4 = 4 × 4 = 16</li>     <li><em>Calculate: 6 × 3 ÷ 2</em></li>     <li><em>Solution:</em> (6 × 3) ÷ 2 = 18 ÷ 2 = 9</li>   </ul>   <hr>     <h3 id="addition-and-subtraction">Addition and Subtraction</h3>   <p><strong>Meaning and Use:</strong></p>   <ol>     <li><strong>Equal Priority</strong>: Addition and subtraction are of equal priority and are performed from left to right.</li>     <li><strong>Sequential Operations</strong>: Similar to multiplication and division, these operations are handled in the order they appear from left to right.</li>   </ol>   <p><strong>Examples:</strong></p>   <ul>     <li><em>Calculate: 10 - 3 + 2</em></li>     <li><em>Solution:</em> (10 - 3) + 2 = 7 + 2 = 9</li>     <li><em>Calculate: 5 + 6 - 4</em></li>     <li><em>Solution:</em> (5 + 6) - 4 = 11 - 4 = 7</li>   </ul>   <hr>     <h2 id="common-mistakes">Common Mistakes</h2>   <p>Even with clear rules, students often make mistakes when applying the sequence of operations. Here are some common errors and how to avoid them:</p>   <ul>     <li><strong>Ignoring Parentheses:</strong> Failing to prioritize operations within parentheses can lead to incorrect results.</li>     <li><strong>Incorrect Order for Multiplication and Division:</strong> Remember that these operations are performed from left to right, not based on their position in the acronym.</li>     <li><strong>Mixing Addition and Subtraction:</strong> Treat addition and subtraction with the same priority and proceed sequentially from left to right.</li>     <li><strong>Misapplying Exponents:</strong> Ensure exponents are calculated before moving on to multiplication, division, addition, or subtraction.</li>   </ul>   <p><strong>Example of a Common Mistake:</strong></p>   <ul>     <li><em>Incorrect Calculation: 8 + 2 × 5 = 50</em></li>     <li><em>Correct Calculation: 8 + (2 × 5) = 8 + 10 = 18</em></li>   </ul>   <hr>     <h2 id="conclusion">Conclusion</h2>   <p>Mastering the correct sequence of operations is essential for success in mathematics. By adhering to the PEMDAS/BODMAS rules, you can ensure that mathematical expressions are evaluated accurately and consistently. Here&#39;s a quick recap:</p>   <ul>     <li><strong>Parentheses</strong>: Always perform operations inside parentheses first.</li>     <li><strong>Exponents</strong>: Calculate exponents after parentheses.</li>     <li><strong>Multiplication and Division</strong>: Perform these operations from left to right.</li>     <li><strong>Addition and Subtraction</strong>: Perform these operations from left to right.</li>   </ul>   <p><strong>Remember</strong>: The correct sequence of operations eliminates ambiguity and ensures that everyone arrives at the same correct answer. Practice regularly, and always pay attention to the order in which operations should be performed.</p>   <hr>   <p>By understanding and applying the correct sequence of operations, you&#39;ll enhance your problem-solving skills and achieve greater accuracy in your mathematical endeavors. Keep practicing, and refer back to this guide whenever you need a refresher!</p> </div>`		
			};


        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'Practice') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function isTextEmpty(text) {
    return !text || text.trim() === "";
}

function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';
    
    // Only add stage text if it's not empty
    const stageText = quizData[0].stages[currentStage].text;
    if (!isTextEmpty(stageText)) {
        const stageTextElement = document.createElement("div");
        stageTextElement.className = "stage-text";
        stageTextElement.style.marginBottom = "20px";
        stageTextElement.style.padding = "15px";
        stageTextElement.style.backgroundColor = "#f5f5f5";
        stageTextElement.style.borderRadius = "5px";
        stageTextElement.textContent = stageText;
        quizContainer.appendChild(stageTextElement);
    }
    
    // Render questions
    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question-one-line";
        
        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${questionData.question}`;
        
        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-ltr";
        resultDiv.id = `result${index}`;
        
        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;
        
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Select";
        select.appendChild(defaultOption);
        
        const shuffledOptions = shuffleArray([...questionData.options]);
        shuffledOptions.forEach(option => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
        
        questionElement.appendChild(label);
        questionElement.appendChild(resultDiv);
        questionElement.appendChild(select);
        
        quizContainer.appendChild(questionElement);
    });

    updateStageNumber();
}

function checkStage() {
    attempts++;
    document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[0].stages[currentStage].questions.length;

    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        if (selectedAnswer === questionData.answer) {
            resultElement.textContent = "Correct!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "Incorrect answer.";
            resultElement.style.color = "red";
        }

        if (attempts >= 10) {
            selectElement.value = questionData.answer;
            selectElement.disabled = true;
            resultElement.textContent += ` The correct answer is: ${questionData.answer}`;
        }
    });

    if (correctCount === totalQuestions) {
        console.log(`Stage ${currentStage + 1}: ${correctCount} correct out of ${totalQuestions}`);
        addAnimalsToFarm(totalQuestions);

        if (currentStage < quizData[0].stages.length - 1) {
            singleStageConfetti();
            showEncouragingPopup(correctCount, totalQuestions, true);
            currentStage++;
            updateProgressBar();
            setTimeout(() => {
                attempts = 0;
                renderQuiz();
                document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
            }, 1500);
        } else {
            currentStage++;
            updateProgressBar();
            allStagesConfetti();
            showModal("Congratulations! You've completed all stages!");
        }
    } else {
        showEncouragingPopup(correctCount, totalQuestions, false);
        if (attempts >= 10) {
            showModal("You've reached the maximum number of attempts. The correct answers have been revealed.");
        }
    }

    scrollToTop();
}

// 4. Update stageCount calculation to work with new structure

		
		function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
			const incorrectCount = totalQuestions - correctCount;
			let message = `You got ${correctCount} correct and ${incorrectCount} incorrect.`;
			
			// Add encouraging message based on performance
			if (correctCount === totalQuestions) {
				message += " Perfect score!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
				message += " Great job! You're really getting the hang of this!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
				message += " Good effort! Keep practicing and you'll improve in no time!";
			} else {
				message += " Don't give up! Every attempt helps you learn. Try again!";
			}

			// Add stage completion message if applicable
			if (isStageComplete) {
				message += "\n\n You've completed this stage. Moving to the next stage.";
			}

			showModal(message);
		}

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
			updateStageNumber();
		}

function updateProgressBar() {
    const progressBar = document.getElementById("progress-bar");
    const completedStages = currentStage;
    const progress = (completedStages / stageCount) * 100;
    const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
    progressBar.style.width = `${roundedProgress}%`;
    progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
    console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
}

function updateStageNumber() {
    const stageElement = document.getElementById("stage-number");
    stageElement.textContent = `Stage ${currentStage + 1} of ${stageCount}`;
}

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>