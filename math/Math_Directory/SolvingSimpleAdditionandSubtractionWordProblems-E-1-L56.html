<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-eng.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
    <title>‚úÖ EZ42 LIVE - It's EZ</title>
	<style>
  
	</style>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
				<div class="logo-container">
					<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
						<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
					</a>
				</div>
			<h2>Instructions & Rules</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                <li>Read the text and questions carefully.</li>
                <li>Select the best answer.</li>
                <li>Click "Check Answers" when you're ready to see how you did!</li>
                <li>You can check your answers multiple times to improve your score.</li>
                <li>Correct answers are revealed after 10 attempts.</li>
                <li>You must answer all questions correctly to proceed to the next stage.</li>
				<li>Have fun!</li>
			</ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - üìó Green, A2 - üìò Blue, B1 - üìí Yellow, üìô Orange, üìî Beige, üìì Gray , üìï Red-->	
                <h1>Solving addition and subtraction word problems</h1>
                
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>
                <div id="tabContent"></div>
            </div>
			
		<!--  Side Panel 2  -->
			<div id="sidePanel2" class="side-panel">
				<h2>Animal Farm</h2>
				<p>Watch your farm grow as you progress! Each completed stage adds new animal friends to your collection.</p>
				<ul id="animalFarm" class="emoji-list">
				</ul>
			</div>
        </div>
    </div>
    <div id="copyright-container"></div>
 
    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">OK</button>
        </div>
    </div>
	<button id="scrollToTopBtn" title="Go to top">‚Üë</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

																		//  PH3 - Quiz Data 
        const quizData = [ 												   	
				{
				  "stages": [
   // Stage 1
    {
      "text": "Multi-step addition and subtraction with larger numbers",
      "questions": [
        // Question 1.1
        {
          "question": "A school orders 1,250 pencils and 875 erasers. After distributing 968 pencils and 523 erasers to students, how many items remain in total?",
          "options": ["634 items", "644 items", "624 items", "654 items", "614 items"],
          "answer": "634 items"
        },
        // Question 1.2
        {
          "question": "A store starts with 2,345 items. They sell 567 items on Monday and 893 items on Tuesday, then receive a shipment of 425 new items. How many items does the store have now?",
          "options": ["1,310 items", "1,300 items", "1,320 items", "1,330 items", "1,340 items"],
          "answer": "1,310 items"
        },
        // Question 1.3
        {
          "question": "In a library, shelf A has 856 books, shelf B has 743 books, and shelf C has 925 books. If 678 books are checked out, how many books remain on the shelves?",
          "options": ["1,846 books", "1,836 books", "1,856 books", "1,866 books", "1,876 books"],
          "answer": "1,846 books"
        },
        // Question 1.4
        {
          "question": "A factory produces 3,567 parts and uses 1,889 parts for assembly. They then receive an order for 892 more parts. How many parts are still available?",
          "options": ["786 parts", "776 parts", "796 parts", "806 parts", "816 parts"],
          "answer": "786 parts"
        },
        // Question 1.5
        {
          "question": "A school fundraiser starts with $4,500. They spend $1,875 on supplies and earn $2,340 from ticket sales. What is their current total?",
          "options": ["$4,965", "$4,955", "$4,975", "$4,985", "$4,995"],
          "answer": "$4,965"
        }
      ]
    },

    // Stage 2
    {
      "text": "Decimal operations with money and measurements",
      "questions": [
        // Question 2.1
        {
          "question": "A grocery store sells items for $23.45, $17.89, and $45.67. If a customer pays with a $100 bill, how much change should they receive?",
          "options": ["$12.99", "$13.09", "$12.89", "$13.19", "$12.79"],
          "answer": "$12.99"
        },
        // Question 2.2
        {
          "question": "A piece of wood is 15.75 feet long. If you cut off 4.25 feet and then another 3.85 feet, how many feet of wood remain?",
          "options": ["7.65 feet", "7.55 feet", "7.75 feet", "7.45 feet", "7.85 feet"],
          "answer": "7.65 feet"
        },
        // Question 2.3
        {
          "question": "Your water bottle holds 2.5 liters. If you drink 0.8 liters and then refill it with 1.2 liters, how many liters are in the bottle now?",
          "options": ["2.9 liters", "2.8 liters", "3.0 liters", "2.7 liters", "3.1 liters"],
          "answer": "2.9 liters"
        },
        // Question 2.4
        {
          "question": "A runner completes three laps: 3.25 miles, 2.75 miles, and 4.5 miles. What is the total distance run?",
          "options": ["10.5 miles", "10.4 miles", "10.6 miles", "10.3 miles", "10.7 miles"],
          "answer": "10.5 miles"
        },
        // Question 2.5
        {
          "question": "You have $45.75 and spend $12.89 on lunch and $23.45 on supplies. How much money do you have left?",
          "options": ["$9.41", "$9.31", "$9.51", "$9.21", "$9.61"],
          "answer": "$9.41"
        }
      ]
    },

    // Stage 3
    {
      "text": "Mixed operations with fractions and decimals",
      "questions": [
        // Question 3.1
        {
          "question": "A recipe uses 2 3/4 cups of flour and 1 1/2 cups of sugar. How many cups of these ingredients are needed in total?",
          "options": ["4 1/4 cups", "4 cups", "4 1/2 cups", "4 3/4 cups", "3 3/4 cups"],
          "answer": "4 1/4 cups"
        },
        // Question 3.2
        {
          "question": "You run 3.5 miles in the morning and 2 2/3 miles in the evening. How many miles did you run in total?",
          "options": ["6.17 miles", "6.07 miles", "6.27 miles", "6.37 miles", "6.47 miles"],
          "answer": "6.17 miles"
        },
        // Question 3.3
        {
          "question": "A store sells pizzas in 1/8 slices. If they have 3 3/4 pizzas left, how many slices do they have?",
          "options": ["30 slices", "29 slices", "31 slices", "28 slices", "32 slices"],
          "answer": "30 slices"
        },
        // Question 3.4
        {
          "question": "You need 4.75 yards of fabric. If you already have 2 2/3 yards, how many more yards do you need?",
          "options": ["2.08 yards", "1.98 yards", "2.18 yards", "2.28 yards", "1.88 yards"],
          "answer": "2.08 yards"
        },
        // Question 3.5
        {
          "question": "A container can hold 5 1/4 gallons. If you fill it with 3.75 gallons, how much more can it hold?",
          "options": ["1.5 gallons", "1.4 gallons", "1.6 gallons", "1.3 gallons", "1.7 gallons"],
          "answer": "1.5 gallons"
        }
      ]
    },
    // Stage 4
    {
      "text": "Percentage calculations",
      "questions": [
        // Question 4.1
        {
          "question": "A store has 400 items and sells 25% of them. After receiving a shipment of 150 new items, how many items are now in the store?",
          "options": ["450 items", "440 items", "460 items", "430 items", "470 items"],
          "answer": "450 items"
        },
        // Question 4.2
        {
          "question": "In a class of 160 students, 75% participate in sports. If 15 more students join sports, what percentage of students now participate?",
          "options": ["84%", "82%", "86%", "80%", "88%"],
          "answer": "84%"
        },
        // Question 4.3
        {
          "question": "You spend 30% of your $80 allowance on games and 45% on books. How much money do you have left?",
          "options": ["$20", "$18", "$22", "$24", "$16"],
          "answer": "$20"
        },
        // Question 4.4
        {
          "question": "A shirt costs $40. During a sale, the price is reduced by 20%, then an additional 10% off the sale price. What is the final price?",
          "options": ["$28.80", "$27.80", "$29.80", "$30.80", "$26.80"],
          "answer": "$28.80"
        },
        // Question 4.5
        {
          "question": "In a bag of 200 marbles, 40% are blue, 35% are red, and the rest are green. How many green marbles are there?",
          "options": ["50 marbles", "45 marbles", "55 marbles", "40 marbles", "60 marbles"],
          "answer": "50 marbles"
        }
      ]
    },

    // Stage 5
    {
      "text": "Rates and proportions",
      "questions": [
        // Question 5.1
        {
          "question": "If a car travels 240 miles in 4 hours at a constant speed, how many miles will it travel in 7 hours?",
          "options": ["420 miles", "410 miles", "430 miles", "400 miles", "440 miles"],
          "answer": "420 miles"
        },
        // Question 5.2
        {
          "question": "A recipe needs 2.5 cups of flour for 12 cookies. How many cups of flour are needed to make 30 cookies?",
          "options": ["6.25 cups", "6 cups", "6.5 cups", "5.75 cups", "6.75 cups"],
          "answer": "6.25 cups"
        },
        // Question 5.3
        {
          "question": "If 18 pencils cost $4.50, how much would 42 pencils cost at the same rate?",
          "options": ["$10.50", "$10.00", "$11.00", "$9.50", "$11.50"],
          "answer": "$10.50"
        },
        // Question 5.4
        {
          "question": "A printer prints 45 pages in 3 minutes. At this rate, how many pages will it print in 8 minutes?",
          "options": ["120 pages", "115 pages", "125 pages", "110 pages", "130 pages"],
          "answer": "120 pages"
        },
        // Question 5.5
        {
          "question": "If 5 workers can paint a fence in 6 hours, how long would it take 3 workers to paint the same fence?",
          "options": ["10 hours", "9 hours", "11 hours", "8 hours", "12 hours"],
          "answer": "10 hours"
        }
      ]
    },

    // Stage 6
    {
      "text": "Area and perimeter calculations",
      "questions": [
        // Question 6.1
        {
          "question": "A rectangular garden is 15 feet long and 12 feet wide. If you add a 2-foot wide path around it, what is the new perimeter?",
          "options": ["70 feet", "68 feet", "72 feet", "66 feet", "74 feet"],
          "answer": "70 feet"
        },
        // Question 6.2
        {
          "question": "A square playground has a perimeter of 100 feet. What is its area?",
          "options": ["625 sq ft", "600 sq ft", "650 sq ft", "575 sq ft", "700 sq ft"],
          "answer": "625 sq ft"
        },
        // Question 6.3
        {
          "question": "A rectangle has an area of 240 square feet and a length of 20 feet. If its width increases by 3 feet, what is the new area?",
          "options": ["300 sq ft", "280 sq ft", "320 sq ft", "260 sq ft", "340 sq ft"],
          "answer": "300 sq ft"
        },
        // Question 6.4
        {
          "question": "A rectangular room is 18 feet by 15 feet. If tiles cost $8 per square foot, how much will it cost to tile the entire room?",
          "options": ["$2,160", "$2,140", "$2,180", "$2,120", "$2,200"],
          "answer": "$2,160"
        },
        // Question 6.5
        {
          "question": "The perimeter of a rectangle is 60 feet and its width is 12 feet. What is its area?",
          "options": ["216 sq ft", "204 sq ft", "228 sq ft", "192 sq ft", "240 sq ft"],
          "answer": "216 sq ft"
        }
      ]
    },

    // Stage 7
    {
      "text": "Multi-step problems with mixed operations",
      "questions": [
        // Question 7.1
        {
          "question": "A store buys 300 notebooks at $2.50 each. They sell 75% of them at $4.00 each. How much profit do they make?",
          "options": ["$450", "$425", "$475", "$400", "$500"],
          "answer": "$450"
        },
        // Question 7.2
        {
          "question": "A recipe calls for 2 3/4 cups of flour and 1 1/2 cups of sugar. If you make the recipe 3 times, how many cups of ingredients do you need in total?",
          "options": ["12.75 cups", "12.5 cups", "13 cups", "12.25 cups", "13.25 cups"],
          "answer": "12.75 cups"
        },
        // Question 7.3
        {
          "question": "You run 2.5 miles at 5 mph, then 1.75 miles at 4 mph. How many total minutes did you spend running?",
          "options": ["56.25 minutes", "55 minutes", "57.5 minutes", "54 minutes", "58.75 minutes"],
          "answer": "56.25 minutes"
        },
        // Question 7.4
        {
          "question": "A tank is 2/3 full of water. If you remove 15 gallons and the tank now contains 45 gallons, what is the tank's total capacity?",
          "options": ["90 gallons", "85 gallons", "95 gallons", "80 gallons", "100 gallons"],
          "answer": "90 gallons"
        },
        // Question 7.5
        {
          "question": "A store sells shirts for $25 each. If they offer a 20% discount and sell 45 shirts, what are their total sales?",
          "options": ["$900", "$875", "$925", "$850", "$950"],
          "answer": "$900"
        }
      ]
    },
    // Stage 8
    {
      "text": "Volume calculations",
      "questions": [
        // Question 8.1
        {
          "question": "A rectangular box is 8 feet long, 6 feet wide, and 5 feet high. What is its volume?",
          "options": ["240 cubic feet", "230 cubic feet", "250 cubic feet", "220 cubic feet", "260 cubic feet"],
          "answer": "240 cubic feet"
        },
        // Question 8.2
        {
          "question": "If a cube has a volume of 125 cubic inches, what is the length of each edge?",
          "options": ["5 inches", "4 inches", "6 inches", "7 inches", "8 inches"],
          "answer": "5 inches"
        },
        // Question 8.3
        {
          "question": "A tank is 12 feet long, 8 feet wide, and 6 feet deep. If it's filled to 75% capacity, how many cubic feet of water does it contain?",
          "options": ["432 cubic feet", "422 cubic feet", "442 cubic feet", "412 cubic feet", "452 cubic feet"],
          "answer": "432 cubic feet"
        },
        // Question 8.4
        {
          "question": "A cylindrical container has a radius of 3 inches and a height of 10 inches. Using 3.14 for œÄ, what is its volume (rounded to nearest cubic inch)?",
          "options": ["282 cubic inches", "272 cubic inches", "292 cubic inches", "262 cubic inches", "302 cubic inches"],
          "answer": "282 cubic inches"
        },
        // Question 8.5
        {
          "question": "The volume of a box is 360 cubic feet. If its length is 12 feet and its width is 5 feet, what is its height?",
          "options": ["6 feet", "5 feet", "7 feet", "8 feet", "4 feet"],
          "answer": "6 feet"
        }
      ]
    },

    // Stage 9
    {
      "text": "Unit conversions",
      "questions": [
        // Question 9.1
        {
          "question": "A recipe needs 48 ounces of flour. How many pounds is this? (16 ounces = 1 pound)",
          "options": ["3 pounds", "2.5 pounds", "3.5 pounds", "4 pounds", "2 pounds"],
          "answer": "3 pounds"
        },
        // Question 9.2
        {
          "question": "You walk 2.5 kilometers. How many meters is this? (1 kilometer = 1000 meters)",
          "options": ["2,500 meters", "2,400 meters", "2,600 meters", "2,300 meters", "2,700 meters"],
          "answer": "2,500 meters"
        },
        // Question 9.3
        {
          "question": "A container holds 3.5 liters. How many milliliters is this? (1 liter = 1000 milliliters)",
          "options": ["3,500 milliliters", "3,400 milliliters", "3,600 milliliters", "3,300 milliliters", "3,700 milliliters"],
          "answer": "3,500 milliliters"
        },
        // Question 9.4
        {
          "question": "A rope is 15 feet long. How many inches is this? (1 foot = 12 inches)",
          "options": ["180 inches", "170 inches", "190 inches", "160 inches", "200 inches"],
          "answer": "180 inches"
        },
        // Question 9.5
        {
          "question": "You need 7,200 seconds for a project. How many hours is this? (3600 seconds = 1 hour)",
          "options": ["2 hours", "1.5 hours", "2.5 hours", "3 hours", "1 hour"],
          "answer": "2 hours"
        }
      ]
    },

    // Stage 10
    {
      "text": "Basic algebraic thinking",
      "questions": [
        // Question 10.1
        {
          "question": "A number plus 15 equals 42. What is the number?",
          "options": ["27", "26", "28", "25", "29"],
          "answer": "27"
        },
        // Question 10.2
        {
          "question": "Three times a number is 96. What is the number?",
          "options": ["32", "31", "33", "30", "34"],
          "answer": "32"
        },
        // Question 10.3
        {
          "question": "Half of a number is 45. What is the number?",
          "options": ["90", "85", "95", "80", "100"],
          "answer": "90"
        },
        // Question 10.4
        {
          "question": "A number minus 23 equals 59. What is the number?",
          "options": ["82", "81", "83", "80", "84"],
          "answer": "82"
        },
        // Question 10.5
        {
          "question": "Five times a number plus 10 equals 85. What is the number?",
          "options": ["15", "14", "16", "13", "17"],
          "answer": "15"
        }
      ]
    },
    // Stage 11
    {
      "text": "Time and distance problems",
      "questions": [
        // Question 11.1
        {
          "question": "A train travels at 60 miles per hour for 2.5 hours, then slows to 45 miles per hour for 1.5 hours. How far does it travel in total?",
          "options": ["217.5 miles", "207.5 miles", "227.5 miles", "197.5 miles", "237.5 miles"],
          "answer": "217.5 miles"
        },
        // Question 11.2
        {
          "question": "A cyclist bikes for 3 hours. If their average speed is 12 mph for the first half of the time and 8 mph for the second half, how far do they travel?",
          "options": ["30 miles", "28 miles", "32 miles", "26 miles", "34 miles"],
          "answer": "30 miles"
        },
        // Question 11.3
        {
          "question": "Two cars start 360 miles apart and drive toward each other. If one car travels at 55 mph and the other at 65 mph, how long until they meet?",
          "options": ["3 hours", "2.5 hours", "3.5 hours", "2 hours", "4 hours"],
          "answer": "3 hours"
        },
        // Question 11.4
        {
          "question": "A runner completes a 6.2 mile race. If they run the first 4 miles at 8 minutes per mile and the rest at 9 minutes per mile, how long does the race take?",
          "options": ["50.8 minutes", "49.8 minutes", "51.8 minutes", "48.8 minutes", "52.8 minutes"],
          "answer": "50.8 minutes"
        },
        // Question 11.5
        {
          "question": "If a car travels 245 miles using 7 gallons of gas, how many miles per gallon does it get?",
          "options": ["35 mpg", "34 mpg", "36 mpg", "33 mpg", "37 mpg"],
          "answer": "35 mpg"
        }
      ]
    },

    // Stage 12
    {
      "text": "Complex percentage problems",
      "questions": [
        // Question 12.1
        {
          "question": "A store increases prices by 20%, then offers a 25% discount. If an item originally cost $80, what is its final price?",
          "options": ["$72", "$70", "$74", "$68", "$76"],
          "answer": "$72"
        },
        // Question 12.2
        {
          "question": "In a school of 800 students, 45% play sports and 35% are in the band. If 15% do both, how many students are in either sports or band?",
          "options": ["520 students", "510 students", "530 students", "500 students", "540 students"],
          "answer": "520 students"
        },
        // Question 12.3
        {
          "question": "A phone costs $400. The salesperson adds 8% tax and offers a $50 rebate. What is the final cost?",
          "options": ["$382", "$372", "$392", "$362", "$402"],
          "answer": "$382"
        },
        // Question 12.4
        {
          "question": "If 15% of a number is 45, what is 25% of the same number?",
          "options": ["75", "70", "80", "65", "85"],
          "answer": "75"
        },
        // Question 12.5
        {
          "question": "A shirt's price is reduced by 30%, then by another 20%. If the final price is $56, what was the original price?",
          "options": ["$100", "$95", "$105", "$90", "$110"],
          "answer": "$100"
        }
      ]
    },

    // Stage 13
    {
      "text": "Mixed measurements",
      "questions": [
        // Question 13.1
        {
          "question": "A recipe calls for 2 3/4 cups flour, 1 1/3 cups sugar, and 2/3 cup butter. How many cups of ingredients in total?",
          "options": ["4 3/4 cups", "4 2/3 cups", "4 5/6 cups", "4 1/2 cups", "5 cups"],
          "answer": "4 3/4 cups"
        },
        // Question 13.2
        {
          "question": "A board is 8.5 feet long. How many pieces of 1 3/4 feet can be cut from it?",
          "options": ["4 pieces", "3 pieces", "5 pieces", "6 pieces", "7 pieces"],
          "answer": "4 pieces"
        },
        // Question 13.3
        {
          "question": "You have 3.5 pounds of flour. If each batch of cookies needs 2/3 pound, how many complete batches can you make?",
          "options": ["5 batches", "4 batches", "6 batches", "3 batches", "7 batches"],
          "answer": "5 batches"
        },
        // Question 13.4
        {
          "question": "A container holds 2.5 liters. How many 1/4 liter servings can it hold?",
          "options": ["10 servings", "9 servings", "11 servings", "8 servings", "12 servings"],
          "answer": "10 servings"
        },
        // Question 13.5
        {
          "question": "You need 4 2/3 yards of fabric. If fabric costs $5.50 per yard, how much will you spend?",
          "options": ["$25.67", "$24.67", "$26.67", "$23.67", "$27.67"],
          "answer": "$25.67"
        }
      ]
    },

    // Stage 14
    {
      "text": "Advanced money problems",
      "questions": [
        // Question 14.1
        {
          "question": "You buy 3 items costing $12.95, $8.75, and $15.50. With 8% tax, what is the total cost?",
          "options": ["$40.13", "$39.13", "$41.13", "$38.13", "$42.13"],
          "answer": "$40.13"
        },
        // Question 14.2
        {
          "question": "A store offers 25% off purchases over $100. If you spend $160, how much do you save?",
          "options": ["$40", "$35", "$45", "$30", "$50"],
          "answer": "$40"
        },
        // Question 14.3
        {
          "question": "You have $50 to spend on supplies costing $3.75 each. How many can you buy, and how much money will be left?",
          "options": ["13 items, $1.25 left", "12 items, $5 left", "14 items, $0.50 left", "11 items, $8.75 left", "15 items, $0"],
          "answer": "13 items, $1.25 left"
        },
        // Question 14.4
        {
          "question": "A meal costs $45.80. If you want to leave a 15% tip, how much should you leave?",
          "options": ["$6.87", "$6.77", "$6.97", "$6.67", "$7.07"],
          "answer": "$6.87"
        },
        // Question 14.5
        {
          "question": "You save $15 per week. After 8 weeks, you spend 3/5 of your savings. How much do you have left?",
          "options": ["$48", "$46", "$50", "$44", "$52"],
          "answer": "$48"
        }
      ]
    },

    // Stage 15
    {
      "text": "Complex geometric calculations",
      "questions": [
        // Question 15.1
        {
          "question": "A triangular garden has a base of 12 feet and a height of 8 feet. If mulch costs $3 per square foot, how much will it cost to cover the garden?",
          "options": ["$144", "$134", "$154", "$124", "$164"],
          "answer": "$144"
        },
        // Question 15.2
        {
          "question": "A rectangular room is 15 feet by 12 feet. If you leave a 2-foot border around the edge empty, what is the area of the remaining space?",
          "options": ["132 sq ft", "122 sq ft", "142 sq ft", "112 sq ft", "152 sq ft"],
          "answer": "132 sq ft"
        },
        // Question 15.3
        {
          "question": "A circular table has a diameter of 6 feet. Using 3.14 for œÄ, what is its circumference?",
          "options": ["18.84 feet", "17.84 feet", "19.84 feet", "16.84 feet", "20.84 feet"],
          "answer": "18.84 feet"
        },
        // Question 15.4
        {
          "question": "A square picture frame has an outer edge of 24 inches and a border width of 3 inches. What is the area of the picture space?",
          "options": ["324 sq inches", "314 sq inches", "334 sq inches", "304 sq inches", "344 sq inches"],
          "answer": "324 sq inches"
        },
        // Question 15.5
        {
          "question": "A rectangular prism is 8 feet long, 6 feet wide, and 4 feet high. What is its surface area?",
          "options": ["208 sq feet", "198 sq feet", "218 sq feet", "188 sq feet", "228 sq feet"],
          "answer": "208 sq feet"
        }
      ]
    },
   // Stage 16
    {
      "text": "Rate and ratio word problems",
      "questions": [
        // Question 16.1
        {
          "question": "If 3 printers can print 540 pages in 6 hours, how many pages can 5 printers print in 4 hours?",
          "options": ["600 pages", "580 pages", "620 pages", "560 pages", "640 pages"],
          "answer": "600 pages"
        },
        // Question 16.2
        {
          "question": "A recipe uses 2 1/4 cups of flour for 15 cookies. How many cups of flour are needed for 40 cookies?",
          "options": ["6 cups", "5.5 cups", "6.5 cups", "5 cups", "7 cups"],
          "answer": "6 cups"
        },
        // Question 16.3
        {
          "question": "If 8 workers can paint a house in 10 days, how many days would it take 4 workers to paint the same house?",
          "options": ["20 days", "18 days", "22 days", "16 days", "24 days"],
          "answer": "20 days"
        },
        // Question 16.4
        {
          "question": "A car uses 12 gallons of gas to drive 336 miles. At this rate, how many gallons are needed for a 560-mile trip?",
          "options": ["20 gallons", "19 gallons", "21 gallons", "18 gallons", "22 gallons"],
          "answer": "20 gallons"
        },
        // Question 16.5
        {
          "question": "If 5 boxes of pencils cost $12.50, how much would 13 boxes cost at the same rate?",
          "options": ["$32.50", "$31.50", "$33.50", "$30.50", "$34.50"],
          "answer": "$32.50"
        }
      ]
    },

    // Stage 17
    {
      "text": "Complex fraction operations",
      "questions": [
        // Question 17.1
        {
          "question": "You have 3 3/4 pizzas and divide them equally among 5 people. How much pizza does each person get?",
          "options": ["3/4 pizza", "2/3 pizza", "4/5 pizza", "7/10 pizza", "8/10 pizza"],
          "answer": "3/4 pizza"
        },
        // Question 17.2
        {
          "question": "A recipe calls for 2 2/3 cups of milk. If you want to make 1.5 times the recipe, how many cups of milk do you need?",
          "options": ["4 cups", "3 3/4 cups", "4 1/4 cups", "3 2/3 cups", "4 1/2 cups"],
          "answer": "4 cups"
        },
        // Question 17.3
        {
          "question": "You use 1/3 of a gallon of paint to cover 1/4 of a wall. How many gallons are needed for the entire wall?",
          "options": ["1 1/3 gallons", "1 1/4 gallons", "1 1/2 gallons", "1 gallon", "2 gallons"],
          "answer": "1 1/3 gallons"
        },
        // Question 17.4
        {
          "question": "A rope 5 1/4 feet long is cut into pieces 3/4 foot each. How many complete pieces can be made?",
          "options": ["7 pieces", "6 pieces", "8 pieces", "5 pieces", "9 pieces"],
          "answer": "7 pieces"
        },
        // Question 17.5
        {
          "question": "You have 2 1/2 pounds of flour and use 3/4 pound. How much flour is left?",
          "options": ["1 3/4 pounds", "1 2/3 pounds", "1 5/6 pounds", "1 1/2 pounds", "2 pounds"],
          "answer": "1 3/4 pounds"
        }
      ]
    },

    // Stage 18
    {
      "text": "Advanced word problems",
      "questions": [
        // Question 18.1
        {
          "question": "A store has 240 items. They sell 35% on Monday and 40% of the remainder on Tuesday. How many items are left?",
          "options": ["94 items", "84 items", "104 items", "74 items", "114 items"],
          "answer": "94 items"
        },
        // Question 18.2
        {
          "question": "A tank is filled to 3/4 of its capacity with 180 gallons. What is the tank's total capacity?",
          "options": ["240 gallons", "230 gallons", "250 gallons", "220 gallons", "260 gallons"],
          "answer": "240 gallons"
        },
        // Question 18.3
        {
          "question": "If a running track is 1/4 mile long, how many laps make 3.75 miles?",
          "options": ["15 laps", "14 laps", "16 laps", "13 laps", "17 laps"],
          "answer": "15 laps"
        },
        // Question 18.4
        {
          "question": "A box of 48 chocolates costs $24. If you eat 1/3 of them and give away 1/4 of what's left, how many remain?",
          "options": ["24 chocolates", "22 chocolates", "26 chocolates", "20 chocolates", "28 chocolates"],
          "answer": "24 chocolates"
        },
        // Question 18.5
        {
          "question": "You spend 2.5 hours working on math, which is 1/3 of your total study time. How long did you study in total?",
          "options": ["7.5 hours", "7 hours", "8 hours", "6.5 hours", "8.5 hours"],
          "answer": "7.5 hours"
        }
      ]
    },

    // Stage 19
    {
      "text": "Complex measurement problems",
      "questions": [
        // Question 19.1
        {
          "question": "A rectangular pool is 25 feet long and 12 feet wide. If the water is 4.5 feet deep, how many cubic feet of water does it hold?",
          "options": ["1,350 cu ft", "1,300 cu ft", "1,400 cu ft", "1,250 cu ft", "1,450 cu ft"],
          "answer": "1,350 cu ft"
        },
        // Question 19.2
        {
          "question": "Convert 4.25 hours to hours and minutes.",
          "options": ["4 hours 15 min", "4 hours 20 min", "4 hours 10 min", "4 hours 25 min", "4 hours 30 min"],
          "answer": "4 hours 15 min"
        },
        // Question 19.3
        {
          "question": "A recipe needs 2.75 liters of water. If your measuring cup holds 250 milliliters, how many full cups do you need?",
          "options": ["11 cups", "10 cups", "12 cups", "9 cups", "13 cups"],
          "answer": "11 cups"
        },
        // Question 19.4
        {
          "question": "A square room has an area of 256 square feet. What is the length of each wall?",
          "options": ["16 feet", "15 feet", "17 feet", "14 feet", "18 feet"],
          "answer": "16 feet"
        },
        // Question 19.5
        {
          "question": "If 1 pound equals 453.6 grams, how many complete pounds are in 2,500 grams?",
          "options": ["5 pounds", "4 pounds", "6 pounds", "4.5 pounds", "5.5 pounds"],
          "answer": "5 pounds"
        }
      ]
    },

    // Stage 20
    {
      "text": "Mixed operations word problems",
      "questions": [
        // Question 20.1
        {
          "question": "A store sells shirts for $25 each. During a sale, they reduce the price by 20%, then take an additional 10% off. What's the final price?",
          "options": ["$18", "$17", "$19", "$16", "$20"],
          "answer": "$18"
        },
        // Question 20.2
        {
          "question": "A factory produces 850 parts per day. If 3% are defective and 15% of the good parts are used for testing, how many parts remain?",
          "options": ["701 parts", "691 parts", "711 parts", "681 parts", "721 parts"],
          "answer": "701 parts"
        },
        // Question 20.3
        {
          "question": "You run at 6 mph for 40 minutes, then at 4 mph for 20 minutes. How far did you run in total?",
          "options": ["5 miles", "4.5 miles", "5.5 miles", "4 miles", "6 miles"],
          "answer": "5 miles"
        },
        // Question 20.4
        {
          "question": "A rope 100 feet long is cut into pieces. Each piece is 2.75 feet long. How many complete pieces can be made, and how much rope is left over?",
          "options": ["36 pieces, 1 foot", "35 pieces, 1.5 feet", "37 pieces, 0.5 feet", "34 pieces, 2 feet", "38 pieces, 0 feet"],
          "answer": "36 pieces, 1 foot"
        },
        // Question 20.5
        {
          "question": "If 2/5 of a number is 48, what is 3/4 of the same number?",
          "options": ["90", "85", "95", "80", "100"],
          "answer": "90"
        }
      ]
    },
   // Stage 21
    {
      "text": "Advanced algebraic thinking",
      "questions": [
        // Question 21.1
        {
          "question": "Two times a number plus 15 equals 75. What is the number?",
          "options": ["30", "28", "32", "25", "35"],
          "answer": "30"
        },
        // Question 21.2
        {
          "question": "If you subtract 12 from a number and multiply by 4, you get 60. What's the number?",
          "options": ["27", "26", "28", "25", "29"],
          "answer": "27"
        },
        // Question 21.3
        {
          "question": "Three times a number minus 15 equals 45. What is the number?",
          "options": ["20", "18", "22", "16", "24"],
          "answer": "20"
        },
        // Question 21.4
        {
          "question": "Half of a number plus 15 equals 40. What is the number?",
          "options": ["50", "45", "55", "40", "60"],
          "answer": "50"
        },
        // Question 21.5
        {
          "question": "If you add 8 to a number and divide by 3, you get 12. What's the number?",
          "options": ["28", "26", "30", "24", "32"],
          "answer": "28"
        }
      ]
    },

    // Stage 22
    {
      "text": "Complex patterns and sequences",
      "questions": [
        // Question 22.1
        {
          "question": "In a sequence, each number is 2.5 times the previous number. If it starts with 4, what's the fourth number?",
          "options": ["62.5", "60", "65", "57.5", "70"],
          "answer": "62.5"
        },
        // Question 22.2
        {
          "question": "A pattern goes: 3, 7, 15, 31, ___. What's the next number?",
          "options": ["63", "59", "67", "55", "71"],
          "answer": "63"
        },
        // Question 22.3
        {
          "question": "Each day a plant grows 1.5 times taller than the previous day. If it starts at 2 inches, how tall is it on day 4?",
          "options": ["13.5 inches", "12 inches", "15 inches", "11 inches", "16 inches"],
          "answer": "13.5 inches"
        },
        // Question 22.4
        {
          "question": "A sequence follows the rule: subtract 3, then multiply by 2. Starting at 15, what's the third number?",
          "options": ["48", "44", "52", "40", "56"],
          "answer": "48"
        },
        // Question 22.5
        {
          "question": "In a number pattern, you add 5 then multiply by 2. Starting at 3, what's the fourth number?",
          "options": ["91", "87", "95", "83", "99"],
          "answer": "91"
        }
      ]
    },

    // Stage 23
    {
      "text": "Complex ratio and proportion",
      "questions": [
        // Question 23.1
        {
          "question": "If 2.5 kg of apples cost $7.50, how much would 4.2 kg cost?",
          "options": ["$12.60", "$12.00", "$13.20", "$11.40", "$14.00"],
          "answer": "$12.60"
        },
        // Question 23.2
        {
          "question": "A map scale shows 1 inch = 24 miles. If two cities are 3.5 inches apart on the map, what's their actual distance?",
          "options": ["84 miles", "80 miles", "88 miles", "76 miles", "92 miles"],
          "answer": "84 miles"
        },
        // Question 23.3
        {
          "question": "If 15 workers can complete a job in 8 days, how many workers are needed to complete it in 6 days?",
          "options": ["20 workers", "18 workers", "22 workers", "16 workers", "24 workers"],
          "answer": "20 workers"
        },
        // Question 23.4
        {
          "question": "A recipe using 3 cups of flour makes 24 cookies. How many cookies can be made with 5.25 cups of flour?",
          "options": ["42 cookies", "40 cookies", "44 cookies", "38 cookies", "46 cookies"],
          "answer": "42 cookies"
        },
        // Question 23.5
        {
          "question": "If 4 gallons of paint cover 180 square feet, how many gallons are needed for 315 square feet?",
          "options": ["7 gallons", "6.5 gallons", "7.5 gallons", "6 gallons", "8 gallons"],
          "answer": "7 gallons"
        }
      ]
    },

    // Stage 24
    {
      "text": "Complex geometric problems",
      "questions": [
        // Question 24.1
        {
          "question": "A rectangular field is 120 yards long and 85 yards wide. Find the perimeter if you need to add 3 yards on each side for a fence.",
          "options": ["432 yards", "422 yards", "442 yards", "412 yards", "452 yards"],
          "answer": "432 yards"
        },
        // Question 24.2
        {
          "question": "A square has an area of 324 square feet. What is the length of its diagonal (rounded to nearest foot)?",
          "options": ["25 feet", "24 feet", "26 feet", "23 feet", "27 feet"],
          "answer": "25 feet"
        },
        // Question 24.3
        {
          "question": "A cylindrical tank has a radius of 4 feet and height of 10 feet. Using 3.14 for œÄ, what is its volume?",
          "options": ["502.4 cu ft", "492.4 cu ft", "512.4 cu ft", "482.4 cu ft", "522.4 cu ft"],
          "answer": "502.4 cu ft"
        },
        // Question 24.4
        {
          "question": "A triangular garden has sides of 13 feet, 14 feet, and 15 feet. What is its perimeter?",
          "options": ["42 feet", "40 feet", "44 feet", "38 feet", "46 feet"],
          "answer": "42 feet"
        },
        // Question 24.5
        {
          "question": "A rectangular lot is 45 feet by 65 feet. What is the area in square yards?",
          "options": ["325 sq yards", "315 sq yards", "335 sq yards", "305 sq yards", "345 sq yards"],
          "answer": "325 sq yards"
        }
      ]
    },

    // Stage 25
    {
      "text": "Advanced time and money",
      "questions": [
        // Question 25.1
        {
          "question": "A project takes 3.75 hours to complete. If you work on it for 45 minutes each day, how many days will it take?",
          "options": ["5 days", "4 days", "6 days", "3 days", "7 days"],
          "answer": "5 days"
        },
        // Question 25.2
        {
          "question": "You invest $500 and earn 6% annual interest. After tax of 20% on the interest, how much do you earn in a year?",
          "options": ["$24", "$22", "$26", "$20", "$28"],
          "answer": "$24"
        },
        // Question 25.3
        {
          "question": "A store offers a 30% discount, then adds 8% tax. If an item originally costs $80, what's the final price?",
          "options": ["$60.48", "$59.48", "$61.48", "$58.48", "$62.48"],
          "answer": "$60.48"
        },
        // Question 25.4
        {
          "question": "If you work 2.25 hours at $12 per hour and 3.5 hours at $15 per hour, how much do you earn?",
          "options": ["$79.50", "$77.50", "$81.50", "$75.50", "$83.50"],
          "answer": "$79.50"
        },
        // Question 25.5
        {
          "question": "You save $45 per week for 12 weeks, then spend 75% of your savings. How much is left?",
          "options": ["$135", "$125", "$145", "$115", "$155"],
          "answer": "$135"
        }
      ]
    },

    // Stage 26
    {
      "text": "Mixed measurement word problems",
      "questions": [
        // Question 26.1
        {
          "question": "A garden has an area of 150 square feet. If mulch is applied 3 inches deep, how many cubic feet of mulch are needed?",
          "options": ["37.5 cu ft", "35.5 cu ft", "39.5 cu ft", "33.5 cu ft", "41.5 cu ft"],
          "answer": "37.5 cu ft"
        },
        // Question 26.2
        {
          "question": "A recipe needs 2.75 cups of milk and 1 2/3 cups of sugar. How many cups of these ingredients are needed to make 3 batches?",
          "options": ["13.25 cups", "12.25 cups", "14.25 cups", "11.25 cups", "15.25 cups"],
          "answer": "13.25 cups"
        },
        // Question 26.3
        {
          "question": "If 1 gallon of paint covers 350 square feet, how many gallons are needed to paint a wall 15 feet high and 40 feet long?",
          "options": ["1.7 gallons", "1.5 gallons", "1.9 gallons", "1.3 gallons", "2.1 gallons"],
          "answer": "1.7 gallons"
        },
        // Question 26.4
        {
          "question": "A box is 18 inches long, 12 inches wide, and 9 inches high. What is its volume in cubic feet?",
          "options": ["1.125 cu ft", "1 cu ft", "1.25 cu ft", "0.875 cu ft", "1.375 cu ft"],
          "answer": "1.125 cu ft"
        },
        // Question 26.5
        {
          "question": "Convert 4.75 hours to hours, minutes, and seconds.",
          "options": ["4 hrs 45 min 0 sec", "4 hrs 40 min 0 sec", "4 hrs 50 min 0 sec", "4 hrs 35 min 0 sec", "4 hrs 55 min 0 sec"],
          "answer": "4 hrs 45 min 0 sec"
        }
      ]
    },

    // Stage 27
    {
      "text": "Advanced fraction word problems",
      "questions": [
        // Question 27.1
        {
          "question": "You use 2/3 of a gallon of paint to cover 3/5 of a wall. How many gallons are needed for the entire wall?",
          "options": ["1 1/9 gallons", "1 gallons", "1 2/9 gallons", "1 1/3 gallons", "1 1/6 gallons"],
          "answer": "1 1/9 gallons"
        },
        // Question 27.2
        {
          "question": "A recipe uses 3/4 cup sugar to make 15 cookies. How many cups of sugar are needed to make 40 cookies?",
          "options": ["2 cups", "1 3/4 cups", "2 1/4 cups", "1 1/2 cups", "2 1/2 cups"],
          "answer": "2 cups"
        },
        // Question 27.3
        {
          "question": "If 3/8 of a tank holds 24 gallons, what is the tank's total capacity?",
          "options": ["64 gallons", "60 gallons", "68 gallons", "56 gallons", "72 gallons"],
          "answer": "64 gallons"
        },
        // Question 27.4
        {
          "question": "You eat 2/5 of a pizza and your friend eats 1/3 of what's left. How much pizza remains?",
          "options": ["2/5 pizza", "3/8 pizza", "7/15 pizza", "1/3 pizza", "1/2 pizza"],
          "answer": "2/5 pizza"
        },
        // Question 27.5
        {
          "question": "If 5/8 of a number is 45, what is 3/4 of the same number?",
          "options": ["54", "52", "56", "50", "58"],
          "answer": "54"
        }
      ]
    },

    // Stage 28
    {
      "text": "Complex percentage problems",
      "questions": [
        // Question 28.1
        {
          "question": "A store increases prices by 25%, then gives a 20% discount. If an item was originally $60, what's the final price?",
          "options": ["$60", "$58", "$62", "$56", "$64"],
          "answer": "$60"
        },
        // Question 28.2
        {
          "question": "In a class of 200 students, 40% play sports and 35% are in band. If 15% do both, how many students do neither?",
          "options": ["80 students", "75 students", "85 students", "70 students", "90 students"],
          "answer": "80 students"
        },
        // Question 28.3
        {
          "question": "If 85% of a number is 51, what is 120% of the same number?",
          "options": ["72", "70", "74", "68", "76"],
          "answer": "72"
        },
        // Question 28.4
        {
          "question": "A shirt costs $45 with 8% tax. If you have a 15% off coupon, what's the final price (tax calculated after discount)?",
          "options": ["$41.31", "$40.31", "$42.31", "$39.31", "$43.31"],
          "answer": "$41.31"
        },
        // Question 28.5
        {
          "question": "If 60% of students passed a test, and 75% of those who passed got an A, what percentage of all students got an A?",
          "options": ["45%", "40%", "50%", "35%", "55%"],
          "answer": "45%"
        }
      ]
    },

    // Stage 29
    {
      "text": "Advanced rate problems",
      "questions": [
        // Question 29.1
        {
          "question": "If it takes 6 hours to fill a pool at 300 gallons per hour, how long will it take at 450 gallons per hour?",
          "options": ["4 hours", "3.5 hours", "4.5 hours", "3 hours", "5 hours"],
          "answer": "4 hours"
        },
        // Question 29.2
        {
          "question": "A car travels 255 miles using 15 gallons of gas. At this rate, how many gallons are needed for a 374-mile trip?",
          "options": ["22 gallons", "21 gallons", "23 gallons", "20 gallons", "24 gallons"],
          "answer": "22 gallons"
        },
        // Question 29.3
        {
          "question": "If 5 machines can produce 400 items in 2 hours, how many items can 8 machines produce in 5 hours?",
          "options": ["1,600 items", "1,500 items", "1,700 items", "1,400 items", "1,800 items"],
          "answer": "1,600 items"
        },
        // Question 29.4
        {
          "question": "A printer prints 48 pages per minute. How many minutes will it take to print 1,256 pages?",
          "options": ["26.17 minutes", "25.17 minutes", "27.17 minutes", "24.17 minutes", "28.17 minutes"],
          "answer": "26.17 minutes"
        },
        // Question 29.5
        {
          "question": "If 3 workers can paint 240 square feet in 4 hours, how many square feet can 5 workers paint in 6 hours?",
          "options": ["600 sq ft", "580 sq ft", "620 sq ft", "560 sq ft", "640 sq ft"],
          "answer": "600 sq ft"
        }
      ]
    },

    // Stage 30
    {
      "text": "Final mixed operations problems",
      "questions": [
        // Question 30.1
        {
          "question": "A store sells items for $85 each. They offer a 25% discount, then add 8% tax. If a customer buys 3 items, what's the total cost?",
          "options": ["$206.55", "$196.55", "$216.55", "$186.55", "$226.55"],
          "answer": "$206.55"
        },
        // Question 30.2
        {
          "question": "A rectangular pool is 15 feet wide and 25 feet long. If the deep end is 8 feet and the shallow end is 3 feet, what's the average depth?",
          "options": ["5.5 feet", "5 feet", "6 feet", "4.5 feet", "6.5 feet"],
          "answer": "5.5 feet"
        },
        // Question 30.3
        {
          "question": "If 2/3 of the students in a class of 48 are girls, and 3/4 of the girls play sports, how many girls play sports?",
          "options": ["24 girls", "22 girls", "26 girls", "20 girls", "28 girls"],
          "answer": "24 girls"
        },
        // Question 30.4
        {
          "question": "A bike trip of 36 miles is completed in 3 stages. The first stage is 40% of the total, and the second stage is 15 miles. How long is the third stage?",
          "options": ["6.6 miles", "6.1 miles", "7.1 miles", "5.6 miles", "7.6 miles"],
          "answer": "6.6 miles"
        },
        // Question 30.5
        {
          "question": "A factory produces parts that are 95% reliable. If they produce 2,000 parts and 80% pass quality control, how many good parts meet both criteria?",
          "options": ["1,520 parts", "1,500 parts", "1,540 parts", "1,480 parts", "1,560 parts"],
          "answer": "1,520 parts"
        }
      ]
    }
				  ]
				}
        ];

		const stageCount = quizData[0].stages.length; // This is the correct way to get the number of stages


		const stateContents = {
			'Practice': `<div id="stage-number" class="stage-number">Stage 1 of ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">Attempts: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">Check Answers</button>`
			//,'Subject Overview üóùÔ∏è': `<li>"Hi there" </li>`
		};


        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'Practice') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function isTextEmpty(text) {
    return !text || text.trim() === "";
}

function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';
    
    // Only add stage text if it's not empty
    const stageText = quizData[0].stages[currentStage].text;
    if (!isTextEmpty(stageText)) {
        const stageTextElement = document.createElement("div");
        stageTextElement.className = "stage-text";
        stageTextElement.style.marginBottom = "20px";
        stageTextElement.style.padding = "15px";
        stageTextElement.style.backgroundColor = "#f5f5f5";
        stageTextElement.style.borderRadius = "5px";
        stageTextElement.textContent = stageText;
        quizContainer.appendChild(stageTextElement);
    }
    
    // Render questions
    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question-one-line";
        
        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${questionData.question}`;
        
        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-ltr";
        resultDiv.id = `result${index}`;
        
        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;
        
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Select";
        select.appendChild(defaultOption);
        
        const shuffledOptions = shuffleArray([...questionData.options]);
        shuffledOptions.forEach(option => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
        
        questionElement.appendChild(label);
        questionElement.appendChild(resultDiv);
        questionElement.appendChild(select);
        
        quizContainer.appendChild(questionElement);
    });

    updateStageNumber();
}

function checkStage() {
    attempts++;
    document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[0].stages[currentStage].questions.length;

    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        if (selectedAnswer === questionData.answer) {
            resultElement.textContent = "Correct!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "Incorrect answer.";
            resultElement.style.color = "red";
        }

        if (attempts >= 10) {
            selectElement.value = questionData.answer;
            selectElement.disabled = true;
            resultElement.textContent += ` The correct answer is: ${questionData.answer}`;
        }
    });

    if (correctCount === totalQuestions) {
        console.log(`Stage ${currentStage + 1}: ${correctCount} correct out of ${totalQuestions}`);
        addAnimalsToFarm(totalQuestions);

        if (currentStage < quizData[0].stages.length - 1) {
            singleStageConfetti();
            showEncouragingPopup(correctCount, totalQuestions, true);
            currentStage++;
            updateProgressBar();
            setTimeout(() => {
                attempts = 0;
                renderQuiz();
                document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
            }, 1500);
        } else {
            currentStage++;
            updateProgressBar();
            allStagesConfetti();
            showModal("Congratulations! You've completed all stages!");
        }
    } else {
        showEncouragingPopup(correctCount, totalQuestions, false);
        if (attempts >= 10) {
            showModal("You've reached the maximum number of attempts. The correct answers have been revealed.");
        }
    }

    scrollToTop();
}

// 4. Update stageCount calculation to work with new structure

		
		function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
			const incorrectCount = totalQuestions - correctCount;
			let message = `You got ${correctCount} correct and ${incorrectCount} incorrect.`;
			
			// Add encouraging message based on performance
			if (correctCount === totalQuestions) {
				message += " Perfect score!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
				message += " Great job! You're really getting the hang of this!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
				message += " Good effort! Keep practicing and you'll improve in no time!";
			} else {
				message += " Don't give up! Every attempt helps you learn. Try again!";
			}

			// Add stage completion message if applicable
			if (isStageComplete) {
				message += "\n\n You've completed this stage. Moving to the next stage.";
			}

			showModal(message);
		}

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
			updateStageNumber();
		}

function updateProgressBar() {
    const progressBar = document.getElementById("progress-bar");
    const completedStages = currentStage;
    const progress = (completedStages / stageCount) * 100;
    const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
    progressBar.style.width = `${roundedProgress}%`;
    progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
    console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
}

function updateStageNumber() {
    const stageElement = document.getElementById("stage-number");
    stageElement.textContent = `Stage ${currentStage + 1} of ${stageCount}`;
}

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"üêâ", "üêª", "ü¶ó", "ü¶Å", "üêî", "ü¶Ç", "üêü", "üê£", "üêØ", "ü¶°",
			"üê∞", "üêç", "ü¶Ö", "üêà", "ü¶à", "ü¶ú", "ü¶õ", "üêÄ", "üêë",
			"üêÆ", "ü¶á", "üêá", "ü¶ñ", "ü¶Ä", "ü¶é", "üêÉ", "üê°", "üê§",
			"üê™", "ü¶•", "üêõ", "üêÖ", "üê•", "üê±", "üê∫", "üêï", "ü¶©", "üêä",
			"üêñ", "üê¢", "üï∑", "ü¶ï", "ü¶å", "üêÅ", "ü¶®", "ü¶ò", "üêµ",
			"ü¶ë", "üêã", "ü¶ì", "ü¶í", "üê≤", "ü¶Ü", "ü¶â", "üê∂", "üêÑ", "ü¶ü",
			"ü¶É", "ü¶ß", "ü¶è", "üêô", "üêø", "ü¶¢", "üêú", "üê¶", "üêû",
			"ü¶ê", "ü¶î", "üêº", "ü¶Ñ", "ü¶û", "üê´", "üê≠", "üêÜ", "ü¶ù",
			"üê†", "ü¶ö", "üê¥", "üêè", "ü¶Æ", "üêê", "üêπ", "üêé", "ü¶ã", "üê≥",
			"üê®", "üêÇ", "ü¶ç", "ü¶ô", "üê¨", "ü¶¶", "ü¶ä", "üêå", "üêì", "üêß",
			"üê∑", "üê©", "üêò", "üê∏", "üêù"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>