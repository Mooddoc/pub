<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-heb.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
	<title>✅ EZ42 - זה קל</title>
  
</head> 
<body> 
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
			<div class="logo-container">
				<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
					<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
				</a>
			</div>
                <h2>הוראות</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                    <li>יש לקרוא כל שאלה/משפט בתשומת לב.</li>
                    <li>בחר/י את התשובה הנכונה ביותר מתוך התפריט הנפתח.</li>
                    <li>יש ללחוץ על בדיקת תשובות כשמוכנים!</li>
                    <li>יש להשלים את כל השאלות כדי לעבור לשלב הבא.</li>
                    <li>לאחר 5 ניסיונות, התשובות הנכונות יוצגו.</li>
                    <li>שיהיה כיף!</li>
                </ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->		
                <h1>היכרות עם ממוצעים משוקללים</h1>
				
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>

                <div id="tabContent">
                    <!--PLACHOLDERFORNEWGAME-START-->

                    <!--PLACHOLDERFORNEWGAME-END-->
                </div>
            </div>
			
		<!--  Side Panel 2  -->
            <div id="sidePanel2" class="side-panel">
                <h2>חוות החיות</h2>
				<p>החווה שלך גדלה תוך כדי התקדמות! כל שלב מוסיף חיות חדשות לאוסף שלך.</p>
                <ul id="animalFarm" class="emoji-list">
                </ul>
            </div>
        </div>
    </div>
    <div id="copyright-container"></div>

    <!-- Modal -->
	<div id="quizModal" class="modal-quiz">
		<div class="modal-quiz-content">
			<span class="modal-quiz-close">&times;</span>
			<p id="modalMessage"></p>
			<button id="modalExplanationsButton" class="modal-quiz-button" style="display: none; background-color: #ff7f50;">צפה בהסברים</button>
			<button id="modalNextButton" class="modal-quiz-button">שלב הבא</button>
		</div>
	</div>

	<button id="scrollToTopBtn" title="Go to top">↑</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

															//  PH3 - Quiz Data 
        const quizData = [ 												 	
{
  "stages": [
//-------------------------------------------------------------------------------------------------------------------	

  // שלב 1
  {
    "text": "אמה לומדת על ממוצעים משוקללים בשיעור מתמטיקה. המורה שלה מסבירה שלפעמים, לערכים מסוימים בקבוצה יש חשיבות גדולה יותר מאחרים, ולכן הם מקבלים יותר 'משקל' בחישוב.",
    "questions": [
      {
        "question": "לאמה יש שני ציוני מבחן: \u202A80\u202C ו-\u202A90\u202C. אם שני המבחנים חשובים באותה מידה, מה הציון הממוצע שלה?",
        "options": ["\u202A85\u202C", "\u202A80\u202C", "\u202A90\u202C", "\u202A170\u202C", "בננה"],
        "answer": "\u202A85\u202C",
        "explanation": "מכיוון ששני המבחנים שווי משקל, הממוצע הוא \u202A(80 + 90) / 2 = 85\u202C"
      },
      {
        "question": "אם מבחן 1 שווה פי שניים ממבחן 2, מה הממוצע המשוקלל של אמה?",
        "options": ["\u202A83.33\u202C", "\u202A85\u202C", "\u202A80\u202C", "\u202A90\u202C", "\u202A100\u202C"],
        "answer": "\u202A83.33\u202C",
        "explanation": "הממוצע המשוקלל = \u202A(2*80 + 1*90) / (2 + 1) = (160 + 90) / 3 ≈ 83.33\u202C"
      },
      {
        "question": "בממוצעים משוקללים, למה מתייחס המונח 'משקל'?",
        "options": ["חשיבות הערך", "כמה כבד חפץ", "גודל המספרים", "מהירות המכונית", "טעם הגלידה"],
        "answer": "חשיבות הערך",
        "explanation": "בממוצעים משוקללים, 'משקל' מתייחס למידת ההשפעה של כל ערך על הממוצע"
      },
      {
        "question": "אם לכל הערכים יש אותו משקל, הממוצע המשוקלל זהה ל:",
        "options": ["ממוצע חשבוני", "חציון", "שכיח", "טווח", "צבע אהוב"],
        "answer": "ממוצע חשבוני",
        "explanation": "כאשר כל המשקלים שווים, הממוצע המשוקלל מתפשט לממוצע חשבוני רגיל"
      },
      {
        "question": "איזו נוסחה מייצגת את הממוצע המשוקלל של ערכים \u202Ax₁\u202C ו-\u202Ax₂\u202C עם משקלים \u202Aw₁\u202C ו-\u202Aw₂\u202C?",
        "options": [
          "\u202A(w₁x₁ + w₂x₂) / (w₁ + w₂)\u202C",
          "\u202A(x₁ + x₂) / 2\u202C",
          "\u202A(x₁ - x₂) * (w₁ + w₂)\u202C",
          "\u202Aw₁ + w₂ + x₁ + x₂\u202C",
          "פשוט להוסיף את כל המספרים באופן אקראי"
        ],
        "answer": "\u202A(w₁x₁ + w₂x₂) / (w₁ + w₂)\u202C",
        "explanation": "נוסחת הממוצע המשוקלל היא סכום המכפלות של הערכים והמשקלים שלהם מחולק בסכום המשקלים"
      }
    ]
  },
  // שלב 2
  {
    "text": "ליאם מחשב את הציונים שלו לסמסטר. שיעורי הבית שווים 40% מהציון שלו, והמבחן שווה 60%.",
    "questions": [
      {
        "question": "אם ליאם קיבל \u202A70\u202C בשיעורי הבית ו-\u202A80\u202C במבחן, מהו הציון הממוצע המשוקלל שלו?",
        "options": ["\u202A76\u202C", "\u202A75\u202C", "\u202A78\u202C", "\u202A85\u202C", "\u202A100\u202C"],
        "answer": "\u202A76\u202C",
        "explanation": "ממוצע משוקלל = \u202A(0.4*70 + 0.6*80) = 28 + 48 = 76\u202C"
      },
      {
        "question": "מדוע ציון המבחן משפיע יותר על הציון של ליאם?",
        "options": [
          "כי יש לו משקל גבוה יותר",
          "כי זה יותר כיף",
          "כי שיעורי בית לא נחשבים",
          "כי ליאם אוהב מבחנים",
          "כי המורה אמרה ככה"
        ],
        "answer": "כי יש לו משקל גבוה יותר",
        "explanation": "המבחן שווה 60%, מה שהופך אותו למשפיע יותר משיעורי הבית ששווים 40%"
      },
      {
        "question": "אם ליאם רוצה ממוצע משוקלל של \u202A85\u202C, איזה ציון הוא צריך לקבל במבחן אם ציון שיעורי הבית שלו הוא \u202A80\u202C?",
        "options": ["\u202A90\u202C", "\u202A85\u202C", "\u202A80\u202C", "\u202A95\u202C", "\u202A1000\u202C"],
        "answer": "\u202A90\u202C",
        "explanation": "ממוצע משוקלל = \u202A0.4*80 + 0.6*x = 85 => 32 + 0.6x = 85 => 0.6x = 53 => x ≈ 88.33\u202C, לכן הוא צריך בערך \u202A90\u202C"
      },
      {
        "question": "איזה מהמשפטים הבאים נכון לגבי ממוצעים משוקללים?",
        "options": [
          "הם מתחשבים בחשיבות של כל ערך",
          "הם מתעלמים מחלק מהערכים",
          "הם תמיד גבוהים מהערך הגבוה ביותר",
          "הם משמשים רק בפיזיקה",
          "הם טעימים כמו עוף"
        ],
        "answer": "הם מתחשבים בחשיבות של כל ערך",
        "explanation": "ממוצעים משוקללים נותנים יותר השפעה לערכים עם משקל גבוה יותר, המשקפים את חשיבותם"
      },
      {
        "question": "אם כל המשקלים מסתכמים ל-1, איך נקרא ממוצע משוקלל זה?",
        "options": [
          "ממוצע משוקלל מנורמל",
          "ממוצע חשבוני",
          "חציון",
          "שכיח",
          "ממוצע בלתי נראה"
        ],
        "answer": "ממוצע משוקלל מנורמל",
        "explanation": "כאשר המשקלים מסתכמים ל-1, זה נקרא ממוצע משוקלל מנורמל"
      }
    ]
  },
  // שלב 3
  {
    "text": "סופיה מערבבת סגסוגות מתכת שונות. היא מערבבת 5 ק\"ג של סגסוגת A בעלת צפיפות של \u202A8\u202C גרם לסמ\"ק ו-15 ק\"ג של סגסוגת B בעלת צפיפות של \u202A6\u202C גרם לסמ\"ק.",
    "questions": [
      {
        "question": "מהי הצפיפות הממוצעת המשוקללת של הסגסוגות המשולבות?",
        "options": ["\u202A6.5\u202C גרם לסמ\"ק", "\u202A7\u202C גרם לסמ\"ק", "\u202A8\u202C גרם לסמ\"ק", "\u202A6\u202C גרם לסמ\"ק", "\u202A42\u202C גרם לסמ\"ק"],
        "answer": "\u202A6.5\u202C גרם לסמ\"ק",
        "explanation": "צפיפות ממוצעת משוקללת = \u202A(5*8 + 15*6) / (5 + 15) = 130 / 20 = 6.5\u202C גרם לסמ\"ק"
      },
      {
        "question": "מדוע משתמשים בממוצעים משוקללים בערבוב סגסוגות?",
        "options": [
          "כי כמויות שונות תורמות באופן שונה",
          "כי זה כיף",
          "כי משקלות הן כבדות",
          "כי ממוצעים משעממים",
          "כי מתכות מבריקות"
        ],
        "answer": "כי כמויות שונות תורמות באופן שונה",
        "explanation": "ממוצעים משוקללים מתחשבים במסות השונות של הסגסוגות בתערובת"
      },
      {
        "question": "אם סופיה רוצה צפיפות סופית של \u202A7\u202C גרם לסמ\"ק, כמה סגסוגת B עליה לערבב עם 5 ק\"ג של סגסוגת A?",
        "options": ["\u202A10\u202C ק\"ג", "\u202A5\u202C ק\"ג", "\u202A15\u202C ק\"ג", "\u202A20\u202C ק\"ג", "\u202A100\u202C ק\"ג"],
        "answer": "\u202A10\u202C ק\"ג",
        "explanation": "ממוצע משוקלל: \u202A(5*8 + x*6) / (5 + x) = 7 => x = 10\u202C ק\"ג"
      },
      {
        "question": "ממוצעים משוקללים שימושיים באיזה מהמצבים הבאים?",
        "options": [
          "ערבוב תמיסות",
          "ספירת כבשים",
          "אפיית עוגיות",
          "בדיקת השעה",
          "הטסת עפיפונים"
        ],
        "answer": "ערבוב תמיסות",
        "explanation": "ממוצעים משוקללים עוזרים לחשב תכונות משולבות בערבוב חומרים"
      },
      {
        "question": "מה קורה לממוצע המשוקלל אם כל המשקלים מוכפלים פי שתיים?",
        "options": [
          "הוא נשאר אותו דבר",
          "הוא מוכפל פי שתיים",
          "הוא מתחלק לחצי",
          "הוא הופך לאפס",
          "הוא מתפוצץ"
        ],
        "answer": "הוא נשאר אותו דבר",
        "explanation": "הכפלת כל המשקלים לא משנה את הממוצע המשוקלל כי המשקלים הם יחסיים"
      }
    ]
  },
  // שלב 4
  {
    "text": "איתן מנתח את תיק ההשקעות שלו. הוא השקיע \u202A7,000\u202C ₪ במניה X עם תשואה של \u202A5%\u202C ו-\u202A10,500\u202C ₪ במניה Y עם תשואה של \u202A10%\u202C.",
    "questions": [
      {
        "question": "מהי התשואה הממוצעת המשוקללת של תיק ההשקעות של איתן?",
        "options": ["\u202A8%\u202C", "\u202A7%\u202C", "\u202A6%\u202C", "\u202A9%\u202C", "\u202A50%\u202C"],
        "answer": "\u202A8%\u202C",
        "explanation": "תשואה ממוצעת משוקללת = \u202A(7000*5% + 10500*10%) / (7000 + 10500) = 8%\u202C"
      },
      {
        "question": "איזו השקעה תורמת יותר לתשואה הממוצעת המשוקללת?",
        "options": [
          "מניה Y, כי יש לה משקל גבוה יותר",
          "מניה X, כי היא ראשונה",
          "שתיהן תורמות באופן שווה",
          "אף אחת, כי מניות הן לא צפויות",
          "זו עם השם המגניב יותר"
        ],
        "answer": "מניה Y, כי יש לה משקל גבוה יותר",
        "explanation": "למניה Y יש סכום השקעה גדול יותר, ולכן משקל גבוה יותר בממוצע"
      },
      {
        "question": "אם איתן רוצה תשואה ממוצעת משוקללת של \u202A9%\u202C, כמה עליו להשקיע במניה Y עם תשואה של \u202A10%\u202C, בהנחה שהוא שומר \u202A7,000\u202C ₪ במניה X?",
        "options": ["\u202A14,000\u202C ₪", "\u202A10,500\u202C ₪", "\u202A7,000\u202C ₪", "\u202A17,500\u202C ₪", "\u202A35\u202C ₪"],
        "answer": "\u202A14,000\u202C ₪",
        "explanation": "פתרון המשוואה: \u202A(7000*5% + y*10%) / (7000 + y) = 9% => y = 14,000\u202C ₪"
      },
      {
        "question": "ממוצעים משוקללים בפיננסים משמשים לחישוב:",
        "options": [
          "תשואות תיק השקעות",
          "צבע הכסף",
          "סמלי מניות",
          "חגי בנק",
          "כמה קפה שותים הבנקאים"
        ],
        "answer": "תשואות תיק השקעות",
        "explanation": "ממוצעים משוקללים עוזרים לחשב תשואות כוללות בהתבסס על השקעות בודדות וסכומיהן"
      },
      {
        "question": "אם איתן מעביר את כל השקעתו למניה Y, מה תהיה התשואה הממוצעת של התיק?",
        "options": ["\u202A10%\u202C", "\u202A5%\u202C", "\u202A8%\u202C", "\u202A0%\u202C", "\u202A1,000%\u202C"],
        "answer": "\u202A10%\u202C",
        "explanation": "אם כל ההשקעה במניה Y, התשואה הממוצעת שווה לתשואת מניה Y של \u202A10%\u202C"
      }
    ]
  },
  // שלב 5
  {
    "text": "אוליביה מחשבת את המהירות הממוצעת של הנסיעה שלה. היא נסעה \u202A100\u202C ק\"מ במהירות של \u202A50\u202C קמ\"ש ואז \u202A65\u202C ק\"מ במהירות של \u202A100\u202C קמ\"ש.",
    "questions": [
      {
        "question": "מהי המהירות הממוצעת המשוקללת של אוליביה לכל הנסיעה?",
        "options": ["\u202A65\u202C קמ\"ש", "\u202A75\u202C קמ\"ש", "\u202A80\u202C קמ\"ש", "\u202A60\u202C קמ\"ש", "\u202A600\u202C קמ\"ש"],
        "answer": "\u202A65\u202C קמ\"ש",
        "explanation": "מהירות ממוצעת = מרחק כולל / זמן כולל = \u202A165\u202C ק\"מ / \u202A(2 + 0.65)\u202C שעות ≈ \u202A65\u202C קמ\"ש"
      },
      {
        "question": "מדוע המהירות הממוצעת המשוקללת אינה פשוט הממוצע של \u202A50\u202C קמ\"ש ו-\u202A100\u202C קמ\"ש?",
        "options": [
          "כי היא בילתה זמנים שונים בכל מהירות",
          "כי מכוניות מסובכות",
          "כי ממוצעים לא עובדים עם מהירויות",
          "כי 50 ו-100 הם מספרים מיוחדים",
          "כי מד המהירות היה מקולקל"
        ],
        "answer": "כי היא בילתה זמנים שונים בכל מהירות",
        "explanation": "הממוצע המשוקלל מתחשב בזמן שבילתה בכל מהירות"
      },
      {
        "question": "אם אוליביה הייתה נוסעת זמנים שווים במהירויות של \u202A50\u202C קמ\"ש ו-\u202A100\u202C קמ\"ש, מה הייתה המהירות הממוצעת שלה?",
        "options": ["\u202A75\u202C קמ\"ש", "\u202A65\u202C קמ\"ש", "\u202A80\u202C קמ\"ש", "\u202A60\u202C קמ\"ש", "מהירות אינסופית"],
        "answer": "\u202A75\u202C קמ\"ש",
        "explanation": "כאשר הזמנים שווים, המהירות הממוצעת = \u202A(50 + 100) / 2 = 75\u202C קמ\"ש"
      },
      {
        "question": "איזה מושג חיוני בחישוב מהירות ממוצעת משוקללת?",
        "options": [
          "זמן",
          "צבע המכונית",
          "שם הנהג",
          "תנאי מזג האוויר",
          "סוג הדלק"
        ],
        "answer": "זמן",
        "explanation": "הזמן שמבלים בכל מהירות הוא קריטי לחישוב המהירות הממוצעת המשוקללת"
      },
      {
        "question": "אם אוליביה רוצה מהירות ממוצעת של \u202A80\u202C קמ\"ש ל-\u202A165\u202C ק\"מ, כמה זמן עליה לנסוע במהירות \u202A100\u202C קמ\"ש?",
        "options": ["יותר מאשר ב-\u202A50\u202C קמ\"ש", "זמן שווה בשתי המהירויות", "כל הזמן ב-\u202A100\u202C קמ\"ש", "בכלל לא ב-\u202A100\u202C קמ\"ש", "לחזור בזמן לעבר"],
        "answer": "יותר מאשר ב-\u202A50\u202C קמ\"ש",
        "explanation": "כדי להגדיל את המהירות הממוצעת, עליה לבלות יותר זמן במהירות הגבוהה יותר"
      }
    ]
  },
  // שלב 6
  {
    "text": "נועה מערבבת תמיסות במעבדת הכימיה. היא מערבבת \u202A200\u202C מ\"ל של תמיסת מלח בריכוז \u202A10%\u202C עם \u202A300\u202C מ\"ל של תמיסת מלח בריכוז \u202A20%\u202C.",
    "questions": [
      {
        "question": "מהו ריכוז התמיסה המתקבלת?",
        "options": ["\u202A16%\u202C", "\u202A15%\u202C", "\u202A14%\u202C", "\u202A18%\u202C", "\u202A100%\u202C"],
        "answer": "\u202A16%\u202C",
        "explanation": "ריכוז ממוצע משוקלל = \u202A(200*10% + 300*20%) / 500\u202C מ\"ל = \u202A16%\u202C"
      },
      {
        "question": "מדוע משתמשים בממוצעים משוקללים בערבוב תמיסות?",
        "options": [
          "כי נפחים שונים תורמים באופן שונה",
          "כי תמיסות אוהבות משקלות",
          "כי אחוזים מבלבלים",
          "כי מעבדות מסתוריות",
          "כי זה קסם"
        ],
        "answer": "כי נפחים שונים תורמים באופן שונה",
        "explanation": "ממוצעים משוקללים מתחשבים בנפחים השונים של התמיסות המעורבבות"
      },
      {
        "question": "כמה תמיסה בריכוז \u202A20%\u202C צריכה נועה להוסיף ל-\u202A200\u202C מ\"ל של תמיסה בריכוז \u202A10%\u202C כדי לקבל תמיסה בריכוז \u202A16%\u202C?",
        "options": ["\u202A300\u202C מ\"ל", "\u202A200\u202C מ\"ל", "\u202A400\u202C מ\"ל", "\u202A500\u202C מ\"ל", "\u202A1,000\u202C מ\"ל"],
        "answer": "\u202A300\u202C מ\"ל",
        "explanation": "פתרון: \u202A(200*10% + x*20%) / (200 + x) = 16% => x = 300\u202C מ\"ל"
      },
      {
        "question": "אם נועה מוסיפה נפחים שווים של תמיסות בריכוז \u202A10%\u202C ו-\u202A20%\u202C, מה יהיה הריכוז?",
        "options": ["\u202A15%\u202C", "\u202A16%\u202C", "\u202A14%\u202C", "\u202A12%\u202C", "\u202A30%\u202C"],
        "answer": "\u202A15%\u202C",
        "explanation": "ריכוז ממוצע = \u202A(10% + 20%) / 2 = 15%\u202C כאשר הנפחים שווים"
      },
      {
        "question": "מה קורה לריכוז אם נועה בטעות מוסיפה מים במקום תמיסה בריכוז \u202A20%\u202C?",
        "options": [
          "הוא יורד",
          "הוא עולה",
          "הוא נשאר אותו דבר",
          "הוא הופך למוצק",
          "הוא מתחיל לרקוד"
        ],
        "answer": "הוא יורד",
        "explanation": "הוספת מים מדללת את התמיסה, מה שמוריד את הריכוז"
      }
    ]
  },
  // שלב 7
  {
    "text": "אביה מנתחת את ציוני המדעים שלה. למבחנים יש משקל שונה: מבחן 1 שווה 25%, מבחן 2 שווה 35%, ומבחן 3 שווה 40% מהציון הסופי.",
    "questions": [
      {
        "question": "אם אביה קיבלה \u202A80\u202C במבחן 1, \u202A85\u202C במבחן 2, ו-\u202A90\u202C במבחן 3, מה הציון הממוצע המשוקלל שלה?",
        "options": ["\u202A86\u202C", "\u202A85\u202C", "\u202A87\u202C", "\u202A88\u202C", "\u202A100\u202C"],
        "answer": "\u202A86\u202C",
        "explanation": "ממוצע משוקלל = \u202A(0.25*80 + 0.35*85 + 0.40*90) = 86\u202C"
      },
      {
        "question": "איזה מבחן משפיע הכי הרבה על הציון הסופי של אביה?",
        "options": [
          "מבחן 3, כי יש לו את המשקל הגבוה ביותר",
          "מבחן 1, כי הוא ראשון",
          "מבחן 2, כי הוא באמצע",
          "כל המבחנים משפיעים באופן שווה",
          "המבחן עם הכי הרבה דפים"
        ],
        "answer": "מבחן 3, כי יש לו את המשקל הגבוה ביותר",
        "explanation": "מבחן 3 שווה 40% מהציון, הגבוה ביותר מבין המבחנים"
      },
      {
        "question": "אם אביה רוצה לשפר את הממוצע המשוקלל שלה ב-2 נקודות, על איזה מבחן עליה להתמקד?",
        "options": [
          "מבחן 3, כי יש לו את המשקל הגבוה ביותר",
          "מבחן 1, כי הוא יותר קל",
          "מבחן 2, כי הוא ממוצע",
          "כל מבחן, כולם משפיעים באופן שווה",
          "עדיף לוותר"
        ],
        "answer": "מבחן 3, כי יש לו את המשקל הגבוה ביותר",
        "explanation": "שיפור הציון במבחן עם המשקל הגבוה ביותר ישפיע הכי הרבה על הממוצע המשוקלל"
      },
      {
        "question": "מה סכום המשקלים של כל המבחנים?",
        "options": ["\u202A100%\u202C", "\u202A90%\u202C", "\u202A80%\u202C", "\u202A70%\u202C", "\u202A110%\u202C"],
        "answer": "\u202A100%\u202C",
        "explanation": "המשקלים הם \u202A25% + 35% + 40% = 100%\u202C"
      },
      {
        "question": "אם למבחן יש משקל של אפס, איך הוא משפיע על הממוצע המשוקלל?",
        "options": [
          "הוא לא משפיע על הממוצע",
          "הוא מוריד את הממוצע",
          "הוא מעלה את הממוצע",
          "הוא מכפיל את הממוצע",
          "הוא הופך לדלעת"
        ],
        "answer": "הוא לא משפיע על הממוצע",
        "explanation": "משקל של אפס משמעו שלמבחן אין השפעה על הממוצע המשוקלל"
      }
    ]
  },
  // שלב 8
  {
    "text": "דניאל מחשב את הציון הנדרש במבחן הסופי כדי להשיג ממוצע של \u202A90%\u202C בקורס. המשקלים בקורס הם: מטלות 50%, בוחן אמצע 20%, מבחן סופי 30%. כרגע יש לו \u202A88%\u202C במטלות ו-\u202A85%\u202C בבוחן האמצע.",
    "questions": [
      {
        "question": "איזה ציון צריך דניאל במבחן הסופי כדי להשיג ממוצע של \u202A90%\u202C בקורס?",
        "options": ["\u202A96%\u202C", "\u202A95%\u202C", "\u202A94%\u202C", "\u202A93%\u202C", "\u202A200%\u202C"],
        "answer": "\u202A96%\u202C",
        "explanation": "פתרון: \u202A0.5*88 + 0.2*85 + 0.3*x = 90 => x ≈ 96%\u202C"
      },
      {
        "question": "על מה צריך דניאל להתמקד כדי למקסם את הציון הסופי שלו?",
        "options": [
          "מבחן סופי, כי יש לו את המשקל הגבוה ביותר שנותר",
          "מטלות, כי זה כיף",
          "בוחן אמצע, כי הוא כבר עבר",
          "שינה, כי מנוחה חשובה",
          "כלום, ציונים מוערכים יתר על המידה"
        ],
        "answer": "מבחן סופי, כי יש לו את המשקל הגבוה ביותר שנותר",
        "explanation": "המבחן הסופי מהווה 30% מהציון והוא המרכיב היחיד שדניאל עדיין יכול להשפיע עליו"
      },
      {
        "question": "אם דניאל לא יכול לקבל יותר מ-\u202A90%\u202C במבחן הסופי, מה הממוצע הגבוה ביותר שהוא יכול להשיג בקורס?",
        "options": ["\u202A88%\u202C", "\u202A89%\u202C", "\u202A90%\u202C", "\u202A91%\u202C", "אינסוף%"],
        "answer": "\u202A89%\u202C",
        "explanation": "עם \u202Ax = 90%\u202C: ממוצע כולל = \u202A0.5*88 + 0.2*85 + 0.3*90 = 89%\u202C"
      },
      {
        "question": "ממוצעים משוקללים עוזרים לקבוע:",
        "options": [
          "ביצועים נדרשים להשגת מטרה",
          "קבוצות ספורט מועדפות",
          "טעמי גלידה הכי טובים",
          "משמעות החיים",
          "הצבע של האושר"
        ],
        "answer": "ביצועים נדרשים להשגת מטרה",
        "explanation": "ממוצעים משוקללים יכולים לחשב ציונים נדרשים להשגת ממוצע רצוי"
      },
      {
        "question": "אם המשקלים של כל המרכיבים עולים באופן שווה, מה קורה לציון הנדרש במבחן הסופי?",
        "options": [
          "הוא נשאר אותו דבר",
          "הוא עולה",
          "הוא יורד",
          "הוא הופך לאפס",
          "הוא הופך לחד-קרן"
        ],
        "answer": "הוא נשאר אותו דבר",
        "explanation": "העלאת כל המשקלים באופן יחסי לא משנה את ההשפעה היחסית שלהם"
      }
    ]
  },
  // שלב 9
  {
    "text": "יעקב מחשב את העלות הממוצעת לפריט בחנות שלו. הוא קנה \u202A100\u202C יחידות ב-\u202A17.5\u202C ₪ כל אחת ו-\u202A200\u202C יחידות ב-\u202A14\u202C ₪ כל אחת.",
    "questions": [
      {
        "question": "מהי העלות הממוצעת המשוקללת לפריט?",
        "options": ["\u202A15.17\u202C ₪", "\u202A15.75\u202C ₪", "\u202A16.33\u202C ₪", "\u202A17.5\u202C ₪", "\u202A35\u202C ₪"],
        "answer": "\u202A15.17\u202C ₪",
        "explanation": "עלות ממוצעת משוקללת = \u202A(1750 + 2800) / 300 ≈ 15.17\u202C ₪"
      },
      {
        "question": "מדוע העלות הממוצעת קרובה יותר ל-\u202A14\u202C ₪ מאשר ל-\u202A17.5\u202C ₪?",
        "options": [
          "כי נרכשו יותר יחידות ב-\u202A14\u202C ₪",
          "כי \u202A14\u202C הוא מספר נחמד יותר",
          "כי שטרות של \u202A17.5\u202C ₪ נדירים",
          "כי יעקב אוהב את המספר \u202A14\u202C",
          "כי מתמטיקה היא קסם"
        ],
        "answer": "כי נרכשו יותר יחידות ב-\u202A14\u202C ₪",
        "explanation": "הכמות הגדולה יותר במחיר הנמוך יותר מושכת את העלות הממוצעת קרוב יותר ל-\u202A14\u202C ₪"
      },
      {
        "question": "אם יעקב מוכר את כל הפריטים ב-\u202A21\u202C ₪ ליחידה, מהו הרווח הכולל שלו?",
        "options": ["\u202A1,750\u202C ₪", "\u202A2,100\u202C ₪", "\u202A2,450\u202C ₪", "\u202A2,800\u202C ₪", "\u202A3,500\u202C ₪"],
        "answer": "\u202A1,750\u202C ₪",
        "explanation": "רווח = הכנסה כוללת - עלות כוללת = \u202A6,300 - 4,550 = 1,750\u202C ₪"
      },
      {
        "question": "ממוצעים משוקללים שימושיים בעסקים לחישוב:",
        "options": [
          "עלויות ממוצעות",
          "ימי הולדת של עובדים",
          "צבעי משרד",
          "הפסקות צהריים",
          "סרטים מועדפים"
        ],
        "answer": "עלויות ממוצעות",
        "explanation": "ממוצעים משוקללים עוזרים לקבוע עלויות ממוצעות כאשר הכמויות והמחירים משתנים"
      },
      {
        "question": "אם יעקב היה קונה כמויות שוות ב-\u202A17.5\u202C ₪ וב-\u202A14\u202C ₪, מה הייתה העלות הממוצעת?",
        "options": ["\u202A15.75\u202C ₪", "\u202A15.17\u202C ₪", "\u202A14\u202C ₪", "\u202A17.5\u202C ₪", "\u202A31.5\u202C ₪"],
        "answer": "\u202A15.75\u202C ₪",
        "explanation": "עלות ממוצעת = \u202A(17.5 + 14) / 2 = 15.75\u202C ₪ כאשר הכמויות שוות"
      }
    ]
  },
  // שלב 10
  {
    "text": "מיכל מחשבת את ממוצע הציונים שלה. היא קיבלה א' (\u202A4.0\u202C) בקורס של 3 נקודות זכות, ב' (\u202A3.0\u202C) בקורס של 4 נקודות זכות, ו-ג' (\u202A2.0\u202C) בקורס של 2 נקודות זכות.",
    "questions": [
      {
        "question": "מהו ממוצע הציונים המשוקלל של מיכל?",
        "options": ["\u202A3.11\u202C", "\u202A3.00\u202C", "\u202A2.89\u202C", "\u202A3.50\u202C", "\u202A4.00\u202C"],
        "answer": "\u202A3.11\u202C",
        "explanation": "ממוצע משוקלל = \u202A(12 + 12 + 4) / 9 ≈ 3.11\u202C"
      },
      {
        "question": "איזה קורס משפיע הכי הרבה על הממוצע של מיכל?",
        "options": [
          "הקורס של 4 נקודות זכות, כי יש לו את המשקל הגבוה ביותר",
          "הקורס של 2 נקודות זכות, כי הוא הקטן ביותר",
          "כל הקורסים באופן שווה",
          "קורסים לא משפיעים על הממוצע",
          "המקצוע האהוב עליה"
        ],
        "answer": "הקורס של 4 נקודות זכות, כי יש לו את המשקל הגבוה ביותר",
        "explanation": "נקודות זכות מייצגות משקלים; יותר נקודות זכות משמעותן יותר השפעה על הממוצע"
      },
      {
        "question": "אם מיכל חוזרת על הקורס של 2 נקודות זכות ומקבלת א' (\u202A4.0\u202C), מה יהיה הממוצע החדש שלה?",
        "options": ["\u202A3.56\u202C", "\u202A3.33\u202C", "\u202A3.44\u202C", "\u202A3.22\u202C", "\u202A5.00\u202C"],
        "answer": "\u202A3.56\u202C",
        "explanation": "ממוצע חדש = \u202A(12 + 12 + 8) / 9 ≈ 3.56\u202C"
      },
      {
        "question": "בחישוב ממוצע ציונים, מה מייצגות 'נקודות זכות'?",
        "options": [
          "המשקל של כל קורס",
          "מספר המבחנים",
          "רמת הקושי של המקצוע",
          "השעה שבה הכיתה נפגשת",
          "כמה קפה צריך"
        ],
        "answer": "המשקל של כל קורס",
        "explanation": "נקודות זכות קובעות כמה כל קורס משפיע על הממוצע"
      },
      {
        "question": "אם מיכל לוקחת קורס חדש של 5 נקודות זכות ומקבלת ב' (\u202A3.0\u202C), איך זה ישפיע על הממוצע שלה?",
        "options": [
          "הוא ירד",
          "הוא יעלה",
          "הוא יישאר אותו דבר",
          "הוא ייעלם",
          "הוא יהפוך לדרקון"
        ],
        "answer": "הוא ירד",
        "explanation": "הוספת קורס עם ציון נמוך מהממוצע הנוכחי תוריד את הממוצע הכללי"
      }
    ]
  },
  // שלב 11
  {
    "text": "הדס חוקרת את ממוצע הנקודות של קבוצת הכדורסל שלה. היא רוצה לחשב את ממוצע הנקודות של הקבוצה למשחק, בהתחשב בכך שחלק מהשחקנים מבקיעים יותר מאחרים.",
    "questions": [
      {
        "question": "אם שחקן א' קלע \u202A10\u202C נקודות ב-3 משחקים ושחקן ב' קלע \u202A20\u202C נקודות ב-2 משחקים, מה הממוצע המשוקלל של נקודות למשחק?",
        "options": ["\u202A13\u202C", "\u202A15\u202C", "\u202A12\u202C", "\u202A14\u202C", "\u202A100\u202C"],
        "answer": "\u202A14\u202C",
        "explanation": "ממוצע משוקלל = \u202A(10*3 + 20*2) / (3 + 2) = (30 + 40) / 5 = 14\u202C"
      },
      {
        "question": "מדוע הנקודות של שחקן ב' משפיעות יותר על הממוצע?",
        "options": [
          "בגלל יותר נקודות למשחק",
          "בגלל צבע החולצה",
          "כי שחקן א' נמוך יותר",
          "כי כדורי הסל כתומים",
          "כי הקהל עודד חזק יותר"
        ],
        "answer": "בגלל יותר נקודות למשחק",
        "explanation": "שחקן ב' קולע יותר נקודות למשחק, מה שמגדיל את השפעתו על הממוצע"
      },
      {
        "question": "אם הדס רוצה שממוצע הנקודות של הקבוצה למשחק יהיה \u202A16\u202C, כמה נקודות צריך שחקן ג' לקלוע במשחק אחד?",
        "options": ["\u202A30\u202C", "\u202A20\u202C", "\u202A25\u202C", "\u202A35\u202C", "\u202A5\u202C"],
        "answer": "\u202A30\u202C",
        "explanation": "סך הנקודות הרצוי = \u202A16 * (3 + 2 + 1) = 96\u202C. נקודות נוכחיות = \u202A70\u202C. לכן שחקן ג' צריך לקלוע \u202A96 - 70 = 26\u202C (בערך \u202A30\u202C)"
      },
      {
        "question": "ממוצעים משוקללים עוזרים במצבים שבהם:",
        "options": [
          "נקודות נתונים שונות יש להן תדירויות שונות",
          "כל נקודות הנתונים זהות",
          "המספרים מבלבלים",
          "רוצים להתעלם מחלק מהנתונים",
          "צריך לצייר תמונות"
        ],
        "answer": "נקודות נתונים שונות יש להן תדירויות שונות",
        "explanation": "ממוצעים משוקללים שימושיים כאשר נקודות נתונים תורמות באופן לא שווה לסך הכל"
      },
      {
        "question": "אם שחקן א' משתפר וקולע \u202A15\u202C נקודות ב-3 המשחקים הבאים, איך זה ישפיע על הממוצע המשוקלל?",
        "options": [
          "הוא יעלה",
          "הוא ירד",
          "הוא יישאר אותו דבר",
          "הוא ייעלם",
          "הוא יהפוך לבננה"
        ],
        "answer": "הוא יעלה",
        "explanation": "עלייה בנקודות של שחקן א' תעלה את הממוצע המשוקלל הכולל"
      }
    ]
  },
  // שלב 12
  {
    "text": "רותם מערבבת שני סוגים של פולי קפה ליצירת תערובת חדשה. היא משתמשת ב-2 ק\"ג של פולים מסוג X שעולים \u202A52\u202C ₪ לק\"ג ו-3 ק\"ג של פולים מסוג Y שעולים \u202A35\u202C ₪ לק\"ג.",
    "questions": [
      {
        "question": "מהי העלות הממוצעת המשוקללת לק\"ג של תערובת הקפה החדשה?",
        "options": ["\u202A42\u202C ₪", "\u202A45\u202C ₪", "\u202A38\u202C ₪", "\u202A49\u202C ₪", "\u202A350\u202C ₪"],
        "answer": "\u202A42\u202C ₪",
        "explanation": "עלות ממוצעת משוקללת = \u202A(2*52 + 3*35) / (2 + 3) = (104 + 105) / 5 = 42\u202C ₪"
      },
      {
        "question": "מדוע העלות הממוצעת קרובה יותר ל-\u202A35\u202C ₪ מאשר ל-\u202A52\u202C ₪?",
        "options": [
          "כי משתמשים ביותר פולים מסוג Y",
          "כי הקפה חום",
          "כי \u202A35\u202C הוא מספר עגול",
          "כי רותם מעדיפה את פולי Y",
          "כי מתמטיקה אומרת ככה"
        ],
        "answer": "כי משתמשים ביותר פולים מסוג Y",
        "explanation": "לפולי Y יש משקל גדול יותר בתערובת, מה שמושך את העלות הממוצעת לכיוון \u202A35\u202C ₪ לק\"ג"
      },
      {
        "question": "אם רותם רוצה שהתערובת תעלה בדיוק \u202A45\u202C ₪ לק\"ג, בכמה ק\"ג של פולי X עליה להשתמש עם 3 ק\"ג של פולי Y?",
        "options": ["\u202A3\u202C ק\"ג", "\u202A4\u202C ק\"ג", "\u202A2\u202C ק\"ג", "\u202A5\u202C ק\"ג", "\u202A10\u202C ק\"ג"],
        "answer": "\u202A3\u202C ק\"ג",
        "explanation": "פתרון: \u202A(x*52 + 3*35) / (x + 3) = 45 => x = 3\u202C ק\"ג"
      },
      {
        "question": "ממוצעים משוקללים בערבוב מוצרים עוזרים לקבוע:",
        "options": [
          "עלות כוללת",
          "צבע התערובת",
          "עיצוב האריזה",
          "מיקום החנות",
          "מהירות התקררות הקפה"
        ],
        "answer": "עלות כוללת",
        "explanation": "הם עוזרים לחשב את העלות המשולבת בהתבסס על כמויות ומחירים בודדים"
      },
      {
        "question": "אם המחיר של פולי Y עולה ל-\u202A42\u202C ₪ לק\"ג, מה קורה לעלות הממוצעת המשוקללת?",
        "options": [
          "היא עולה",
          "היא יורדת",
          "היא נשארת אותו דבר",
          "היא הופכת לאפס",
          "היא מכינה את עצמה"
        ],
        "answer": "היא עולה",
        "explanation": "עלייה במחיר של פולי Y מעלה את העלות הממוצעת המשוקללת הכוללת"
      }
    ]
  },
  // שלב 13
  {
    "text": "רון מחשב את ממוצע הצעדים היומי שלו במהלך השבוע. בימי חול הוא הולך \u202A8,000\u202C צעדים ביום, ובסופי שבוע הוא הולך \u202A12,000\u202C צעדים ביום.",
    "questions": [
      {
        "question": "מהו ממוצע הצעדים המשוקלל של רון ליום במשך השבוע?",
        "options": ["\u202A9,143\u202C", "\u202A10,000\u202C", "\u202A8,500\u202C", "\u202A9,500\u202C", "\u202A20,000\u202C"],
        "answer": "\u202A9,143\u202C",
        "explanation": "ממוצע משוקלל = \u202A(5*8,000 + 2*12,000) / 7 ≈ 9,143\u202C צעדים"
      },
      {
        "question": "מדוע לסוף השבוע יש פחות השפעה על הממוצע השבועי?",
        "options": [
          "כי יש פחות ימי סוף שבוע",
          "כי סופי שבוע כיפיים",
          "כי צעדים נספרים פחות בסופי שבוע",
          "כי רון נועל נעליים שונות",
          "כי השמש זורחת חזק יותר"
        ],
        "answer": "כי יש פחות ימי סוף שבוע",
        "explanation": "רק שני ימים הם סוף שבוע, לכן הם תורמים פחות לממוצע הכולל"
      },
      {
        "question": "אם רון רוצה ממוצע של \u202A10,000\u202C צעדים ליום בשבוע, כמה צעדים עליו ללכת בסופי שבוע?",
        "options": ["\u202A16,000\u202C", "\u202A14,000\u202C", "\u202A12,000\u202C", "\u202A18,000\u202C", "\u202A5,000\u202C"],
        "answer": "\u202A16,000\u202C",
        "explanation": "פתרון: \u202A(5*8,000 + 2*x) / 7 = 10,000 => x = 16,000\u202C צעדים"
      },
      {
        "question": "ממוצעים משוקללים שימושיים בחישוב:",
        "options": [
          "פעילויות ממוצעות בתקופות שונות",
          "תחזיות מדויקות לעתיד",
          "צבע הגרביים",
          "אפשרויות מסע בזמן",
          "איך לדבר עם חיות"
        ],
        "answer": "פעילויות ממוצעות בתקופות שונות",
        "explanation": "הם עוזרים למצוא ממוצעים כאשר תקופות שונות תורמות באופן לא שווה"
      },
      {
        "question": "אם רון מגדיל את הצעדים בימי חול ל-\u202A9,000\u202C, איך זה משפיע על הממוצע השבועי שלו?",
        "options": [
          "הוא עולה",
          "הוא יורד",
          "הוא נשאר אותו דבר",
          "הוא נעלם",
          "הוא רוקד ריקוד אירי"
        ],
        "answer": "הוא עולה",
        "explanation": "הגדלת הצעדים בימי חול מעלה את הממוצע המשוקלל הכולל"
      }
    ]
  },
  // שלב 14
  {
    "text": "שירה משלבת שני ציונים בשיעור אמנות: ציון הפרויקט ששווה 70% וציון ההשתתפות ששווה 30%. היא קיבלה \u202A85%\u202C בפרויקט.",
    "questions": [
      {
        "question": "איזה ציון השתתפות צריכה שירה כדי להשיג ציון סופי של \u202A90%\u202C?",
        "options": ["\u202A100%\u202C", "\u202A95%\u202C", "\u202A90%\u202C", "\u202A85%\u202C", "\u202A50%\u202C"],
        "answer": "\u202A100%\u202C",
        "explanation": "פתרון: \u202A0.7*85% + 0.3*x = 90% => x = 100%\u202C"
      },
      {
        "question": "מדוע קשה יותר לשירה להעלות את הציון הסופי באמצעות ציון ההשתתפות?",
        "options": [
          "כי להשתתפות יש משקל נמוך יותר",
          "כי אמנות היא סובייקטיבית",
          "כי פרויקטים הם כיפיים",
          "כי 30% זה מספר גדול",
          "כי הצבע מתייבש"
        ],
        "answer": "כי להשתתפות יש משקל נמוך יותר",
        "explanation": "השתתפות שווה רק 30%, לכן שינויים בה משפיעים פחות"
      },
      {
        "question": "אם ציון ההשתתפות של שירה הוא \u202A80%\u202C, מה הציון הסופי שלה?",
        "options": ["\u202A83.5%\u202C", "\u202A86.5%\u202C", "\u202A88%\u202C", "\u202A85%\u202C", "\u202A100%\u202C"],
        "answer": "\u202A83.5%\u202C",
        "explanation": "ציון סופי = \u202A0.7*85% + 0.3*80% = 83.5%\u202C"
      },
      {
        "question": "ממוצעים משוקללים בציונים עוזרים למורים ל:",
        "options": [
          "לשלב הערכות שונות בצורה הוגנת",
          "להחליט על סידור הישיבה בכיתה",
          "לבחור יעדים לטיולים",
          "לחשב תפריטי ארוחת צהריים",
          "לחזות את מזג האוויר"
        ],
        "answer": "לשלב הערכות שונות בצורה הוגנת",
        "explanation": "הם מבטיחים שכל מרכיב תורם באופן מתאים לציון הסופי"
      },
      {
        "question": "אם משקל הפרויקט עולה ל-80%, איך זה משפיע על הציון הסופי של שירה?",
        "options": [
          "הוא עולה",
          "הוא יורד",
          "הוא נשאר אותו דבר",
          "הוא הופך לשלילי",
          "הוא הופך לשיר"
        ],
        "answer": "הוא עולה",
        "explanation": "מכיוון שציון הפרויקט גבוה יותר מציון ההשתתפות, הגדלת משקלו מעלה את הציון הסופי"
      }
    ]
  },
  // שלב 15
  {
    "text": "אור מנתח את צריכת הדלק הממוצעת של מכוניתו בשתי נסיעות. הנסיעה הראשונה הייתה \u202A100\u202C ק\"מ עם צריכה של \u202A8\u202C ק\"מ לליטר, והנסיעה השנייה הייתה \u202A200\u202C ק\"מ עם צריכה של \u202A12\u202C ק\"מ לליטר.",
    "questions": [
      {
        "question": "מהי צריכת הדלק הממוצעת המשוקללת בשתי הנסיעות?",
        "options": ["\u202A10.67\u202C ק\"מ/ליטר", "\u202A10\u202C ק\"מ/ליטר", "\u202A9\u202C ק\"מ/ליטר", "\u202A12\u202C ק\"מ/ליטר", "\u202A15\u202C ק\"מ/ליטר"],
        "answer": "\u202A10.67\u202C ק\"מ/ליטר",
        "explanation": "ממוצע משוקלל = \u202A(100*8 + 200*12) / (100 + 200) ≈ 10.67\u202C ק\"מ/ליטר"
      },
      {
        "question": "מדוע לנסיעה השנייה יש יותר השפעה על הצריכה הממוצעת?",
        "options": [
          "כי היא מכסה מרחק גדול יותר",
          "כי 12 הוא מספר גדול יותר",
          "כי מכוניות אוהבות נסיעות ארוכות",
          "כי אור נסע מהר יותר",
          "כי הכביש היה ישר"
        ],
        "answer": "כי היא מכסה מרחק גדול יותר",
        "explanation": "יותר קילומטרים משמעם משקל גבוה יותר בחישוב הצריכה הממוצעת"
      },
      {
        "question": "אם אור רוצה צריכה ממוצעת של \u202A11\u202C ק\"מ/ליטר על פני \u202A300\u202C ק\"מ, מה צריכה להיות הצריכה בנסיעה שלישית של \u202A100\u202C ק\"מ?",
        "options": ["\u202A13\u202C ק\"מ/ליטר", "\u202A14\u202C ק\"מ/ליטר", "\u202A12\u202C ק\"מ/ליטר", "\u202A11\u202C ק\"מ/ליטר", "\u202A10\u202C ק\"מ/ליטר"],
        "answer": "\u202A13\u202C ק\"מ/ליטר",
        "explanation": "פתרון: \u202A(100*8 + 200*12 + 100*x) / 400 = 11 => x = 13\u202C ק\"מ/ליטר"
      },
      {
        "question": "ממוצעים משוקללים בחישובי צריכת דלק עוזרים לנהגים להבין:",
        "options": [
          "צריכת דלק כוללת",
          "צבע המכונית",
          "סגנונות מוזיקה מועדפים",
          "חוקי תנועה",
          "צורות עננים"
        ],
        "answer": "צריכת דלק כוללת",
        "explanation": "הם מספקים ממוצע מדויק המתחשב בתנאי נהיגה שונים"
      },
      {
        "question": "אם היעילות בנסיעה הראשונה משתפרת ל-\u202A10\u202C ק\"מ/ליטר, איך זה משפיע על הממוצע המשוקלל?",
        "options": [
          "הוא עולה",
          "הוא יורד",
          "הוא נשאר אותו דבר",
          "הוא הופך שלילי",
          "הוא עף משם"
        ],
        "answer": "הוא עולה",
        "explanation": "שיפור היעילות בכל נסיעה מעלה את הממוצע המשוקלל הכולל של צריכת הדלק"
      }
    ]
  },
  // שלב 16
  {
    "text": "גל עורכת ניסוי במעבדה ומערבבת תמיסות. היא מערבבת \u202A150\u202C מ\"ל של תמיסת סוכר בריכוז \u202A30%\u202C עם \u202A350\u202C מ\"ל של תמיסת סוכר בריכוז \u202A10%\u202C.",
    "questions": [
      {
        "question": "מהו ריכוז התמיסה המתקבלת?",
        "options": ["\u202A16%\u202C", "\u202A18%\u202C", "\u202A20%\u202C", "\u202A22%\u202C", "\u202A50%\u202C"],
        "answer": "\u202A16%\u202C",
        "explanation": "ריכוז ממוצע משוקלל = \u202A(150*30% + 350*10%) / 500\u202C מ\"ל = \u202A16%\u202C"
      },
      {
        "question": "מדוע הריכוז הסופי קרוב יותר ל-\u202A10%\u202C מאשר ל-\u202A30%\u202C?",
        "options": [
          "כי משתמשים ביותר תמיסה בריכוז \u202A10%\u202C",
          "כי הסוכר מתמוסס",
          "כי \u202A10\u202C הוא מספר קטן יותר",
          "כי גל מעדיפה את המספר \u202A10\u202C",
          "כי חלוקי המעבדה לבנים"
        ],
        "answer": "כי משתמשים ביותר תמיסה בריכוז \u202A10%\u202C",
        "explanation": "הנפח הגדול יותר של התמיסה בריכוז \u202A10%\u202C מוריד את הריכוז הכולל"
      },
      {
        "question": "אם גל רוצה ריכוז סופי של \u202A20%\u202C, כמה מ\"ל של תמיסה בריכוז \u202A30%\u202C עליה להשתמש עם \u202A350\u202C מ\"ל של תמיסה בריכוז \u202A10%\u202C?",
        "options": ["\u202A250\u202C מ\"ל", "\u202A350\u202C מ\"ל", "\u202A150\u202C מ\"ל", "\u202A450\u202C מ\"ל", "\u202A50\u202C מ\"ל"],
        "answer": "\u202A250\u202C מ\"ל",
        "explanation": "פתרון: \u202A(x*30% + 350*10%) / (x + 350) = 20% => x = 250\u202C מ\"ל"
      },
      {
        "question": "בערבוב תמיסות, ממוצעים משוקללים עוזרים לקבוע:",
        "options": [
          "ריכוזים סופיים",
          "צבעי נוזלים",
          "טמפרטורת חדר המעבדה",
          "משך הניסויים",
          "בדיחות מעבדה מצחיקות"
        ],
        "answer": "ריכוזים סופיים",
        "explanation": "הם מחשבים את הריכוז המשולב בהתבסס על נפחים וריכוזים בודדים"
      },
      {
        "question": "אם גל בטעות משתמשת ב-\u202A350\u202C מ\"ל מים טהורים במקום תמיסה בריכוז \u202A10%\u202C, מה קורה לריכוז הסופי?",
        "options": [
          "הוא יורד משמעותית",
          "הוא עולה",
          "הוא נשאר אותו דבר",
          "הוא הופך ל-\u202A100%\u202C",
          "הוא גולש החוצה"
        ],
        "answer": "הוא יורד משמעותית",
        "explanation": "הוספת מים טהורים מדללת את התמיסה, מה שמוריד את הריכוז"
      }
    ]
  },
  // שלב 17
  {
    "text": "טל מחשבת את המשקל הממוצע של בעלי החיים במקלט. יש 5 כלבים במשקל ממוצע של \u202A20\u202C ק\"ג כל אחד ו-15 חתולים במשקל ממוצע של \u202A5\u202C ק\"ג כל אחד.",
    "questions": [
      {
        "question": "מהו המשקל הממוצע המשוקלל של בעלי החיים?",
        "options": ["\u202A8.75\u202C ק\"ג", "\u202A10\u202C ק\"ג", "\u202A12\u202C ק\"ג", "\u202A15\u202C ק\"ג", "\u202A50\u202C ק\"ג"],
        "answer": "\u202A8.75\u202C ק\"ג",
        "explanation": "ממוצע משוקלל = \u202A(5*20 + 15*5) / (5 + 15) = (100 + 75) / 20 = 8.75\u202C ק\"ג"
      },
      {
        "question": "מדוע המשקל הממוצע קרוב יותר למשקל החתולים?",
        "options": [
          "כי יש יותר חתולים",
          "כי חתולים פרוותיים",
          "כי \u202A5\u202C ק\"ג זה קל יותר",
          "כי הכלבים ישנים",
          "כי טל אוהבת חתולים"
        ],
        "answer": "כי יש יותר חתולים",
        "explanation": "המספר הגדול יותר של חתולים מוריד את המשקל הממוצע הכולל"
      },
      {
        "question": "אם מוסיפים 5 כלבים נוספים במשקל \u202A20\u202C ק\"ג כל אחד, מה המשקל הממוצע החדש?",
        "options": ["\u202A11.25\u202C ק\"ג", "\u202A10\u202C ק\"ג", "\u202A15\u202C ק\"ג", "\u202A12.5\u202C ק\"ג", "\u202A20\u202C ק\"ג"],
        "answer": "\u202A11.25\u202C ק\"ג",
        "explanation": "ממוצע משוקלל חדש = \u202A(10*20 + 15*5) / 25 = (200 + 75) / 25 = 11.25\u202C ק\"ג"
      },
      {
        "question": "ממוצעים משוקללים בהקשר זה עוזרים לחשב:",
        "options": [
          "משקל ממוצע כולל",
          "מזון מועדף על החיות",
          "מיקום המקלט",
          "מספר המבקרים",
          "תחזיות מזג אוויר"
        ],
        "answer": "משקל ממוצע כולל",
        "explanation": "הם קובעים את המשקל הממוצע בהתחשב במספר החיות מכל סוג"
      },
      {
        "question": "אם במקלט היו רק חתולים, מה היה המשקל הממוצע?",
        "options": ["\u202A5\u202C ק\"ג", "\u202A8.75\u202C ק\"ג", "\u202A20\u202C ק\"ג", "\u202A10\u202C ק\"ג", "\u202A0\u202C ק\"ג"],
        "answer": "\u202A5\u202C ק\"ג",
        "explanation": "עם חתולים בלבד, המשקל הממוצע שווה למשקל הממוצע של החתולים שהוא \u202A5\u202C ק\"ג"
      }
    ]
  },
  // שלב 18
  {
    "text": "יובל מנתחת את הדירוג הממוצע של האפליקציה שלה. יש לה \u202A200\u202C דירוגים של 4 כוכבים ו-\u202A50\u202C דירוגים של 2 כוכבים.",
    "questions": [
      {
        "question": "מהו הדירוג הממוצע המשוקלל של האפליקציה שלה?",
        "options": ["\u202A3.6\u202C כוכבים", "\u202A3.8\u202C כוכבים", "\u202A4\u202C כוכבים", "\u202A3.4\u202C כוכבים", "\u202A5\u202C כוכבים"],
        "answer": "\u202A3.6\u202C כוכבים",
        "explanation": "ממוצע משוקלל = \u202A(200*4 + 50*2) / (200 + 50) = (800 + 100) / 250 = 3.6\u202C כוכבים"
      },
      {
        "question": "מדוע המספר הנמוך של דירוגי 2 כוכבים משפיע משמעותית על הממוצע?",
        "options": [
          "כי לדירוגים נמוכים יש השפעה גדולה",
          "כי כוכבים נוצצים",
          "כי 2 פחות מ-4",
          "כי יובל דואגת הרבה",
          "כי אפליקציות מסובכות"
        ],
        "answer": "כי לדירוגים נמוכים יש השפעה גדולה",
        "explanation": "גם מספר קטן של דירוגים נמוכים יכול להוריד משמעותית את הממוצע הכולל"
      },
      {
        "question": "כמה דירוגי 5 כוכבים נוספים נדרשים כדי להעלות את הממוצע ל-4 כוכבים?",
        "options": ["\u202A150\u202C", "\u202A100\u202C", "\u202A200\u202C", "\u202A50\u202C", "\u202A500\u202C"],
        "answer": "\u202A150\u202C",
        "explanation": "פתרון: \u202A(800 + 100 + x*5) / (250 + x) = 4 => x = 150\u202C"
      },
      {
        "question": "ממוצעים משוקללים בדירוגים עוזרים למפתחים להבין:",
        "options": [
          "שביעות רצון כללית של משתמשים",
          "איך לתכנת",
          "מהירויות הורדה של האפליקציה",
          "דפוסי מזג אוויר",
          "בחירות חטיפים מומלצות"
        ],
        "answer": "שביעות רצון כללית של משתמשים",
        "explanation": "הם משקפים את הדעה הכללית של המשתמשים בהתבסס על הדירוגים ותדירותם"
      },
      {
        "question": "אם כל הדירוגים היו 4 כוכבים, מה היה הדירוג הממוצע?",
        "options": ["\u202A4\u202C כוכבים", "\u202A3.6\u202C כוכבים", "\u202A5\u202C כוכבים", "\u202A2\u202C כוכבים", "\u202A0\u202C כוכבים"],
        "answer": "\u202A4\u202C כוכבים",
        "explanation": "עם כל הדירוגים ב-4 כוכבים, הממוצע היה בדיוק 4 כוכבים"
      }
    ]
  },
  // שלב 19
  {
    "text": "נעם משלב שני סוגים של קמח לאפייה. הוא משתמש בקילוגרם אחד של קמח מלא (תכולת חלבון \u202A12%\u202C) ו-2 ק\"ג של קמח לבן (תכולת חלבון \u202A10%\u202C).",
    "questions": [
      {
        "question": "מהי תכולת החלבון הממוצעת המשוקללת בתערובת הקמח?",
        "options": ["\u202A10.67%\u202C", "\u202A11%\u202C", "\u202A11.33%\u202C", "\u202A12%\u202C", "\u202A22%\u202C"],
        "answer": "\u202A10.67%\u202C",
        "explanation": "ממוצע משוקלל = \u202A(1*12% + 2*10%) / 3\u202C ק\"ג ≈ \u202A10.67%\u202C"
      },
      {
        "question": "מדוע תכולת החלבון קרובה יותר ל-\u202A10%\u202C מאשר ל-\u202A12%\u202C?",
        "options": [
          "כי משתמשים ביותר קמח לבן",
          "כי \u202A10%\u202C הוא מספר נחמד",
          "כי אפייה היא כיף",
          "כי נעם מעדיף קמח לבן",
          "כי התנור חם"
        ],
        "answer": "כי משתמשים ביותר קמח לבן",
        "explanation": "הכמות הגדולה יותר של קמח לבן מורידה את תכולת החלבון הכללית"
      },
      {
        "question": "אם נעם רוצה תכולת חלבון של \u202A11%\u202C, בכמה קמח מלא עליו להשתמש עם 2 ק\"ג של קמח לבן?",
        "options": ["\u202A1.5\u202C ק\"ג", "\u202A2\u202C ק\"ג", "\u202A1\u202C ק\"ג", "\u202A2.5\u202C ק\"ג", "\u202A0.5\u202C ק\"ג"],
        "answer": "\u202A1.5\u202C ק\"ג",
        "explanation": "פתרון: \u202A(x*12% + 2*10%) / (x + 2) = 11% => x = 1.5\u202C ק\"ג"
      },
      {
        "question": "ממוצעים משוקללים באפייה עוזרים ל:",
        "options": [
          "להשיג תכונות רצויות במרכיבים",
          "לקשט את המטבח",
          "לבחור מוזיקה לאפייה",
          "לקבוע טמפרטורת תנור",
          "לחזות פופולריות של מתכון"
        ],
        "answer": "להשיג תכונות רצויות במרכיבים",
        "explanation": "הם עוזרים לשלב מרכיבים כדי להגיע לתכולת חומרים מזינים ספציפית"
      },
      {
        "question": "אם נעם משתמש רק בקמח מלא, מה תהיה תכולת החלבון?",
        "options": ["\u202A12%\u202C", "\u202A10%\u202C", "\u202A11%\u202C", "\u202A22%\u202C", "\u202A0%\u202C"],
        "answer": "\u202A12%\u202C",
        "explanation": "שימוש בקמח מלא בלבד יביא לתכולת חלבון של \u202A12%\u202C"
      }
    ]
  },
  // שלב 20
  {
    "text": "איילת מחשבת את הטמפרטורה הממוצעת במהלך היום. הטמפרטורה הייתה \u202A15°C\u202C למשך 8 שעות, \u202A20°C\u202C למשך 10 שעות, ו-\u202A10°C\u202C למשך 6 שעות.",
    "questions": [
      {
        "question": "מהי הטמפרטורה הממוצעת המשוקללת ליום?",
        "options": ["\u202A15.83°C\u202C", "\u202A16°C\u202C", "\u202A14°C\u202C", "\u202A15°C\u202C", "\u202A30°C\u202C"],
        "answer": "\u202A15.83°C\u202C",
        "explanation": "ממוצע משוקלל = \u202A(8*15 + 10*20 + 6*10) / 24 ≈ 15.83°C\u202C"
      },
      {
        "question": "איזו תקופת טמפרטורה משפיעה הכי הרבה על הממוצע?",
        "options": [
          "\u202A20°C\u202C, כי היא נמשכה הכי הרבה זמן",
          "\u202A15°C\u202C, כי היא באמצע",
          "\u202A10°C\u202C, כי היא הכי נמוכה",
          "כל התקופות באופן שווה",
          "זו שבה הציפורים שרות"
        ],
        "answer": "\u202A20°C\u202C, כי היא נמשכה הכי הרבה זמן",
        "explanation": "תקופת \u202A20°C\u202C נמשכה 10 שעות, הזמן הארוך ביותר"
      },
      {
        "question": "אם איילת רוצה טמפרטורה ממוצעת של \u202A17°C\u202C, מה צריכה להיות הטמפרטורה במהלך תקופת 6 השעות?",
        "options": ["\u202A25°C\u202C", "\u202A30°C\u202C", "\u202A20°C\u202C", "\u202A22°C\u202C", "\u202A50°C\u202C"],
        "answer": "\u202A25°C\u202C",
        "explanation": "פתרון: \u202A(8*15 + 10*20 + 6*x) / 24 = 17 => x = 25°C\u202C"
      },
      {
        "question": "ממוצעים משוקללים בחישובי טמפרטורה עוזרים למטאורולוגים ל:",
        "options": [
          "להבין תנאים יומיים כוללים",
          "לחזות מזג אוויר מדויק",
          "לשלוט במזג האוויר",
          "לקבוע מהירות רוח",
          "למצוא מטריות אבודות"
        ],
        "answer": "להבין תנאים יומיים כוללים",
        "explanation": "הם מספקים ממוצע המשקף את הטמפרטורות המשתנות לאורך זמן"
      },
      {
        "question": "אם הטמפרטורה הייתה קבועה על \u202A15°C\u202C כל היום, מה הייתה הטמפרטורה הממוצעת?",
        "options": ["\u202A15°C\u202C", "\u202A16°C\u202C", "\u202A17°C\u202C", "\u202A14°C\u202C", "\u202A0°C\u202C"],
        "answer": "\u202A15°C\u202C",
        "explanation": "טמפרטורה קבועה תביא לאותה טמפרטורה ממוצעת"
      }
    ]
  }
//-------------------------------------------------------------------------------------------------------------------	
   ]
}


        ];

        const stageCount = quizData[0].stages.length; // This is the correct way to get the number of stages

		const stateContents = {
			'תרגול': `<div id="stage-number" class="stage-number">שלב 1 מתוך ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">ניסיונות: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">בדיקת תשובות</button>`
			,'לימוד הנושא 🗝️': 
`
<div class="subject-overview-content subject-overview-content_heb">
    <h1>מבוא לממוצעים משוקללים</h1>
    <p>ממוצעים משוקללים הם סוג של ממוצע שבו כל ערך בקבוצה מוכפל במשקל שנקבע מראש לפני החישוב הסופי. שיטה זו מעניקה רמות חשיבות שונות לכל ערך, מה שהופך אותה לכלי שימושי במגוון תרחישים מחיי היומיום כמו חישוב ציונים, הערכות פיננסיות וניתוחים סטטיסטיים.</p>
    <hr>
    <h2 class="highlight_heb">תוכן העניינים</h2>
    <ol>
        <li><a href="#what-are-weighted-averages" class="highlight_heb">מהם ממוצעים משוקללים?</a></li>
        <li><a href="#why-use-weighted-averages" class="highlight_heb">למה להשתמש בממוצעים משוקללים?</a></li>
        <li><a href="#how-to-calculate-weighted-averages" class="highlight_heb">כיצד לחשב ממוצעים משוקללים</a>
            <ul>
                <li><a href="#step-by-step-calculation" class="highlight_heb">חישוב שלב אחר שלב</a></li>
                <li><a href="#example-calculation" class="highlight_heb">דוגמת חישוב</a></li>
            </ul>
        </li>
        <li><a href="#applications-of-weighted-averages" class="highlight_heb">יישומים של ממוצעים משוקללים</a></li>
        <li><a href="#conclusion" class="highlight_heb">סיכום</a></li>
    </ol>
    <hr>
    <h2 id="what-are-weighted-averages" class="highlight_heb">מהם ממוצעים משוקללים?</h2>
    <p>ממוצע משוקלל לוקח בחשבון את החשיבות היחסית או התדירות של כל ערך במערך נתונים. בשונה מממוצע פשוט, שבו כל הערכים מטופלים באופן שווה, ממוצע משוקלל מקצה משקל לכל ערך, המשקף את משמעותו.</p>
    <h3 class="highlight_heb">דוגמת חישוב</h3>
    <p>הבה נחשב את הממוצע המשוקלל של ציוני תלמיד בשלושה מקצועות:</p>
    <ul>
        <li>מתמטיקה: ציון = 85, משקל = 30%</li>
        <li>מדעים: ציון = 90, משקל = 40%</li>
        <li>אנגלית: ציון = 80, משקל = 30%</li>
    </ul>
    <p><strong>שלבי החישוב:</strong></p>
    <h4 class="highlight_heb">שלב 1: הכפלת כל ציון במשקל שלו</h4>
    <ul>
        <li>מתמטיקה: 25.5 = 0.30 × 85</li>
        <li>מדעים: 36 = 0.40 × 90</li>
        <li>אנגלית: 24 = 0.30 × 80</li>
    </ul>
    <h4 class="highlight_heb">שלב 2: סכום הציונים המשוקללים</h4>
    <ul>
        <li>85.5 = 24 + 36 + 25.5</li>
    </ul>
    <h2 id="applications-of-weighted-averages" class="highlight_heb">יישומים של ממוצעים משוקללים</h2>
    <ul>
        <li><strong>חינוך:</strong> חישוב ציונים סופיים על ידי הקצאת משקלים שונים למטלות</li>
        <li><strong>פיננסים:</strong> קביעת העלות הממוצעת של השקעות</li>
        <li><strong>סטטיסטיקה:</strong> חישוב ממוצעים בסקרים</li>
        <li><strong>ספורט:</strong> דירוג קבוצות או שחקנים</li>
    </ul>
    <hr>
    <h2 id="conclusion" class="highlight_heb">סיכום</h2>
    <p><strong>זכרו:</strong> תמיד ודאו שהמשקלים משקפים במדויק את חשיבות כל ערך כדי להשיג ממוצע משוקלל משמעותי.</p>
</div>
`
		};

		function showExplanations() {
			// Hide the modal
			document.getElementById('quizModal').style.display = 'none';
			
			// Show all explanation panels
			document.querySelectorAll('.explanation-panel').forEach(exp => {
				exp.style.display = 'block';
			});
		}

        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'תרגול') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function isTextEmpty(text) {
    return !text || text.trim() === "";
}

function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';

    // Only add stage text if it's not empty
    const stageText = quizData[0].stages[currentStage].text;
    if (!isTextEmpty(stageText)) {
        const stageTextElement = document.createElement("div");
        stageTextElement.className = "stage-text";
        stageTextElement.textContent = stageText;
        quizContainer.appendChild(stageTextElement);
    }

    // Render questions
    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        // Create main question container
        const questionContainer = document.createElement("div");
        questionContainer.className = "question";
        questionContainer.style.padding = "0px"; 
        
        // Create question line
        const questionLine = document.createElement("div");
        questionLine.className = "question-one-line";

        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${questionData.question}`;

        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-rtl"; 
        resultDiv.id = `result${index}`;

        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;

		// Apply LTR direction directly
		select.style.direction = "ltr";

        // Add default option
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "בחירה"; 

        select.appendChild(defaultOption);

        // Add shuffled options
        const shuffledOptions = shuffleArray([...questionData.options]);
        shuffledOptions.forEach(option => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });

        // Assemble question line
        questionLine.appendChild(label);
        questionLine.appendChild(resultDiv);
        questionLine.appendChild(select);

        // Create explanation panel
        const explanationPanel = document.createElement("div");
        explanationPanel.className = "explanation-panel";
        explanationPanel.style.display = "none";

        const explanationText = document.createElement("div");
        explanationText.className = "explanation-panel-text";
        explanationText.textContent = questionData.explanation || ''; 

        explanationPanel.appendChild(explanationText);

        // Assemble full question container
        questionContainer.appendChild(questionLine);
        questionContainer.appendChild(explanationPanel);

        quizContainer.appendChild(questionContainer);
    });

    updateStageNumber();
}


function checkStage() {
    attempts++;
    document.getElementById("attempts").textContent = `ניסיונות: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[0].stages[currentStage].questions.length;

    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        // Check if the selected answer is correct or incorrect
        if (selectedAnswer === questionData.answer) {
            resultElement.textContent = "נכון!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "לא נכון.";
            resultElement.style.color = "red";
        }

        // Reveal explanations if the user reaches 10 attempts
        if (attempts >= 5) {
            // Reveal the explanation panel
            const explanationElement = selectElement.closest('.question').querySelector('.explanation-panel');
            explanationElement.style.display = "block"; // Make the explanation panel visible

            // Modify the explanation text to include the correct answer
            const explanationText = explanationElement.querySelector('.explanation-panel-text');
            explanationText.innerHTML = `${questionData.explanation}`;
        }
    });

    if (correctCount === totalQuestions) {
        console.log(`שלב ${currentStage + 1}: ${correctCount} נכונות מתוך ${totalQuestions}`);
        addAnimalsToFarm(totalQuestions);

        if (currentStage < quizData[0].stages.length - 1) {
            singleStageConfetti();
            showEncouragingPopup(correctCount, totalQuestions, true);
            // Show both buttons in modal to allow moving to the next stage
            document.getElementById('modalNextButton').style.display = 'inline-block';
            document.getElementById('modalExplanationsButton').style.display = 'inline-block';
        } else {
            // Last stage completion
            currentStage++;
            updateProgressBar();
            allStagesConfetti();
            showModal("כל הכבוד! השלמת את כל השלבים!");
        }
    } else {
        // Show the encouraging popup if the stage is not complete
        showEncouragingPopup(correctCount, totalQuestions, false);

        if (attempts >= 5) {
            // If the user has reached 5 attempts, notify them about revealing the answers
            const modalMessage = document.getElementById('modalMessage');
            modalMessage.textContent = "הגעת למספר הניסיונות המקסימלי. התשובות הנכונות נחשפו.";
            showModal(modalMessage.textContent);
        }
    }

    scrollToTop();
}

		
        function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
            const incorrectCount = totalQuestions - correctCount;
            let message = `קיבלת ${correctCount} נכונות ו-${incorrectCount} שגויות.`;
            
            if (correctCount === totalQuestions) {
                message += " ציון מושלם!";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
                message += " עבודה מצוינת! רואים שהנושא מתחיל להיות מובן!";
            } else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
                message += " מאמץ טוב! נמשיך לתרגל כי השיפור קרוב!";
            } else {
                message += " לא לוותר! כל נסיון עוזר לך ללמוד. ננסה שוב!";
            }

            if (isStageComplete) {
                message += "\n\n השלב הזה הסתיים, עוברים לשלב הבא.";
            }

            showModal(message);
        }

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `נסיונות: ${attempts}`;
			updateStageNumber();
		}

		function updateProgressBar() {
			const progressBar = document.getElementById("progress-bar");
			const completedStages = currentStage; // Remove the +1 here
			const progress = (completedStages / stageCount) * 100;
			const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
			progressBar.style.width = `${roundedProgress}%`;
			progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
			console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
		}

        function updateStageNumber() {
            const stageElement = document.getElementById("stage-number");
            stageElement.textContent = `שלב ${currentStage + 1} מתוך ${stageCount}`;
        }

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

		function showModal(message) {
			const modal = document.getElementById("quizModal");
			const modalMessage = document.getElementById("modalMessage");
			const modalClose = document.getElementsByClassName("modal-quiz-close")[0];
			const nextButton = document.getElementById("modalNextButton");
			const explanationsButton = document.getElementById("modalExplanationsButton");

			// Set message
			modalMessage.textContent = message;
			
			// Show modal
			modal.style.display = "block";

			// By default, hide both buttons
			nextButton.style.display = "none";
			explanationsButton.style.display = "none";

			// Close handlers
			modalClose.onclick = function() {
				modal.style.display = "none";
			}

			window.onclick = function(event) {
				if (event.target == modal) {
					modal.style.display = "none";
				}
			}
		}

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
			
			document.getElementById('modalNextButton').addEventListener('click', () => {
				document.getElementById('quizModal').style.display = 'none';
				currentStage++;
				attempts = 0;
				renderQuiz();
				document.getElementById("attempts").textContent = `ניסיונות: ${attempts}`;
				updateProgressBar();
			});

			document.getElementById('modalExplanationsButton').addEventListener('click', showExplanations);
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>