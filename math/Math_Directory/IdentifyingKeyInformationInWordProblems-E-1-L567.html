<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-eng.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
    <title>✅ EZ42 LIVE - It's EZ</title>
	<style>
  
	</style>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
				<div class="logo-container">
					<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
						<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
					</a>
				</div>
			<h2>Instructions & Rules</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
                <li>Read the text and questions carefully.</li>
                <li>Select the best answer.</li>
                <li>Click "Check Answers" when you're ready to see how you did!</li>
                <li>You can check your answers multiple times to improve your score.</li>
                <li>Correct answers are revealed after 10 attempts.</li>
                <li>You must answer all questions correctly to proceed to the next stage.</li>
				<li>Have fun!</li>
			</ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->	
                <h1>Identifying key information in word problems 📘</h1>
                
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>
                <div id="tabContent"></div>
            </div>
			
		<!--  Side Panel 2  -->
			<div id="sidePanel2" class="side-panel">
				<h2>Animal Farm</h2>
				<p>Watch your farm grow as you progress! Each completed stage adds new animal friends to your collection.</p>
				<ul id="animalFarm" class="emoji-list">
				</ul>
			</div>
        </div>
    </div>
    <div id="copyright-container"></div>
 
    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">OK</button>
        </div>
    </div>
	<button id="scrollToTopBtn" title="Go to top">↑</button>
    <script>
        let isQuizExpanded = false;
        let allowQuizExpansion = true;

        let attempts = 0;
        let currentStage = 0;

        const manuallySetDefaultTab = 0;

																		//  PH3 - Quiz Data 
        const quizData = [ 												   	
				{
				  "stages": [
//-------------------------------------------------------------------------------------------------------------------				  

    // Stage 1 - Basic Addition and Subtraction Word Problems
    {
      "text": "Tom has 28 marbles. He gives 5 marbles to his friend and then gets 12 new marbles from his sister.",
      "questions": [
        // Question 1.1
        {
          "question": "What operation should be done first?",
          "options": ["Subtract 5 marbles", "Add 12 marbles", "Count all marbles", "Multiply marbles", "Paint the marbles"],
          "answer": "Subtract 5 marbles"
        },
        // Question 1.2
        {
          "question": "What is the important starting number?",
          "options": ["28 marbles", "5 marbles", "12 marbles", "0 marbles", "1 million marbles"],
          "answer": "28 marbles"
        },
        // Question 1.3
        {
          "question": "What is the final operation needed?",
          "options": ["Add 12 marbles", "Subtract 5 marbles", "Divide marbles", "Count by twos", "Juggle marbles"],
          "answer": "Add 12 marbles"
        },
        // Question 1.4
        {
          "question": "What information is NOT needed to solve this problem?",
          "options": ["Color of marbles", "Starting amount", "Marbles given away", "Marbles received", "Day of week"],
          "answer": "Color of marbles"
        },
        // Question 1.5
        {
          "question": "What math skills are needed?",
          "options": ["Addition and subtraction", "Multiplication", "Division", "Fractions", "Marble magic"],
          "answer": "Addition and subtraction"
        }
      ]
    },
    // Stage 2 - Simple Multiplication Word Problems
    {
      "text": "A class needs 6 pencils for each student. There are 15 students in the class.",
      "questions": [
        // Question 2.1
        {
          "question": "What numbers are important?",
          "options": ["6 and 15", "Just 6", "Just 15", "100", "Infinity"],
          "answer": "6 and 15"
        },
        // Question 2.2
        {
          "question": "What operation is needed?",
          "options": ["Multiplication", "Addition", "Subtraction", "Division", "Dancing"],
          "answer": "Multiplication"
        },
        // Question 2.3
        {
          "question": "What does the 6 represent?",
          "options": ["Pencils per student", "Total students", "Total pencils", "Class hours", "Magic number"],
          "answer": "Pencils per student"
        },
        // Question 2.4
        {
          "question": "What information is NOT needed?",
          "options": ["Pencil color", "Number of students", "Pencils per student", "None", "Student names"],
          "answer": "Pencil color"
        },
        // Question 2.5
        {
          "question": "How can you check your answer?",
          "options": ["Count by 6s", "Count by 1s", "Guess", "Ask friend", "Use crystal ball"],
          "answer": "Count by 6s"
        }
      ]
    },
    // Stage 3 - Basic Division Word Problems
    {
      "text": "Sarah has 24 cookies to share equally among 6 friends.",
      "questions": [
        // Question 3.1
        {
          "question": "What operation is needed?",
          "options": ["Division", "Multiplication", "Addition", "Subtraction", "Cookie tasting"],
          "answer": "Division"
        },
        // Question 3.2
        {
          "question": "What are the important numbers?",
          "options": ["24 and 6", "Just 24", "Just 6", "100", "One million"],
          "answer": "24 and 6"
        },
        // Question 3.3
        {
          "question": "What does equally mean?",
          "options": ["Same amount each", "Random amounts", "Most to one", "None", "Whatever's left"],
          "answer": "Same amount each"
        },
        // Question 3.4
        {
          "question": "What's another way to solve this?",
          "options": ["Count out groups of 6", "Just guess", "Give away all", "Eat them all", "Ask a wizard"],
          "answer": "Count out groups of 6"
        },
        // Question 3.5
        {
          "question": "What information is NOT important?",
          "options": ["Type of cookies", "Total cookies", "Number of friends", "None", "Cookie temperature"],
          "answer": "Type of cookies"
        }
      ]
    },
   // Stage 4 - Basic Fractions
    {
      "text": "A pizza is cut into 8 equal slices. John eats 3 slices, and Lisa eats 2 slices.",
      "questions": [
        // Question 4.1
        {
          "question": "What fraction of the pizza did John eat?",
          "options": ["3/8", "2/8", "3/2", "8/3", "All of it"],
          "answer": "3/8"
        },
        // Question 4.2
        {
          "question": "What fraction of pizza did they eat together?",
          "options": ["5/8", "3/2", "2/3", "8/5", "Zero slices"],
          "answer": "5/8"
        },
        // Question 4.3
        {
          "question": "What fraction is left?",
          "options": ["3/8", "5/8", "8/8", "0/8", "Infinite pizza"],
          "answer": "3/8"
        },
        // Question 4.4
        {
          "question": "What operation was used to find total eaten?",
          "options": ["Addition", "Subtraction", "Multiplication", "Division", "Pizza magic"],
          "answer": "Addition"
        },
        // Question 4.5
        {
          "question": "What information is NOT needed?",
          "options": ["Pizza toppings", "Total slices", "John's slices", "Lisa's slices", "Size of pizza"],
          "answer": "Pizza toppings"
        }
      ]
    },
    // Stage 5 - Money and Decimals
    {
      "text": "Sam has $5.25. He spends $2.75 on lunch and gets $1.50 for helping with chores.",
      "questions": [
        // Question 5.1
        {
          "question": "What operation should be done first?",
          "options": ["Subtract $2.75", "Add $1.50", "Count money", "Multiply", "Buy candy"],
          "answer": "Subtract $2.75"
        },
        // Question 5.2
        {
          "question": "How many decimal places should the answer have?",
          "options": ["2", "1", "3", "0", "100"],
          "answer": "2"
        },
        // Question 5.3
        {
          "question": "What does the decimal point show?",
          "options": ["Dollars and cents", "Just dollars", "Just cents", "Time", "Temperature"],
          "answer": "Dollars and cents"
        },
        // Question 5.4
        {
          "question": "What's the last step?",
          "options": ["Add $1.50", "Subtract $2.75", "Count coins", "Make change", "Go shopping"],
          "answer": "Add $1.50"
        },
        // Question 5.5
        {
          "question": "What makes this a decimal problem?",
          "options": ["Money uses cents", "Whole numbers", "Fractions", "Time", "Weather"],
          "answer": "Money uses cents"
        }
      ]
    },
    // Stage 6 - Perimeter
    {
      "text": "A rectangular garden is 8 feet long and 6 feet wide. Tom wants to put a fence around it.",
      "questions": [
        // Question 6.1
        {
          "question": "What needs to be found?",
          "options": ["Distance around garden", "Area of garden", "Middle of garden", "Diagonal", "Garden's mood"],
          "answer": "Distance around garden"
        },
        // Question 6.2
        {
          "question": "What numbers are needed?",
          "options": ["Length and width", "Just length", "Just width", "Neither", "Garden's age"],
          "answer": "Length and width"
        },
        // Question 6.3
        {
          "question": "What operation is used?",
          "options": ["Addition", "Multiplication", "Division", "Subtraction", "Garden magic"],
          "answer": "Addition"
        },
        // Question 6.4
        {
          "question": "How many sides need to be added?",
          "options": ["4", "2", "3", "1", "100"],
          "answer": "4"
        },
        // Question 6.5
        {
          "question": "What information is NOT needed?",
          "options": ["Type of plants", "Length", "Width", "None", "Weather"],
          "answer": "Type of plants"
        }
      ]
    },
    // Stage 7 - Area
    {
      "text": "A classroom floor is 12 meters long and 10 meters wide. The teacher wants to put new tiles on the floor.",
      "questions": [
        // Question 7.1
        {
          "question": "What needs to be calculated?",
          "options": ["Area", "Perimeter", "Length", "Width", "Teacher's age"],
          "answer": "Area"
        },
        // Question 7.2
        {
          "question": "What operation is needed?",
          "options": ["Multiplication", "Addition", "Subtraction", "Division", "Dancing"],
          "answer": "Multiplication"
        },
        // Question 7.3
        {
          "question": "What numbers are important?",
          "options": ["12 and 10", "Just 12", "Just 10", "Neither", "One million"],
          "answer": "12 and 10"
        },
        // Question 7.4
        {
          "question": "What are the units of the answer?",
          "options": ["Square meters", "Meters", "Centimeters", "Kilometers", "Light years"],
          "answer": "Square meters"
        },
        // Question 7.5
        {
          "question": "What information is NOT needed?",
          "options": ["Tile color", "Room length", "Room width", "None", "Room temperature"],
          "answer": "Tile color"
        }
      ]
    },
    // Stage 8 - Averages
    {
      "text": "In a math test, Emma scored: 85, 90, 95, 80, and 90 points.",
      "questions": [
        // Question 8.1
        {
          "question": "What is needed to find the average?",
          "options": ["Sum and count of scores", "Highest score", "Lowest score", "Middle score", "Lucky number"],
          "answer": "Sum and count of scores"
        },
        // Question 8.2
        {
          "question": "How many scores are there?",
          "options": ["5", "4", "3", "6", "100"],
          "answer": "5"
        },
        // Question 8.3
        {
          "question": "What operation is done first?",
          "options": ["Addition", "Division", "Multiplication", "Subtraction", "Score dancing"],
          "answer": "Addition"
        },
        // Question 8.4
        {
          "question": "What is done after adding?",
          "options": ["Divide by number of scores", "Multiply", "Add more", "Subtract", "Take a nap"],
          "answer": "Divide by number of scores"
        },
        // Question 8.5
        {
          "question": "What information is NOT needed?",
          "options": ["Test date", "All scores", "Number of scores", "None", "Test subject"],
          "answer": "Test date"
        }
      ]
    },
    // Stage 9 - Simple Percentages
    {
      "text": "In a class of 40 students, 20 students like pizza for lunch. What percentage is this?",
      "questions": [
        // Question 9.1
        {
          "question": "What operation is needed first?",
          "options": ["Division", "Multiplication", "Addition", "Subtraction", "Pizza tasting"],
          "answer": "Division"
        },
        // Question 9.2
        {
          "question": "What numbers are used?",
          "options": ["20 and 40", "Just 20", "Just 40", "Neither", "One million"],
          "answer": "20 and 40"
        },
        // Question 9.3
        {
          "question": "What makes it a percentage?",
          "options": ["Multiply by 100", "Divide by 100", "Add 100", "Subtract 100", "Eat 100 pizzas"],
          "answer": "Multiply by 100"
        },
        // Question 9.4
        {
          "question": "What does percentage mean?",
          "options": ["Parts per hundred", "Parts per ten", "Just parts", "Total parts", "Pizza parts"],
          "answer": "Parts per hundred"
        },
        // Question 9.5
        {
          "question": "What information is NOT needed?",
          "options": ["Type of pizza", "Total students", "Students liking pizza", "None", "Lunch time"],
          "answer": "Type of pizza"
        }
      ]
    },
    // Stage 10 - Reading Bar Graphs
    {
      "text": "A bar graph shows ice cream sales: Monday - 25, Tuesday - 30, Wednesday - 20, Thursday - 35, Friday - 40",
      "questions": [
        // Question 10.1
        {
          "question": "Which day had highest sales?",
          "options": ["Friday", "Thursday", "Wednesday", "Monday", "Next year"],
          "answer": "Friday"
        },
        // Question 10.2
        {
          "question": "What's the difference between highest and lowest?",
          "options": ["20", "15", "10", "5", "One million"],
          "answer": "20"
        },
        // Question 10.3
        {
          "question": "What operation finds the total?",
          "options": ["Addition", "Subtraction", "Multiplication", "Division", "Ice cream eating"],
          "answer": "Addition"
        },
        // Question 10.4
        {
          "question": "How many days are shown?",
          "options": ["5", "4", "6", "3", "365"],
          "answer": "5"
        },
        // Question 10.5
        {
          "question": "What information is NOT needed?",
          "options": ["Ice cream flavors", "Daily sales", "Days", "None", "Store color"],
          "answer": "Ice cream flavors"
        }
      ]
    },
    // Stage 11 - Simple Proportions
    {
      "text": "A recipe needs 2 cups of flour to make 12 cookies. How much flour is needed to make 24 cookies?",
      "questions": [
        // Question 11.1
        {
          "question": "What's the relationship between cookies and flour?",
          "options": ["Double cookies needs double flour", "Same flour", "Half flour", "Random amount", "Eat flour"],
          "answer": "Double cookies needs double flour"
        },
        // Question 11.2
        {
          "question": "What operation is needed?",
          "options": ["Multiplication", "Division", "Addition", "Subtraction", "Cookie magic"],
          "answer": "Multiplication"
        },
        // Question 11.3
        {
          "question": "How many times more cookies are wanted?",
          "options": ["2 times", "3 times", "4 times", "5 times", "Million times"],
          "answer": "2 times"
        },
        // Question 11.4
        {
          "question": "What numbers are important?",
          "options": ["2, 12, and 24", "Just 2", "Just 12", "Just 24", "Cookie monster's age"],
          "answer": "2, 12, and 24"
        },
        // Question 11.5
        {
          "question": "What information is NOT needed?",
          "options": ["Baking time", "Flour amount", "Cookie numbers", "Recipe ratio", "Cookie temperature"],
          "answer": "Baking time"
        }
      ]
    },
    // Stage 12 - Basic Measurement
    {
      "text": "A pencil is 15 centimeters long. How many millimeters is this? (1 centimeter = 10 millimeters)",
      "questions": [
        // Question 12.1
        {
          "question": "What operation converts centimeters to millimeters?",
          "options": ["Multiply by 10", "Divide by 10", "Add 10", "Subtract 10", "Draw with pencil"],
          "answer": "Multiply by 10"
        },
        // Question 12.2
        {
          "question": "What numbers are needed?",
          "options": ["15 and 10", "Just 15", "Just 10", "Neither", "Infinity"],
          "answer": "15 and 10"
        },
        // Question 12.3
        {
          "question": "Why multiply by 10?",
          "options": ["1 cm = 10 mm", "1 cm = 100 mm", "1 cm = 1 mm", "Random reason", "Pencil said so"],
          "answer": "1 cm = 10 mm"
        },
        // Question 12.4
        {
          "question": "What units will the answer have?",
          "options": ["Millimeters", "Centimeters", "Meters", "Kilometers", "Light years"],
          "answer": "Millimeters"
        },
        // Question 12.5
        {
          "question": "What information is NOT needed?",
          "options": ["Pencil color", "Length", "Conversion rate", "None", "Weather"],
          "answer": "Pencil color"
        }
      ]
    },
    // Stage 13 - Simple Time Problems
    {
      "text": "A movie starts at 3:30 PM and runs for 2 hours and 15 minutes.",
      "questions": [
        // Question 13.1
        {
          "question": "What needs to be found?",
          "options": ["End time", "Start time", "Movie length", "Middle time", "Popcorn time"],
          "answer": "End time"
        },
        // Question 13.2
        {
          "question": "How should hours be added?",
          "options": ["Add 2 to 3", "Add 15 to 3", "Add 2:15 to 3", "Random guess", "Ask clock"],
          "answer": "Add 2 to 3"
        },
        // Question 13.3
        {
          "question": "What happens with the 15 minutes?",
          "options": ["Add to 30", "Ignore it", "Add to hours", "Subtract it", "Time travel"],
          "answer": "Add to 30"
        },
        // Question 13.4
        {
          "question": "What time format is used?",
          "options": ["PM time", "24-hour", "Minutes only", "Seconds", "Star time"],
          "answer": "PM time"
        },
        // Question 13.5
        {
          "question": "What information is NOT needed?",
          "options": ["Movie title", "Start time", "Run time", "None", "Theater name"],
          "answer": "Movie title"
        }
      ]
    },
    // Stage 14 - Reading Line Graphs
    {
      "text": "A line graph shows temperature each hour: 9AM-20°, 10AM-22°, 11AM-25°, 12PM-27°, 1PM-26°",
      "questions": [
        // Question 14.1
        {
          "question": "When was it warmest?",
          "options": ["12PM", "9AM", "10AM", "11AM", "Next week"],
          "answer": "12PM"
        },
        // Question 14.2
        {
          "question": "How much did temperature increase from 9AM to 12PM?",
          "options": ["7 degrees", "5 degrees", "3 degrees", "2 degrees", "1000 degrees"],
          "answer": "7 degrees"
        },
        // Question 14.3
        {
          "question": "What happened after 12PM?",
          "options": ["Temperature decreased", "Stayed same", "Increased", "Disappeared", "Went to lunch"],
          "answer": "Temperature decreased"
        },
        // Question 14.4
        {
          "question": "How many hours are shown?",
          "options": ["5", "4", "6", "3", "100"],
          "answer": "5"
        },
        // Question 14.5
        {
          "question": "What information is NOT needed?",
          "options": ["Weather conditions", "Times", "Temperatures", "None", "Sun's birthday"],
          "answer": "Weather conditions"
        }
      ]
    },
    // Stage 15 - Simple Equations
    {
      "text": "A number plus 5 equals 12. What is the number?",
      "questions": [
        // Question 15.1
        {
          "question": "What operation is needed?",
          "options": ["Subtraction", "Addition", "Multiplication", "Division", "Mind reading"],
          "answer": "Subtraction"
        },
        // Question 15.2
        {
          "question": "What numbers are used?",
          "options": ["12 and 5", "Just 12", "Just 5", "Neither", "Pi"],
          "answer": "12 and 5"
        },
        // Question 15.3
        {
          "question": "Why subtract?",
          "options": ["To undo adding 5", "To add more", "Random reason", "No reason", "Number magic"],
          "answer": "To undo adding 5"
        },
        // Question 15.4
        {
          "question": "What are we finding?",
          "options": ["Missing number", "Sum", "Product", "Nothing", "Universe"],
          "answer": "Missing number"
        },
        // Question 15.5
        {
          "question": "How can we check our answer?",
          "options": ["Add 5 to it", "Subtract 5", "Multiply by 5", "Guess again", "Ask friends"],
          "answer": "Add 5 to it"
        }
      ]
    },
    // Stage 16 - Mean, Median, Mode
    {
      "text": "Nine students scored the following on a quiz: 85, 90, 85, 95, 85, 80, 90, 75, 80",
      "questions": [
        // Question 16.1
        {
          "question": "What is the mode (most common score)?",
          "options": ["85", "90", "80", "95", "One million"],
          "answer": "85"
        },
        // Question 16.2
        {
          "question": "To find median, what's done first?",
          "options": ["Put in order", "Add all", "Find mode", "Random pick", "Take nap"],
          "answer": "Put in order"
        },
        // Question 16.3
        {
          "question": "How many scores are there?",
          "options": ["9", "8", "7", "10", "Infinity"],
          "answer": "9"
        },
        // Question 16.4
        {
          "question": "To find mean, what's first?",
          "options": ["Add all scores", "Find middle", "Count scores", "Guess", "Score dance"],
          "answer": "Add all scores"
        },
        // Question 16.5
        {
          "question": "What information is NOT needed?",
          "options": ["Student names", "All scores", "Number of scores", "None", "Quiz date"],
          "answer": "Student names"
        }
      ]
    },
    // Stage 17 - Simple Probability
    {
      "text": "A bag has 3 red marbles, 4 blue marbles, and 5 green marbles.",
      "questions": [
        // Question 17.1
        {
          "question": "How many marbles in total?",
          "options": ["12", "10", "11", "13", "Millions"],
          "answer": "12"
        },
        // Question 17.2
        {
          "question": "What fraction is green?",
          "options": ["5/12", "4/12", "3/12", "1/2", "All of them"],
          "answer": "5/12"
        },
        // Question 17.3
        {
          "question": "Which color is least likely?",
          "options": ["Red", "Blue", "Green", "All same", "Rainbow"],
          "answer": "Red"
        },
        // Question 17.4
        {
          "question": "What's needed for probability?",
          "options": ["Part and total", "Just part", "Just total", "Nothing", "Crystal ball"],
          "answer": "Part and total"
        },
        // Question 17.5
        {
          "question": "What information is NOT needed?",
          "options": ["Size of marbles", "Number of each color", "Total marbles", "None", "Marble age"],
          "answer": "Size of marbles"
        }
      ]
    },
    // Stage 18 - Simple Ratios
    {
      "text": "In a box of crayons, there are 6 red crayons for every 2 blue crayons.",
      "questions": [
        // Question 18.1
        {
          "question": "What is the ratio of red to blue?",
          "options": ["3 to 1", "6 to 2", "2 to 6", "1 to 3", "Million to one"],
          "answer": "3 to 1"
        },
        // Question 18.2
        {
          "question": "How is this ratio found?",
          "options": ["Divide both by 2", "Add both", "Multiply both", "Random guess", "Ask crayons"],
          "answer": "Divide both by 2"
        },
        // Question 18.3
        {
          "question": "If you have 9 red crayons, how many blue?",
          "options": ["3", "6", "2", "9", "All of them"],
          "answer": "3"
        },
        // Question 18.4
        {
          "question": "What operation compares the numbers?",
          "options": ["Division", "Addition", "Subtraction", "Multiplication", "Coloring"],
          "answer": "Division"
        },
        // Question 18.5
        {
          "question": "What information is NOT needed?",
          "options": ["Crayon length", "Number of red", "Number of blue", "None", "Box size"],
          "answer": "Crayon length"
        }
      ]
    },
    // Stage 19 - Circle Graphs (Pie Charts)
    {
      "text": "A pie chart shows how 100 students get to school: 50 by bus, 30 by car, 15 walk, 5 bike.",
      "questions": [
        // Question 19.1
        {
          "question": "What fraction take the bus?",
          "options": ["50/100", "30/100", "15/100", "5/100", "All/None"],
          "answer": "50/100"
        },
        // Question 19.2
        {
          "question": "What percent walk?",
          "options": ["15%", "50%", "30%", "5%", "1000%"],
          "answer": "15%"
        },
        // Question 19.3
        {
          "question": "How many don't take car?",
          "options": ["70", "30", "50", "20", "Everyone"],
          "answer": "70"
        },
        // Question 19.4
        {
          "question": "What makes this a pie chart?",
          "options": ["Shows parts of whole", "Shows time", "Shows money", "Shows weather", "Shows pie recipe"],
          "answer": "Shows parts of whole"
        },
        // Question 19.5
        {
          "question": "What information is NOT needed?",
          "options": ["Student names", "Numbers for each way", "Total students", "None", "School color"],
          "answer": "Student names"
        }
      ]
    },
    // Stage 20 - Simple Volume
    {
      "text": "A box is 4 inches long, 3 inches wide, and 5 inches tall.",
      "questions": [
        // Question 20.1
        {
          "question": "What measurements are needed?",
          "options": ["Length, width, height", "Just length", "Just width", "Just height", "Box weight"],
          "answer": "Length, width, height"
        },
        // Question 20.2
        {
          "question": "What operation finds volume?",
          "options": ["Multiply all three", "Add all", "Subtract all", "Divide all", "Box magic"],
          "answer": "Multiply all three"
        },
        // Question 20.3
        {
          "question": "What units will answer have?",
          "options": ["Cubic inches", "Inches", "Square inches", "Feet", "Light years"],
          "answer": "Cubic inches"
        },
        // Question 20.4
        {
          "question": "What numbers are used?",
          "options": ["4, 3, and 5", "Just 4", "Just 3", "Just 5", "Pi"],
          "answer": "4, 3, and 5"
        },
        // Question 20.5
        {
          "question": "What information is NOT needed?",
          "options": ["Box color", "Length", "Width", "Height", "Time"],
          "answer": "Box color"
        }
      ]
    },
    // Stage 21 - Patterns and Sequences
    {
      "text": "Look at this number pattern: 2, 4, 8, 16, ___, 64.",
      "questions": [
        // Question 21.1
        {
          "question": "How is each number changing?",
          "options": ["Multiply by 2", "Add 2", "Subtract 2", "Divide by 2", "Dance with numbers"],
          "answer": "Multiply by 2"
        },
        // Question 21.2
        {
          "question": "What's the missing number?",
          "options": ["32", "30", "34", "40", "One million"],
          "answer": "32"
        },
        // Question 21.3
        {
          "question": "How can you check your answer?",
          "options": ["Multiply it by 2", "Add 2", "Subtract 2", "Guess again", "Ask wizard"],
          "answer": "Multiply it by 2"
        },
        // Question 21.4
        {
          "question": "What's the first term multiplied by?",
          "options": ["16", "8", "4", "2", "Zero"],
          "answer": "16"
        },
        // Question 21.5
        {
          "question": "What type of sequence is this?",
          "options": ["Doubling", "Adding", "Subtracting", "Random", "Magic sequence"],
          "answer": "Doubling"
        }
      ]
    },
    // Stage 22 - Coordinate Plotting
    {
      "text": "Plot these points on a coordinate grid: A(2,3), B(4,1), C(0,5)",
      "questions": [
        // Question 22.1
        {
          "question": "Which number is first in each pair?",
          "options": ["x-coordinate", "y-coordinate", "Random number", "Both", "No number"],
          "answer": "x-coordinate"
        },
        // Question 22.2
        {
          "question": "Which way is x direction?",
          "options": ["Left-right", "Up-down", "Diagonal", "Circles", "To infinity"],
          "answer": "Left-right"
        },
        // Question 22.3
        {
          "question": "Which point is highest?",
          "options": ["C", "A", "B", "All same", "None"],
          "answer": "C"
        },
        // Question 22.4
        {
          "question": "What do the numbers in (2,3) mean?",
          "options": ["2 right, 3 up", "3 right, 2 up", "2 left, 3 down", "Random walk", "Jump around"],
          "answer": "2 right, 3 up"
        },
        // Question 22.5
        {
          "question": "What information is NOT needed?",
          "options": ["Point names", "x-coordinates", "y-coordinates", "None", "Grid color"],
          "answer": "Point names"
        }
      ]
    },
    // Stage 23 - Word Problems with Whole Numbers
    {
      "text": "A store sold 125 notebooks on Monday, 150 on Tuesday, and 100 on Wednesday.",
      "questions": [
        // Question 23.1
        {
          "question": "What operation finds total sales?",
          "options": ["Addition", "Subtraction", "Multiplication", "Division", "Store dance"],
          "answer": "Addition"
        },
        // Question 23.2
        {
          "question": "Which day had lowest sales?",
          "options": ["Wednesday", "Monday", "Tuesday", "All same", "Next year"],
          "answer": "Wednesday"
        },
        // Question 23.3
        {
          "question": "How many more Tuesday than Monday?",
          "options": ["25", "50", "75", "100", "Million"],
          "answer": "25"
        },
        // Question 23.4
        {
          "question": "What operation compares days?",
          "options": ["Subtraction", "Addition", "Multiplication", "Division", "Time travel"],
          "answer": "Subtraction"
        },
        // Question 23.5
        {
          "question": "What information is NOT needed?",
          "options": ["Notebook color", "Daily sales", "Days", "None", "Store name"],
          "answer": "Notebook color"
        }
      ]
    },
    // Stage 24 - Simple Unit Conversion
    {
      "text": "Convert these measurements: 3 feet = ___ inches (1 foot = 12 inches)",
      "questions": [
        // Question 24.1
        {
          "question": "What operation is needed?",
          "options": ["Multiplication", "Addition", "Subtraction", "Division", "Unit magic"],
          "answer": "Multiplication"
        },
        // Question 24.2
        {
          "question": "What numbers are used?",
          "options": ["3 and 12", "Just 3", "Just 12", "Neither", "Infinity"],
          "answer": "3 and 12"
        },
        // Question 24.3
        {
          "question": "Why multiply by 12?",
          "options": ["12 inches in a foot", "Random number", "Lucky guess", "No reason", "Foot dance"],
          "answer": "12 inches in a foot"
        },
        // Question 24.4
        {
          "question": "What units will answer have?",
          "options": ["Inches", "Feet", "Yards", "Miles", "Light years"],
          "answer": "Inches"
        },
        // Question 24.5
        {
          "question": "How can you check answer?",
          "options": ["Divide by 12", "Add 12", "Subtract 12", "Guess again", "Ask ruler"],
          "answer": "Divide by 12"
        }
      ]
    },
    // Stage 25 - Mixed Practice with Fractions
    {
      "text": "A recipe uses 3/4 cup sugar and 1/2 cup flour. How much total cups of both ingredients?",
      "questions": [
        // Question 25.1
        {
          "question": "What operation is needed?",
          "options": ["Addition", "Subtraction", "Multiplication", "Division", "Baking magic"],
          "answer": "Addition"
        },
        // Question 25.2
        {
          "question": "What's needed to add fractions?",
          "options": ["Common denominator", "Just numerators", "Just denominators", "Nothing", "Recipe dance"],
          "answer": "Common denominator"
        },
        // Question 25.3
        {
          "question": "What's 1/2 as an equivalent fraction?",
          "options": ["2/4", "3/4", "1/4", "4/4", "All the flour"],
          "answer": "2/4"
        },
        // Question 25.4
        {
          "question": "Now what's added?",
          "options": ["3/4 + 2/4", "3/4 + 1/2", "1/2 + 1/2", "Random numbers", "Cake recipe"],
          "answer": "3/4 + 2/4"
        },
        // Question 25.5
        {
          "question": "What information is NOT needed?",
          "options": ["Recipe name", "Amount of sugar", "Amount of flour", "None", "Oven temperature"],
          "answer": "Recipe name"
        }
      ]
    },
    // Stage 26 - Data in Tables
    {
      "text": "This table shows school lunch choices: Pizza - 45 students, Sandwich - 30 students, Salad - 15 students, Soup - 10 students",
      "questions": [
        // Question 26.1
        {
          "question": "How many students total?",
          "options": ["100", "90", "80", "70", "One million"],
          "answer": "100"
        },
        // Question 26.2
        {
          "question": "What's the most popular choice?",
          "options": ["Pizza", "Sandwich", "Salad", "Soup", "Ice cream"],
          "answer": "Pizza"
        },
        // Question 26.3
        {
          "question": "How many more chose Pizza than Soup?",
          "options": ["35", "25", "15", "5", "All of them"],
          "answer": "35"
        },
        // Question 26.4
        {
          "question": "What fraction chose Salad?",
          "options": ["15/100", "45/100", "30/100", "10/100", "No fraction"],
          "answer": "15/100"
        },
        // Question 26.5
        {
          "question": "What information is NOT needed?",
          "options": ["Food prices", "Number per choice", "Total students", "None", "Lunch time"],
          "answer": "Food prices"
        }
      ]
    },
    // Stage 27 - More Money Problems
    {
      "text": "Sam has $20. He spends $3.50 on a sandwich, $2.25 on juice, and $1.75 on chips.",
      "questions": [
        // Question 27.1
        {
          "question": "What should be found first?",
          "options": ["Total spent", "Money left", "Just sandwich", "Just juice", "Sam's age"],
          "answer": "Total spent"
        },
        // Question 27.2
        {
          "question": "How much spent in total?",
          "options": ["$7.50", "$5.75", "$4.25", "$3.50", "All money"],
          "answer": "$7.50"
        },
        // Question 27.3
        {
          "question": "How much money is left?",
          "options": ["$12.50", "$13.50", "$11.50", "$10.50", "No money"],
          "answer": "12.50"
        },
        // Question 27.4
        {
          "question": "What operations are needed?",
          "options": ["Addition then subtraction", "Just addition", "Just subtraction", "Division", "Money magic"],
          "answer": "Addition then subtraction"
        },
        // Question 27.5
        {
          "question": "What information is NOT needed?",
          "options": ["Food types", "Starting amount", "Prices", "None", "Store name"],
          "answer": "Food types"
        }
      ]
    },
    // Stage 28 - Reading More Graphs
    {
      "text": "A bar graph shows books read: John - 8, Maria - 12, Tom - 6, Sara - 10, Alex - 9",
      "questions": [
        // Question 28.1
        {
          "question": "Who read most books?",
          "options": ["Maria", "John", "Tom", "Sara", "Book fairy"],
          "answer": "Maria"
        },
        // Question 28.2
        {
          "question": "What's the difference between most and least?",
          "options": ["6", "4", "8", "10", "Million"],
          "answer": "6"
        },
        // Question 28.3
        {
          "question": "How many books total?",
          "options": ["45", "40", "35", "30", "Infinite books"],
          "answer": "45"
        },
        // Question 28.4
        {
          "question": "How many more did Sara read than Tom?",
          "options": ["4", "6", "2", "8", "No books"],
          "answer": "4"
        },
        // Question 28.5
        {
          "question": "What information is NOT needed?",
          "options": ["Book titles", "Names", "Books per person", "Total books", "Reading time"],
          "answer": "Book titles"
        }
      ]
    },
    // Stage 29 - Mixed Operations Review
    {
      "text": "A class collects 24 cans for recycling each week for 3 weeks. They donate half the cans to charity.",
      "questions": [
        // Question 29.1
        {
          "question": "How many cans collected total?",
          "options": ["72", "48", "36", "24", "Million cans"],
          "answer": "72"
        },
        // Question 29.2
        {
          "question": "What operation finds total cans?",
          "options": ["Multiplication", "Addition", "Subtraction", "Division", "Can counting dance"],
          "answer": "Multiplication"
        },
        // Question 29.3
        {
          "question": "How many cans donated?",
          "options": ["36", "24", "48", "12", "All cans"],
          "answer": "36"
        },
        // Question 29.4
        {
          "question": "What operation finds donated amount?",
          "options": ["Division", "Multiplication", "Addition", "Subtraction", "Can magic"],
          "answer": "Division"
        },
        // Question 29.5
        {
          "question": "What information is NOT needed?",
          "options": ["Type of cans", "Weekly amount", "Weeks", "None", "Weather"],
          "answer": "Type of cans"
        }
      ]
    },
    // Stage 30 - Final Mixed Practice
    {
      "text": "A store sells pencils for $0.25 each or $2.00 for a pack of 10. Juan needs 30 pencils.",
      "questions": [
        // Question 30.1
        {
          "question": "What's the cost buying single pencils?",
          "options": ["$7.50", "$6.50", "$5.50", "$4.50", "Free pencils"],
          "answer": "7.50"
        },
        // Question 30.2
        {
          "question": "How many packs of 10 needed?",
          "options": ["3", "2", "4", "5", "Infinite packs"],
          "answer": "3"
        },
        // Question 30.3
        {
          "question": "What's the cost using packs?",
          "options": ["$6.00", "$8.00", "$4.00", "$10.00", "No cost"],
          "answer": "6.00"
        },
        // Question 30.4
        {
          "question": "How much saved buying packs?",
          "options": ["$1.50", "$2.50", "$0.50", "$3.50", "Million dollars"],
          "answer": "1.50"
        },
        // Question 30.5
        {
          "question": "What information helps find best deal?",
          "options": ["Both prices and amount needed", "Just single price", "Just pack price", "Neither", "Pencil color"],
          "answer": "Both prices and amount needed"
        }
      ]
    }
//-------------------------------------------------------------------------------------------------------------------							
				  ]
				}
        ];

		const stageCount = quizData[0].stages.length; // This is the correct way to get the number of stages


		const stateContents = {
			'Practice': `<div id="stage-number" class="stage-number">Stage 1 of ${stageCount}</div><div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div><div id="attempts">Attempts: 0</div><div id="quiz-content"></div><button class="center-button" onclick="checkStage()">Check Answers</button>`
			,'Subject Overview 🗝️': `<div class="subject-overview-content">   <h1>Identifying Key Information in Word Problems: A Comprehensive Guide</h1>   <p>Identifying key information in word problems is a fundamental skill in mathematics and problem-solving. It involves discerning the essential details that are necessary to formulate and solve the problem effectively. Mastering this skill enhances comprehension, accuracy, and efficiency in tackling various mathematical challenges. This guide will explore the strategies for identifying key information, common pitfalls to avoid, and provide numerous examples to illustrate these concepts.</p>   <hr>   <h2>Table of Contents</h2>   <ol>     <li><a href="#what-is-key-information">What is Key Information in Word Problems?</a></li>     <li><a href="#strategies-for-identifying-key-information">Strategies for Identifying Key Information</a></li>     <li><a href="#common-pitfalls">Common Pitfalls to Avoid</a></li>     <li><a href="#detailed-explanation">Detailed Explanation with Examples</a>       <ul>         <li><a href="#understanding-the-problem">Understanding the Problem</a></li>         <li><a href="#identifying-relevant-information">Identifying Relevant Information</a></li>         <li><a href="#recognizing-what-to-find">Recognizing What to Find</a></li>         <li><a href="#eliminating-irrelevant-information">Eliminating Irrelevant Information</a></li>       </ul>     </li>     <li><a href="#conclusion">Conclusion</a></li>   </ol>   <hr>     <h2 id="what-is-key-information">What is Key Information in Word Problems?</h2>   <p>Key information in word problems refers to the specific data and details that are essential for formulating and solving the problem. This includes numerical values, relationships between quantities, and any constraints or conditions that apply. Identifying these elements is crucial as it allows the problem-solver to set up the correct equations or logical steps needed to find the solution.</p>   <p>In any word problem, not all information provided is necessary for finding the solution. Distinguishing between relevant and irrelevant details is a critical step in effective problem-solving.</p>   <hr>     <h2 id="strategies-for-identifying-key-information">Strategies for Identifying Key Information</h2>   <p>Several strategies can aid in pinpointing the key information within word problems:</p>   <ol>     <li><strong>Read Carefully:</strong> Thoroughly read the problem multiple times to understand the context and details.</li>     <li><strong>Highlight or Underline:</strong> Mark important numbers, units, and keywords that indicate mathematical operations.</li>     <li><strong>Identify What is Asked:</strong> Determine the specific question or objective of the problem.</li>     <li><strong>Break Down the Problem:</strong> Divide the problem into smaller, manageable parts to better understand the relationships between different pieces of information.</li>     <li><strong>Look for Keywords:</strong> Words like "total," "difference," "product," and "ratio" often hint at the operations needed.</li>   </ol>   <hr>     <h2 id="common-pitfalls">Common Pitfalls to Avoid</h2>   <p>When solving word problems, certain common mistakes can hinder the identification of key information:</p>   <ul>     <li><strong>Ignoring Units:</strong> Overlooking the units of measurement can lead to incorrect calculations.</li>     <li><strong>Overcomplicating the Problem:</strong> Introducing unnecessary steps or information can confuse the solving process.</li>     <li><strong>Misinterpreting Keywords:</strong> Misunderstanding the meaning of keywords can result in selecting the wrong mathematical operation.</li>     <li><strong>Skipping Steps:</strong> Rushing through the problem without systematically identifying key information can lead to errors.</li>   </ul>   <hr>     <h2 id="detailed-explanation">Detailed Explanation with Examples</h2>     <h3 id="understanding-the-problem">Understanding the Problem</h3>   <p>Before attempting to solve a word problem, it is essential to comprehend the scenario fully.</p>   <ol>     <li><strong>Read Thoroughly:</strong> Go through the problem statement carefully to grasp the context.</li>     <li><strong>Summarize:</strong> Paraphrase the problem in your own words to ensure understanding.</li>     <li><strong>Identify the Goal:</strong> Determine what the problem is asking you to find.</li>   </ol>   <p><strong>Example:</strong></p>   <ul>     <li><em>A farmer has 150 apples. He sells some and is left with 90 apples. How many apples did he sell?</em></li>   </ul>     <h3 id="identifying-relevant-information">Identifying Relevant Information</h3>   <p>Extract the data that directly relates to the question being asked.</p>   <ol>     <li><strong>Highlight Numbers:</strong> Look for numerical values and units.</li>     <li><strong>Determine Relationships:</strong> Understand how different pieces of information are connected.</li>     <li><strong>Discard Irrelevant Details:</strong> Remove information that does not contribute to solving the problem.</li>   </ol>   <p><strong>Example:</strong></p>   <ul>     <li><em>From the previous example, the relevant information is:</em>       <ul>         <li>Total apples initially: 150</li>         <li>Apples remaining: 90</li>       </ul>     </li>   </ul>     <h3 id="recognizing-what-to-find">Recognizing What to Find</h3>   <p>Clearly identify the unknowns that need to be determined to solve the problem.</p>   <ol>     <li><strong>Define Variables:</strong> Assign symbols to the unknown quantities.</li>     <li><strong>Establish Equations:</strong> Use the relationships between known and unknown information to form equations.</li>     <li><strong>Solve Systematically:</strong> Proceed step-by-step to find the solution.</li>   </ol>   <p><strong>Example:</strong></p>   <ul>     <li><em>Let the number of apples sold be x.</em></li>     <li><em>Equation: 150 - x = 90</em></li>     <li><em>Solving for x: x = 150 - 90 = 60</em></li>     <li><em>Answer: The farmer sold 60 apples.</em></li>   </ul>     <h3 id="eliminating-irrelevant-information">Eliminating Irrelevant Information</h3>   <p>Focus on information that directly impacts the solution, and set aside the rest.</p>   <ol>     <li><strong>Identify Distractions:</strong> Notice details that do not affect the outcome.</li>     <li><strong>Streamline Data:</strong> Simplify the problem by removing unnecessary information.</li>     <li><strong>Maintain Clarity:</strong> Keeping only relevant information helps in maintaining a clear path to the solution.</li>   </ol>   <p><strong>Example:</strong></p>   <ul>     <li><em>If the problem included additional details like the type of apples or the weather, these might be irrelevant unless specified otherwise.</em></li>   </ul>     <hr>   <h2 id="conclusion">Conclusion</h2>   <p>Identifying key information in word problems is a critical step in effective problem-solving. By employing strategies such as careful reading, highlighting relevant details, and recognizing what needs to be found, you can approach word problems with confidence and precision. Avoiding common pitfalls like ignoring units or overcomplicating the problem further enhances your ability to find accurate solutions.</p>   <ul>     <li><strong>Read Thoroughly:</strong> Ensure complete understanding of the problem.</li>     <li><strong>Highlight Key Details:</strong> Focus on numbers and relationships that are essential.</li>     <li><strong>Define What to Find:</strong> Clearly identify the unknowns to solve for.</li>     <li><strong>Eliminate Irrelevant Information:</strong> Streamline the problem to include only necessary data.</li>   </ul>   <p><strong>Remember</strong>: Practicing these strategies will improve your ability to dissect and solve word problems efficiently. Continuously apply these techniques to various problems to build and reinforce your problem-solving skills.</p>   <hr>   <p>By mastering the identification of key information in word problems, you'll enhance your mathematical reasoning and ability to tackle complex challenges with ease. Keep practicing these strategies, and revisit this guide whenever you need a refresher to maintain your proficiency!</p> </div>`		
			};


        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

        function showContent(state) {
            const tabContent = document.getElementById('tabContent');
            tabContent.innerHTML = stateContents[state] || '';

            if (state === 'Practice') {
                renderQuiz();
                updateProgressBar();
            }
        }

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function isTextEmpty(text) {
    return !text || text.trim() === "";
}

function renderQuiz() {
    const quizContainer = document.getElementById("quiz-content");
    quizContainer.innerHTML = '';
    
    // Only add stage text if it's not empty
    const stageText = quizData[0].stages[currentStage].text;
    if (!isTextEmpty(stageText)) {
        const stageTextElement = document.createElement("div");
        stageTextElement.className = "stage-text";
        stageTextElement.style.marginBottom = "20px";
        stageTextElement.style.padding = "15px";
        stageTextElement.style.backgroundColor = "#f5f5f5";
        stageTextElement.style.borderRadius = "5px";
        stageTextElement.textContent = stageText;
        quizContainer.appendChild(stageTextElement);
    }
    
    // Render questions
    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const questionElement = document.createElement("div");
        questionElement.className = "question-one-line";
        
        const label = document.createElement("label");
        label.htmlFor = `q${index}`;
        label.textContent = `${index + 1}. ${questionData.question}`;
        
        const resultDiv = document.createElement("div");
        resultDiv.className = "result result-ltr";
        resultDiv.id = `result${index}`;
        
        const select = document.createElement("select");
        select.id = `q${index}`;
        select.name = `q${index}`;
        
        const defaultOption = document.createElement("option");
        defaultOption.value = "";
        defaultOption.textContent = "Select";
        select.appendChild(defaultOption);
        
        const shuffledOptions = shuffleArray([...questionData.options]);
        shuffledOptions.forEach(option => {
            const optionElement = document.createElement("option");
            optionElement.value = option;
            optionElement.textContent = option;
            select.appendChild(optionElement);
        });
        
        questionElement.appendChild(label);
        questionElement.appendChild(resultDiv);
        questionElement.appendChild(select);
        
        quizContainer.appendChild(questionElement);
    });

    updateStageNumber();
}

function checkStage() {
    attempts++;
    document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

    let correctCount = 0;
    const totalQuestions = quizData[0].stages[currentStage].questions.length;

    quizData[0].stages[currentStage].questions.forEach((questionData, index) => {
        const resultElement = document.getElementById(`result${index}`);
        const selectElement = document.getElementById(`q${index}`);
        const selectedAnswer = selectElement.value;

        if (selectedAnswer === questionData.answer) {
            resultElement.textContent = "Correct!";
            resultElement.style.color = "green";
            correctCount++;
        } else {
            resultElement.textContent = "Incorrect answer.";
            resultElement.style.color = "red";
        }

        if (attempts >= 10) {
            selectElement.value = questionData.answer;
            selectElement.disabled = true;
            resultElement.textContent += ` The correct answer is: ${questionData.answer}`;
        }
    });

    if (correctCount === totalQuestions) {
        console.log(`Stage ${currentStage + 1}: ${correctCount} correct out of ${totalQuestions}`);
        addAnimalsToFarm(totalQuestions);

        if (currentStage < quizData[0].stages.length - 1) {
            singleStageConfetti();
            showEncouragingPopup(correctCount, totalQuestions, true);
            currentStage++;
            updateProgressBar();
            setTimeout(() => {
                attempts = 0;
                renderQuiz();
                document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
            }, 1500);
        } else {
            currentStage++;
            updateProgressBar();
            allStagesConfetti();
            showModal("Congratulations! You've completed all stages!");
        }
    } else {
        showEncouragingPopup(correctCount, totalQuestions, false);
        if (attempts >= 10) {
            showModal("You've reached the maximum number of attempts. The correct answers have been revealed.");
        }
    }

    scrollToTop();
}

// 4. Update stageCount calculation to work with new structure

		
		function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
			const incorrectCount = totalQuestions - correctCount;
			let message = `You got ${correctCount} correct and ${incorrectCount} incorrect.`;
			
			// Add encouraging message based on performance
			if (correctCount === totalQuestions) {
				message += " Perfect score!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
				message += " Great job! You're really getting the hang of this!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
				message += " Good effort! Keep practicing and you'll improve in no time!";
			} else {
				message += " Don't give up! Every attempt helps you learn. Try again!";
			}

			// Add stage completion message if applicable
			if (isStageComplete) {
				message += "\n\n You've completed this stage. Moving to the next stage.";
			}

			showModal(message);
		}

		function initializeQuiz() {
			currentStage = 0;
			attempts = 0;
			updateProgressBar(); // This should now set the progress to 0%
			renderQuiz();
			document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
			updateStageNumber();
		}

function updateProgressBar() {
    const progressBar = document.getElementById("progress-bar");
    const completedStages = currentStage;
    const progress = (completedStages / stageCount) * 100;
    const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
    progressBar.style.width = `${roundedProgress}%`;
    progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
    console.log(`Progress updated: ${roundedProgress}% (Stage ${currentStage + 1} of ${stageCount})`);
}

function updateStageNumber() {
    const stageElement = document.getElementById("stage-number");
    stageElement.textContent = `Stage ${currentStage + 1} of ${stageCount}`;
}

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
			    scrollToTopBtn.style.display = "none";
        }

        function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');
            
            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');
            
            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }
            
            switchContainer.style.display = 'flex';
            
            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });
   
            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

		let farmAnimals = [];

		function addAnimalsToFarm(count) {
			const animalFarm = document.getElementById('animalFarm');
			let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

			console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

			for (let i = 0; i < count; i++) {
				if (availableAnimals.length === 0) {
					console.log("No more unique animals available!");
					break;
				}

				const randomIndex = Math.floor(Math.random() * availableAnimals.length);
				const chosenAnimal = availableAnimals[randomIndex];

				const animalElement = document.createElement('li');
				animalElement.textContent = chosenAnimal;
				animalFarm.appendChild(animalElement);

				farmAnimals.push(chosenAnimal);
				availableAnimals.splice(randomIndex, 1);
				console.log(`Added animal: ${chosenAnimal}`);
			}

			console.log(`Farm size after addition: ${farmAnimals.length}`);
			logAnimalFarmState();
		}

		function logAnimalFarmState() {
			console.log(`Current animal farm state: ${farmAnimals.length} animals`);
			console.log(farmAnimals);
		}

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

		window.addEventListener('load', () => {
			initializeSwitch();
			initializeQuiz();
			adjustLayout();
        });

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
			
		let scrollToTopBtn = document.getElementById("scrollToTopBtn");

			window.onscroll = function() {
				// Check if the scroll distance is more than twice the height of the screen
				if (document.body.scrollTop > window.innerHeight * 1.5 || 
					document.documentElement.scrollTop > window.innerHeight * 1.5) {
					scrollToTopBtn.style.display = "block";
				} else {
					scrollToTopBtn.style.display = "none";
				}
			};

		scrollToTopBtn.onclick = function() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		};	
    </script>
</body>
</html>