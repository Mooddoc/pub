<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ez42.live/global/analytics.js"></script>
    <script src="https://ez42.live/global/ads.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
 	<link rel="stylesheet" href="http://www.ez42.live/global/styles/styles-eng.css"> <!-- Link to external CSS file -->
    <link rel="icon" type="image/svg+xml" href="http://www.ez42.live/global/styles/ez42-icon.svg">
    <title>✅ EZ42 LIVE - It's EZ</title>
<style>

</style>
</head>
<body>
    <div class="page-container">
        <div class="content-wrapper">
		
		<!--  Side Panel 1  -->
            <div id="sidePanel1" class="side-panel">
				<div class="logo-container">
					<a href="http://ez42.live" target="_blank" rel="noopener noreferrer">
						<img src="http://ez42.live/global/logo/logo.svg" alt="EZ42 Logo" class="logo-image">
					</a>
				</div>
			<h2>Instructions & Rules</h2>
			<ul>
																		<!--  PH1 - Instructions & Rules   -->	
				<li>Find the matching.</li>
				<li>Click both matching items to make a match.</li>
				<li>You can also drag to create a match.</li>
				<li>Finished? Click 'Check Answers' to see how well you did!</li>
				<li>Match all to move on to the next stage and add new animals to your farm!</li>
				<li>After 10 attempts, we’ll reveal the correct answers, so try your best first!</li>
				<li>Have fun with the game – learning is fun!</li>
			</ul>
            </div>
			
		<!--  Quiz Panel   -->
            <div id="quizContainer" class="quiz-container">
																			<!--  PH2 - Title  X  2 : A1 - 📗 Green, A2 - 📘 Blue, B1 - 📒 Yellow, 📙 Orange, 📔 Beige, 📓 Gray , 📕 Red-->	
                <h1>🌈 Memorizing the Multiplication Table 1-20💫</h1>
                
                <div id="switchContainer" class="switch-container">
                    <div id="multiStateSwitch" class="switch">
                        <div class="switch-labels"></div>
                        <div class="switch-handle"></div>
                    </div>
                </div>
                <div id="tabContent">
                </div>
            </div>
			
		<!--  Side Panel 2  -->
			<div id="sidePanel2" class="side-panel">
				<h2>Animal Farm</h2>
				<p>Watch your farm grow as you progress! Each completed stage adds new animal friends to your collection.</p>
				<ul id="animalFarm" class="emoji-list">
				</ul>
			</div>
        </div>
    </div>
    <div id="copyright-container"></div>

    <!-- Modal -->
    <div id="quizModal" class="modal-quiz">
        <div class="modal-quiz-content">
            <span class="modal-quiz-close">&times;</span>
            <p id="modalMessage"></p>
            <button id="modalButton" class="modal-quiz-button">OK</button>
        </div>
    </div>

    <script>
        // Template Elements
        let isQuizExpanded = false;
        let allowQuizExpansion = true;
        let attempts = 0;
        let currentStage = 0;
        let selectedQuestion = null;
        let selectedAnswer = null;

        const manuallySetDefaultTab = 0;

        const colors = ["#FF6B6B", "#4ECDC4", "#FFD93D", "#98FB98", "#87CEFA", "#FFA07A", "#DDA0DD", "#F0E68C", "#00CED1", "#FF69B4", "#AFE1AF", "#FFB347", "#40E0D0", "#DEA5A4", "#CCCCFF", "#F0DC82", "#FF6347", "#7FFFD4", "#FFE4E1", "#CFCFC4"];


																				//  PH3 - Quiz Data   	
       const quizData = [
 
    {
      "stage": "Stage 1",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "2 × 4 = ?" },
        { "question_id": 2, "question": "3 × 5 = ?" },
        { "question_id": 3, "question": "1 × 7 = ?" },
        { "question_id": 4, "question": "6 × 2 = ?" },
        { "question_id": 5, "question": "3 × 3 = ?" },
        { "question_id": 6, "question": "5 × 2 = ?" },
        { "question_id": 7, "question": "3 × 6 = ?" },
        { "question_id": 8, "question": "4 × 5 = ?" },
        { "question_id": 9, "question": "2 × 8 = ?" },
        { "question_id": 10, "question": "7 × 3 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 8 },
        { "answer_id": 2, "question_id": 2, "answer": 15 },
        { "answer_id": 3, "question_id": 3, "answer": 7 },
        { "answer_id": 4, "question_id": 4, "answer": 12 },
        { "answer_id": 5, "question_id": 5, "answer": 9 },
        { "answer_id": 6, "question_id": 6, "answer": 10 },
        { "answer_id": 7, "question_id": 7, "answer": 18 },
        { "answer_id": 8, "question_id": 8, "answer": 20 },
        { "answer_id": 9, "question_id": 9, "answer": 16 },
        { "answer_id": 10, "question_id": 10, "answer": 21 }
      ]
    },
    {
      "stage": "Stage 2",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "5 × 6 = ?" },
        { "question_id": 2, "question": "4 × 9 = ?" },
        { "question_id": 3, "question": "7 × 5 = ?" },
        { "question_id": 4, "question": "3 × 9 = ?" },
        { "question_id": 5, "question": "8 × 4 = ?" },
        { "question_id": 6, "question": "6 × 8 = ?" },
        { "question_id": 7, "question": "5 × 9 = ?" },
        { "question_id": 8, "question": "8 × 5 = ?" },
        { "question_id": 9, "question": "7 × 6 = ?" },
        { "question_id": 10, "question": "9 × 9 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 30 },
        { "answer_id": 2, "question_id": 2, "answer": 36 },
        { "answer_id": 3, "question_id": 3, "answer": 35 },
        { "answer_id": 4, "question_id": 4, "answer": 27 },
        { "answer_id": 5, "question_id": 5, "answer": 32 },
        { "answer_id": 6, "question_id": 6, "answer": 48 },
        { "answer_id": 7, "question_id": 7, "answer": 45 },
        { "answer_id": 8, "question_id": 8, "answer": 40 },
        { "answer_id": 9, "question_id": 9, "answer": 42 },
        { "answer_id": 10, "question_id": 10, "answer": 81 }
      ]
    },
    {
      "stage": "Stage 3",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "7 × 7 = ?" },
        { "question_id": 2, "question": "6 × 6 = ?" },
        { "question_id": 3, "question": "9 × 5 = ?" },
        { "question_id": 4, "question": "7 × 8 = ?" },
        { "question_id": 5, "question": "9 × 6 = ?" },
        { "question_id": 6, "question": "8 × 6 = ?" },
        { "question_id": 7, "question": "7 × 10 = ?" },
        { "question_id": 8, "question": "9 × 7 = ?" },
        { "question_id": 9, "question": "8 × 8 = ?" },
        { "question_id": 10, "question": "9 × 8 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 49 },
        { "answer_id": 2, "question_id": 2, "answer": 36 },
        { "answer_id": 3, "question_id": 3, "answer": 45 },
        { "answer_id": 4, "question_id": 4, "answer": 56 },
        { "answer_id": 5, "question_id": 5, "answer": 54 },
        { "answer_id": 6, "question_id": 6, "answer": 48 },
        { "answer_id": 7, "question_id": 7, "answer": 70 },
        { "answer_id": 8, "question_id": 8, "answer": 63 },
        { "answer_id": 9, "question_id": 9, "answer": 64 },
        { "answer_id": 10, "question_id": 10, "answer": 72 }
      ]
    },
    {
      "stage": "Stage 4",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "9 × 9 = ?" },
        { "question_id": 2, "question": "10 × 3 = ?" },
        { "question_id": 3, "question": "8 × 9 = ?" },
        { "question_id": 4, "question": "10 × 4 = ?" },
        { "question_id": 5, "question": "7 × 10 = ?" },
        { "question_id": 6, "question": "9 × 10 = ?" },
        { "question_id": 7, "question": "6 × 10 = ?" },
        { "question_id": 8, "question": "10 × 5 = ?" },
        { "question_id": 9, "question": "8 × 10 = ?" },
        { "question_id": 10, "question": "10 × 10 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 81 },
        { "answer_id": 2, "question_id": 2, "answer": 30 },
        { "answer_id": 3, "question_id": 3, "answer": 72 },
        { "answer_id": 4, "question_id": 4, "answer": 40 },
        { "answer_id": 5, "question_id": 5, "answer": 70 },
        { "answer_id": 6, "question_id": 6, "answer": 90 },
        { "answer_id": 7, "question_id": 7, "answer": 60 },
        { "answer_id": 8, "question_id": 8, "answer": 50 },
        { "answer_id": 9, "question_id": 9, "answer": 80 },
        { "answer_id": 10, "question_id": 10, "answer": 100 }
      ]
    },
    {
      "stage": "Stage 5",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "7 × 7 = ?" },
        { "question_id": 2, "question": "8 × 5 = ?" },
        { "question_id": 3, "question": "9 × 5 = ?" },
        { "question_id": 4, "question": "6 × 8 = ?" },
        { "question_id": 5, "question": "7 × 9 = ?" },
        { "question_id": 6, "question": "8 × 8 = ?" },
        { "question_id": 7, "question": "9 × 6 = ?" },
        { "question_id": 8, "question": "7 × 8 = ?" },
        { "question_id": 9, "question": "8 × 9 = ?" },
        { "question_id": 10, "question": "9 × 4 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 49 },
        { "answer_id": 2, "question_id": 2, "answer": 40 },
        { "answer_id": 3, "question_id": 3, "answer": 45 },
        { "answer_id": 4, "question_id": 4, "answer": 48 },
        { "answer_id": 5, "question_id": 5, "answer": 63 },
        { "answer_id": 6, "question_id": 6, "answer": 64 },
        { "answer_id": 7, "question_id": 7, "answer": 54 },
        { "answer_id": 8, "question_id": 8, "answer": 56 },
        { "answer_id": 9, "question_id": 9, "answer": 72 },
        { "answer_id": 10, "question_id": 10, "answer": 36 }
      ]
    },
    {
      "stage": "Stage 6",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "5 × 5 = ?" },
        { "question_id": 2, "question": "6 × 5 = ?" },
        { "question_id": 3, "question": "7 × 9 = ?" },
        { "question_id": 4, "question": "8 × 5 = ?" },
        { "question_id": 5, "question": "7 × 6 = ?" },
        { "question_id": 6, "question": "9 × 4 = ?" },
        { "question_id": 7, "question": "6 × 8 = ?" },
        { "question_id": 8, "question": "7 × 7 = ?" },
        { "question_id": 9, "question": "5 × 9 = ?" },
        { "question_id": 10, "question": "8 × 8 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 25 },
        { "answer_id": 2, "question_id": 2, "answer": 30 },
        { "answer_id": 3, "question_id": 3, "answer": 63 },
        { "answer_id": 4, "question_id": 4, "answer": 40 },
        { "answer_id": 5, "question_id": 5, "answer": 42 },
        { "answer_id": 6, "question_id": 6, "answer": 36 },
        { "answer_id": 7, "question_id": 7, "answer": 48 },
        { "answer_id": 8, "question_id": 8, "answer": 49 },
        { "answer_id": 9, "question_id": 9, "answer": 45 },
        { "answer_id": 10, "question_id": 10, "answer": 64 }
      ]
    },
    {
      "stage": "Stage 7",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "6 × 6 = ?" },
        { "question_id": 2, "question": "7 × 5 = ?" },
        { "question_id": 3, "question": "8 × 4 = ?" },
        { "question_id": 4, "question": "4 × 7 = ?" },
        { "question_id": 5, "question": "2 × 8 = ?" },
        { "question_id": 6, "question": "6 × 7 = ?" },
        { "question_id": 7, "question": "7 × 7 = ?" },
        { "question_id": 8, "question": "8 × 5 = ?" },
        { "question_id": 9, "question": "6 × 8 = ?" },
        { "question_id": 10, "question": "9 × 9 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 36 },
        { "answer_id": 2, "question_id": 2, "answer": 35 },
        { "answer_id": 3, "question_id": 3, "answer": 32 },
        { "answer_id": 4, "question_id": 4, "answer": 28 },
        { "answer_id": 5, "question_id": 5, "answer": 16 },
        { "answer_id": 6, "question_id": 6, "answer": 42 },
        { "answer_id": 7, "question_id": 7, "answer": 49 },
        { "answer_id": 8, "question_id": 8, "answer": 40 },
        { "answer_id": 9, "question_id": 9, "answer": 48 },
        { "answer_id": 10, "question_id": 10, "answer": 81 }
      ]
    },
    {
      "stage": "Stage 8",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "11 × 2 = ?" },
        { "question_id": 2, "question": "12 × 3 = ?" },
        { "question_id": 3, "question": "13 × 2 = ?" },
        { "question_id": 4, "question": "11 × 4 = ?" },
        { "question_id": 5, "question": "14 × 2 = ?" },
        { "question_id": 6, "question": "12 × 4 = ?" },
        { "question_id": 7, "question": "13 × 3 = ?" },
        { "question_id": 8, "question": "14 × 3 = ?" },
        { "question_id": 9, "question": "11 × 5 = ?" },
        { "question_id": 10, "question": "12 × 5 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 22 },
        { "answer_id": 2, "question_id": 2, "answer": 36 },
        { "answer_id": 3, "question_id": 3, "answer": 26 },
        { "answer_id": 4, "question_id": 4, "answer": 44 },
        { "answer_id": 5, "question_id": 5, "answer": 28 },
        { "answer_id": 6, "question_id": 6, "answer": 48 },
        { "answer_id": 7, "question_id": 7, "answer": 39 },
        { "answer_id": 8, "question_id": 8, "answer": 42 },
        { "answer_id": 9, "question_id": 9, "answer": 55 },
        { "answer_id": 10, "question_id": 10, "answer": 60 }
      ]
    },
    {
      "stage": "Stage 9",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "15 × 2 = ?" },
        { "question_id": 2, "question": "16 × 2 = ?" },
        { "question_id": 3, "question": "15 × 3 = ?" },
        { "question_id": 4, "question": "17 × 2 = ?" },
        { "question_id": 5, "question": "16 × 3 = ?" },
        { "question_id": 6, "question": "18 × 2 = ?" },
        { "question_id": 7, "question": "15 × 4 = ?" },
        { "question_id": 8, "question": "17 × 3 = ?" },
        { "question_id": 9, "question": "16 × 4 = ?" },
        { "question_id": 10, "question": "18 × 3 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 30 },
        { "answer_id": 2, "question_id": 2, "answer": 32 },
        { "answer_id": 3, "question_id": 3, "answer": 45 },
        { "answer_id": 4, "question_id": 4, "answer": 34 },
        { "answer_id": 5, "question_id": 5, "answer": 48 },
        { "answer_id": 6, "question_id": 6, "answer": 36 },
        { "answer_id": 7, "question_id": 7, "answer": 60 },
        { "answer_id": 8, "question_id": 8, "answer": 51 },
        { "answer_id": 9, "question_id": 9, "answer": 64 },
        { "answer_id": 10, "question_id": 10, "answer": 54 }
      ]
    },
    {
      "stage": "Stage 10",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "19 × 2 = ?" },
        { "question_id": 2, "question": "20 × 2 = ?" },
        { "question_id": 3, "question": "19 × 3 = ?" },
        { "question_id": 4, "question": "20 × 3 = ?" },
        { "question_id": 5, "question": "19 × 4 = ?" },
        { "question_id": 6, "question": "20 × 4 = ?" },
        { "question_id": 7, "question": "19 × 5 = ?" },
        { "question_id": 8, "question": "20 × 5 = ?" },
        { "question_id": 9, "question": "19 × 6 = ?" },
        { "question_id": 10, "question": "20 × 6 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 38 },
        { "answer_id": 2, "question_id": 2, "answer": 40 },
        { "answer_id": 3, "question_id": 3, "answer": 57 },
        { "answer_id": 4, "question_id": 4, "answer": 60 },
        { "answer_id": 5, "question_id": 5, "answer": 76 },
        { "answer_id": 6, "question_id": 6, "answer": 80 },
        { "answer_id": 7, "question_id": 7, "answer": 95 },
        { "answer_id": 8, "question_id": 8, "answer": 100 },
        { "answer_id": 9, "question_id": 9, "answer": 114 },
        { "answer_id": 10, "question_id": 10, "answer": 120 }
      ]
    },
    {
      "stage": "Stage 11",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "11 × 6 = ?" },
        { "question_id": 2, "question": "12 × 6 = ?" },
        { "question_id": 3, "question": "13 × 4 = ?" },
        { "question_id": 4, "question": "14 × 4 = ?" },
        { "question_id": 5, "question": "11 × 7 = ?" },
        { "question_id": 6, "question": "12 × 7 = ?" },
        { "question_id": 7, "question": "13 × 5 = ?" },
        { "question_id": 8, "question": "14 × 5 = ?" },
        { "question_id": 9, "question": "11 × 8 = ?" },
        { "question_id": 10, "question": "12 × 8 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 66 },
        { "answer_id": 2, "question_id": 2, "answer": 72 },
        { "answer_id": 3, "question_id": 3, "answer": 52 },
        { "answer_id": 4, "question_id": 4, "answer": 56 },
        { "answer_id": 5, "question_id": 5, "answer": 77 },
        { "answer_id": 6, "question_id": 6, "answer": 84 },
        { "answer_id": 7, "question_id": 7, "answer": 65 },
        { "answer_id": 8, "question_id": 8, "answer": 70 },
        { "answer_id": 9, "question_id": 9, "answer": 88 },
        { "answer_id": 10, "question_id": 10, "answer": 96 }
      ]
    },
    {
      "stage": "Stage 12",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "15 × 5 = ?" },
        { "question_id": 2, "question": "16 × 5 = ?" },
        { "question_id": 3, "question": "17 × 4 = ?" },
        { "question_id": 4, "question": "18 × 4 = ?" },
        { "question_id": 5, "question": "15 × 9 = ?" },
        { "question_id": 6, "question": "16 × 6 = ?" },
        { "question_id": 7, "question": "17 × 5 = ?" },
        { "question_id": 8, "question": "18 × 5 = ?" },
        { "question_id": 9, "question": "15 × 7 = ?" },
        { "question_id": 10, "question": "16 × 7 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 75 },
        { "answer_id": 2, "question_id": 2, "answer": 80 },
        { "answer_id": 3, "question_id": 3, "answer": 68 },
        { "answer_id": 4, "question_id": 4, "answer": 72 },
        { "answer_id": 5, "question_id": 5, "answer": 135 },
        { "answer_id": 6, "question_id": 6, "answer": 96 },
        { "answer_id": 7, "question_id": 7, "answer": 85 },
        { "answer_id": 8, "question_id": 8, "answer": 90 },
        { "answer_id": 9, "question_id": 9, "answer": 105 },
        { "answer_id": 10, "question_id": 10, "answer": 112 }
      ]
    },
    {
      "stage": "Stage 13",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "19 × 7 = ?" },
        { "question_id": 2, "question": "20 × 7 = ?" },
        { "question_id": 3, "question": "19 × 8 = ?" },
        { "question_id": 4, "question": "20 × 8 = ?" },
        { "question_id": 5, "question": "19 × 9 = ?" },
        { "question_id": 6, "question": "20 × 9 = ?" },
        { "question_id": 7, "question": "19 × 10 = ?" },
        { "question_id": 8, "question": "20 × 10 = ?" },
        { "question_id": 9, "question": "19 × 11 = ?" },
        { "question_id": 10, "question": "20 × 11 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 133 },
        { "answer_id": 2, "question_id": 2, "answer": 140 },
        { "answer_id": 3, "question_id": 3, "answer": 152 },
        { "answer_id": 4, "question_id": 4, "answer": 160 },
        { "answer_id": 5, "question_id": 5, "answer": 171 },
        { "answer_id": 6, "question_id": 6, "answer": 180 },
        { "answer_id": 7, "question_id": 7, "answer": 190 },
        { "answer_id": 8, "question_id": 8, "answer": 200 },
        { "answer_id": 9, "question_id": 9, "answer": 209 },
        { "answer_id": 10, "question_id": 10, "answer": 220 }
      ]
    },
    {
     "stage": "Stage 14",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "13 × 6 = ?" },
        { "question_id": 2, "question": "14 × 6 = ?" },
        { "question_id": 3, "question": "15 × 8 = ?" },
        { "question_id": 4, "question": "16 × 8 = ?" },
        { "question_id": 5, "question": "13 × 7 = ?" },
        { "question_id": 6, "question": "14 × 7 = ?" },
        { "question_id": 7, "question": "15 × 9 = ?" },
        { "question_id": 8, "question": "16 × 9 = ?" },
        { "question_id": 9, "question": "13 × 8 = ?" },
        { "question_id": 10, "question": "14 × 8 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 78 },
        { "answer_id": 2, "question_id": 2, "answer": 84 },
        { "answer_id": 3, "question_id": 3, "answer": 120 },
        { "answer_id": 4, "question_id": 4, "answer": 128 },
        { "answer_id": 5, "question_id": 5, "answer": 91 },
        { "answer_id": 6, "question_id": 6, "answer": 98 },
        { "answer_id": 7, "question_id": 7, "answer": 135 },
        { "answer_id": 8, "question_id": 8, "answer": 144 },
        { "answer_id": 9, "question_id": 9, "answer": 104 },
        { "answer_id": 10, "question_id": 10, "answer": 112 }
      ]
    },
    {
      "stage": "Stage 15",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "17 × 6 = ?" },
        { "question_id": 2, "question": "18 × 6 = ?" },
        { "question_id": 3, "question": "17 × 7 = ?" },
        { "question_id": 4, "question": "18 × 7 = ?" },
        { "question_id": 5, "question": "17 × 8 = ?" },
        { "question_id": 6, "question": "18 × 8 = ?" },
        { "question_id": 7, "question": "17 × 9 = ?" },
        { "question_id": 8, "question": "18 × 9 = ?" },
        { "question_id": 9, "question": "17 × 10 = ?" },
        { "question_id": 10, "question": "18 × 10 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 102 },
        { "answer_id": 2, "question_id": 2, "answer": 108 },
        { "answer_id": 3, "question_id": 3, "answer": 119 },
        { "answer_id": 4, "question_id": 4, "answer": 126 },
        { "answer_id": 5, "question_id": 5, "answer": 136 },
        { "answer_id": 6, "question_id": 6, "answer": 144 },
        { "answer_id": 7, "question_id": 7, "answer": 153 },
        { "answer_id": 8, "question_id": 8, "answer": 162 },
        { "answer_id": 9, "question_id": 9, "answer": 170 },
        { "answer_id": 10, "question_id": 10, "answer": 180 }
      ]
    },
    {
      "stage": "Stage 16",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "11 × 9 = ?" },
        { "question_id": 2, "question": "12 × 9 = ?" },
        { "question_id": 3, "question": "13 × 9 = ?" },
        { "question_id": 4, "question": "14 × 9 = ?" },
        { "question_id": 5, "question": "11 × 10 = ?" },
        { "question_id": 6, "question": "12 × 10 = ?" },
        { "question_id": 7, "question": "13 × 10 = ?" },
        { "question_id": 8, "question": "14 × 10 = ?" },
        { "question_id": 9, "question": "11 × 11 = ?" },
        { "question_id": 10, "question": "12 × 11 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 99 },
        { "answer_id": 2, "question_id": 2, "answer": 108 },
        { "answer_id": 3, "question_id": 3, "answer": 117 },
        { "answer_id": 4, "question_id": 4, "answer": 126 },
        { "answer_id": 5, "question_id": 5, "answer": 110 },
        { "answer_id": 6, "question_id": 6, "answer": 120 },
        { "answer_id": 7, "question_id": 7, "answer": 130 },
        { "answer_id": 8, "question_id": 8, "answer": 140 },
        { "answer_id": 9, "question_id": 9, "answer": 121 },
        { "answer_id": 10, "question_id": 10, "answer": 132 }
      ]
    },
    {
      "stage": "Stage 17",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "15 × 10 = ?" },
        { "question_id": 2, "question": "16 × 10 = ?" },
        { "question_id": 3, "question": "15 × 11 = ?" },
        { "question_id": 4, "question": "16 × 11 = ?" },
        { "question_id": 5, "question": "15 × 12 = ?" },
        { "question_id": 6, "question": "16 × 12 = ?" },
        { "question_id": 7, "question": "15 × 13 = ?" },
        { "question_id": 8, "question": "16 × 13 = ?" },
        { "question_id": 9, "question": "15 × 14 = ?" },
        { "question_id": 10, "question": "16 × 14 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 150 },
        { "answer_id": 2, "question_id": 2, "answer": 160 },
        { "answer_id": 3, "question_id": 3, "answer": 165 },
        { "answer_id": 4, "question_id": 4, "answer": 176 },
        { "answer_id": 5, "question_id": 5, "answer": 180 },
        { "answer_id": 6, "question_id": 6, "answer": 192 },
        { "answer_id": 7, "question_id": 7, "answer": 195 },
        { "answer_id": 8, "question_id": 8, "answer": 208 },
        { "answer_id": 9, "question_id": 9, "answer": 210 },
        { "answer_id": 10, "question_id": 10, "answer": 224 }
      ]
    },
    {
      "stage": "Stage 18",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "17 × 11 = ?" },
        { "question_id": 2, "question": "18 × 11 = ?" },
        { "question_id": 3, "question": "17 × 12 = ?" },
        { "question_id": 4, "question": "18 × 12 = ?" },
        { "question_id": 5, "question": "17 × 13 = ?" },
        { "question_id": 6, "question": "18 × 13 = ?" },
        { "question_id": 7, "question": "17 × 14 = ?" },
        { "question_id": 8, "question": "18 × 14 = ?" },
        { "question_id": 9, "question": "17 × 15 = ?" },
        { "question_id": 10, "question": "18 × 15 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 187 },
        { "answer_id": 2, "question_id": 2, "answer": 198 },
        { "answer_id": 3, "question_id": 3, "answer": 204 },
        { "answer_id": 4, "question_id": 4, "answer": 216 },
        { "answer_id": 5, "question_id": 5, "answer": 221 },
        { "answer_id": 6, "question_id": 6, "answer": 234 },
        { "answer_id": 7, "question_id": 7, "answer": 238 },
        { "answer_id": 8, "question_id": 8, "answer": 252 },
        { "answer_id": 9, "question_id": 9, "answer": 255 },
        { "answer_id": 10, "question_id": 10, "answer": 270 }
      ]
    },
    {
      "stage": "Stage 19",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "19 × 12 = ?" },
        { "question_id": 2, "question": "20 × 12 = ?" },
        { "question_id": 3, "question": "19 × 13 = ?" },
        { "question_id": 4, "question": "20 × 13 = ?" },
        { "question_id": 5, "question": "19 × 14 = ?" },
        { "question_id": 6, "question": "20 × 14 = ?" },
        { "question_id": 7, "question": "19 × 15 = ?" },
        { "question_id": 8, "question": "20 × 15 = ?" },
        { "question_id": 9, "question": "19 × 16 = ?" },
        { "question_id": 10, "question": "20 × 16 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 228 },
        { "answer_id": 2, "question_id": 2, "answer": 240 },
        { "answer_id": 3, "question_id": 3, "answer": 247 },
        { "answer_id": 4, "question_id": 4, "answer": 260 },
        { "answer_id": 5, "question_id": 5, "answer": 266 },
        { "answer_id": 6, "question_id": 6, "answer": 280 },
        { "answer_id": 7, "question_id": 7, "answer": 285 },
        { "answer_id": 8, "question_id": 8, "answer": 300 },
        { "answer_id": 9, "question_id": 9, "answer": 304 },
        { "answer_id": 10, "question_id": 10, "answer": 320 }
      ]
    },
    {
      "stage": "Stage 20",
      "stageName": "",
      "direction": "ltr",
      "questions": [
        { "question_id": 1, "question": "19 × 17 = ?" },
        { "question_id": 2, "question": "20 × 17 = ?" },
        { "question_id": 3, "question": "19 × 16 = ?" },
        { "question_id": 4, "question": "20 × 18 = ?" },
        { "question_id": 5, "question": "19 × 19 = ?" },
        { "question_id": 6, "question": "14 × 19 = ?" },
        { "question_id": 7, "question": "19 × 20 = ?" },
        { "question_id": 8, "question": "20 × 20 = ?" },
        { "question_id": 9, "question": "18 × 19 = ?" },
        { "question_id": 10, "question": "17 × 14 = ?" }
      ],
      "answers": [
        { "answer_id": 1, "question_id": 1, "answer": 323 },
        { "answer_id": 2, "question_id": 2, "answer": 340 },
        { "answer_id": 3, "question_id": 3, "answer": 304 },
        { "answer_id": 4, "question_id": 4, "answer": 360 },
        { "answer_id": 5, "question_id": 5, "answer": 361 },
        { "answer_id": 6, "question_id": 6, "answer": 266 },
        { "answer_id": 7, "question_id": 7, "answer": 380 },
        { "answer_id": 8, "question_id": 8, "answer": 400 },
        { "answer_id": 9, "question_id": 9, "answer": 342 },
        { "answer_id": 10, "question_id": 10, "answer": 238 }
      ]
    }

        ];


        const stageCount = quizData.length;

		const stateContents = {
			'Practice': `
				<div id="stage-number" class="stage-number">Stage 1 of ${quizData.length}</div>
				<div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
				<div id="attempts">Attempts: 0</div>
				<div id="quiz-content"></div>
				<div class="button-container">
					<button class="center-button" onclick="showAllAnswers()" style="background-color: #00CED1">Show All</button>
					<button class="center-button" onclick="checkStage()">Check Answers</button>
					<button class="center-button" onclick="clearAllAnswers()" style="background-color: #00CED1">Clear All</button>
				</div>
			`,
			'Subject Overview 🗝️': `<div class="subject-overview-content">   <h1>Memorizing the Multiplication Table: A Comprehensive Guide</h1>   <p>Memorizing the multiplication table is a fundamental step in mastering basic arithmetic and laying the groundwork for more advanced mathematical concepts. This guide will explore effective strategies, techniques, and tips to help learners memorize the multiplication tables from 1 to 10. We'll delve into various methods, discuss common challenges, and provide practical examples to ensure a thorough understanding and retention of multiplication facts.</p>     <hr>     <h2>Multiplication Table (1-10)</h2>   <table border="1" cellpadding="5" cellspacing="0">     <thead>       <tr>         <th>×</th>         <th>1</th>         <th>2</th>         <th>3</th>         <th>4</th>         <th>5</th>         <th>6</th>         <th>7</th>         <th>8</th>         <th>9</th>         <th>10</th>       </tr>     </thead>     <tbody>       <tr>         <th>1</th>         <td>1</td>         <td>2</td>         <td>3</td>         <td>4</td>         <td>5</td>         <td>6</td>         <td>7</td>         <td>8</td>         <td>9</td>         <td>10</td>       </tr>       <tr>         <th>2</th>         <td>2</td>         <td>4</td>         <td>6</td>         <td>8</td>         <td>10</td>         <td>12</td>         <td>14</td>         <td>16</td>         <td>18</td>         <td>20</td>       </tr>       <tr>         <th>3</th>         <td>3</td>         <td>6</td>         <td>9</td>         <td>12</td>         <td>15</td>         <td>18</td>         <td>21</td>         <td>24</td>         <td>27</td>         <td>30</td>       </tr>       <tr>         <th>4</th>         <td>4</td>         <td>8</td>         <td>12</td>         <td>16</td>         <td>20</td>         <td>24</td>         <td>28</td>         <td>32</td>         <td>36</td>         <td>40</td>       </tr>       <tr>         <th>5</th>         <td>5</td>         <td>10</td>         <td>15</td>         <td>20</td>         <td>25</td>         <td>30</td>         <td>35</td>         <td>40</td>         <td>45</td>         <td>50</td>       </tr>       <tr>         <th>6</th>         <td>6</td>         <td>12</td>         <td>18</td>         <td>24</td>         <td>30</td>         <td>36</td>         <td>42</td>         <td>48</td>         <td>54</td>         <td>60</td>       </tr>       <tr>         <th>7</th>         <td>7</td>         <td>14</td>         <td>21</td>         <td>28</td>         <td>35</td>         <td>42</td>         <td>49</td>         <td>56</td>         <td>63</td>         <td>70</td>       </tr>       <tr>         <th>8</th>         <td>8</td>         <td>16</td>         <td>24</td>         <td>32</td>         <td>40</td>         <td>48</td>         <td>56</td>         <td>64</td>         <td>72</td>         <td>80</td>       </tr>       <tr>         <th>9</th>         <td>9</td>         <td>18</td>         <td>27</td>         <td>36</td>         <td>45</td>         <td>54</td>         <td>63</td>         <td>72</td>         <td>81</td>         <td>90</td>       </tr>       <tr>         <th>10</th>         <td>10</td>         <td>20</td>         <td>30</td>         <td>40</td>         <td>50</td>         <td>60</td>         <td>70</td>         <td>80</td>         <td>90</td>         <td>100</td>       </tr>     </tbody>   </table>     <hr>     <h2>Table of Contents</h2>   <ol>     <li><a href="#what-is-the-multiplication-table">What is the Multiplication Table?</a></li>     <li><a href="#importance-of-memorizing">Importance of Memorizing</a></li>     <li><a href="#techniques-for-memorization">Techniques for Memorization</a></li>     <li><a href="#common-challenges">Common Challenges</a></li>     <li><a href="#tips-and-strategies">Tips and Strategies</a></li>     <li><a href="#conclusion">Conclusion</a></li>   </ol>     <hr>     <h2 id="what-is-the-multiplication-table">What is the Multiplication Table?</h2>   <p>The multiplication table, also known as the times table, is a mathematical table used to define a multiplication operation for an algebraic system. It lists the products of pairs of numbers, typically from 1 to 10 or 12, facilitating quick and easy reference for multiplication facts.</p>   <p>Understanding the multiplication table is crucial for performing arithmetic operations efficiently and serves as a foundation for more complex mathematical concepts such as fractions, algebra, and geometry.</p>     <hr>     <h2 id="importance-of-memorizing">Importance of Memorizing</h2>   <p>Memorizing the multiplication table offers several benefits:</p>   <ul>     <li><strong>Speed and Efficiency</strong>: Quick recall of multiplication facts speeds up calculations in daily tasks and more advanced math problems.</li>     <li><strong>Foundation for Advanced Math</strong>: A solid grasp of multiplication tables is essential for understanding concepts in algebra, geometry, and beyond.</li>     <li><strong>Confidence Building</strong>: Mastery of basic arithmetic builds confidence in tackling more complex mathematical challenges.</li>     <li><strong>Problem-Solving Skills</strong>: Enhances logical thinking and problem-solving abilities by providing a strong numerical foundation.</li>   </ul>     <hr>     <h2 id="techniques-for-memorization">Techniques for Memorization</h2>     <h3>1. Repetition and Practice</h3>   <p>Regularly practicing multiplication tables through repetition helps reinforce memory. This can be done through:</p>   <ul>     <li><em>Writing out tables repeatedly.</em></li>     <li><em>Reciting tables aloud.</em></li>     <li><em>Using flashcards for self-quizzing.</em></li>   </ul>     <h3>2. Visualization</h3>   <p>Visual aids can enhance memorization by associating numbers with images:</p>   <ul>     <li><em>Color-coded tables to differentiate numbers.</em></li>     <li><em>Using charts and posters in study areas.</em></li>     <li><em>Visual patterns, such as recognizing that multiples of 5 always end in 0 or 5.</em></li>   </ul>     <h3>3. Mnemonic Devices</h3>   <p>Creating mnemonic devices or rhymes can aid in remembering specific multiplication facts:</p>   <ul>     <li><em>For 7 × 8: "Seven ate (eight) nine."</em></li>     <li><em>For 9 × 9: "Nine times nine is eighty-one."</em></li>   </ul>     <h3>4. Interactive Games and Apps</h3>   <p>Engaging with educational games and mobile applications makes memorization fun and interactive:</p>   <ul>     <li><em>Online multiplication games that provide instant feedback.</em></li>     <li><em>Apps with timed quizzes and rewards for correct answers.</em></li>   </ul>     <h3>5. Grouping and Patterns</h3>   <p>Identifying and utilizing patterns within the multiplication table can simplify memorization:</p>   <ul>     <li><em>All products of 1 are the numbers themselves.</em></li>     <li><em>Multiples of 10 always end in zero.</em></li>     <li><em>Recognizing that the product of any number and 5 ends in 0 or 5.</em></li>   </ul>     <hr>     <h2 id="common-challenges">Common Challenges</h2>     <h3>1. Memorization Overload</h3>   <p>Attempting to memorize the entire table at once can be overwhelming. It's essential to break down the table into smaller sections and focus on one section at a time.</p>     <h3>2. Lack of Engagement</h3>   <p>Traditional memorization methods may become monotonous, leading to decreased motivation. Incorporating interactive and varied techniques can mitigate this issue.</p>     <h3>3. Anxiety and Pressure</h3>   <p>High expectations and pressure to memorize quickly can create anxiety, hindering the learning process. Maintaining a positive and supportive learning environment is crucial.</p>     <h3>4. Inconsistent Practice</h3>   <p>Irregular practice sessions can impede retention. Establishing a consistent practice routine ensures steady progress and long-term memorization.</p>     <hr>     <h2 id="tips-and-strategies">Tips and Strategies</h2>     <h3>1. Start with Easier Tables</h3>   <p>Begin by memorizing tables that are easier to grasp, such as 1, 2, 5, and 10, before progressing to more challenging ones like 7 and 8.</p>     <h3>2. Use Real-Life Examples</h3>   <p>Incorporate multiplication into everyday activities, such as calculating total costs while shopping or determining the number of items needed for a group.</p>     <h3>3. Set Achievable Goals</h3>   <p>Establish small, attainable goals to maintain motivation. For example, aim to master one multiplication table per week.</p>     <h3>4. Incorporate Multiple Learning Styles</h3>   <p>Utilize auditory, visual, and kinesthetic learning methods to cater to different learning preferences and enhance overall comprehension.</p>     <h3>5. Review Regularly</h3>   <p>Consistent review sessions help reinforce memorization and prevent forgetting. Schedule periodic reviews of previously learned tables.</p>     <hr>     <h2 id="conclusion">Conclusion</h2>   <p>Memorizing the multiplication table is a vital skill that supports mathematical proficiency and confidence. By employing a variety of memorization techniques, maintaining consistent practice, and addressing common challenges, learners can effectively master multiplication facts. Remember to stay patient, stay motivated, and make the learning process engaging and enjoyable. With dedication and the right strategies, memorizing the multiplication table will become a manageable and rewarding achievement.</p>     <hr>     <p>By implementing these strategies and regularly practicing, you'll be well on your way to mastering the multiplication tables. Keep persevering, and don't hesitate to revisit this guide whenever you need a refresher or additional support!</p> </div>`
		};

        function setQuizExpansion(allow) {
            allowQuizExpansion = allow;
            adjustLayout();
        }

        function adjustLayout() {
            const wrapper = document.querySelector('.content-wrapper');
            const quizContainer = document.getElementById('quizContainer');
            const sidePanel1 = document.getElementById('sidePanel1');
            
            const isPanel1Visible = window.getComputedStyle(sidePanel1).display !== 'none';

            wrapper.style.justifyContent = 'space-between';

            if (isPanel1Visible) {
                sidePanel1.style.flex = '0 0 calc(20% - 0.5rem)';
                sidePanel1.style.maxWidth = 'calc(20% - 0.5rem)';
                quizContainer.style.flex = '1';
            } else {
                quizContainer.style.flex = '1';
                wrapper.style.justifyContent = 'center';
            }

            [sidePanel1, quizContainer].forEach(el => {
                el.style.display = 'block';
            });
        }

        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            adjustLayout();
        }

        function updateSwitcherLayout() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const handle = switchElement.querySelector('.switch-handle');

            labels.forEach(label => {
                label.style.flex = 'none';
                label.style.padding = '0 20px';
            });

            const activeLabel = switchElement.querySelector('.switch-label.active');
            if (activeLabel) {
                const switchRect = switchElement.getBoundingClientRect();
                const labelRect = activeLabel.getBoundingClientRect();

                handle.style.left = `${labelRect.left - switchRect.left}px`;
                handle.style.width = `${labelRect.width}px`;
            }

            switchElement.style.width = 'auto';
        }
        
        function switchTab(index) {
            const switchElement = document.getElementById('multiStateSwitch');
            const labels = switchElement.querySelectorAll('.switch-label');
            const activeStates = Array.from(labels).map(label => label.textContent);

            labels.forEach((label, i) => {
                label.classList.toggle('active', i === index);
            });

            updateSwitcherLayout();
            showContent(activeStates[index]);

            adjustLayout();
        }

		function showContent(state) {
			console.log("Showing content for state:", state);
			const tabContent = document.getElementById('tabContent');
			tabContent.innerHTML = stateContents[state] || '';

			if (state === 'Practice') {
				const quizContent = document.getElementById('quiz-content');
				if (quizContent) {
					let columnsContainer = document.getElementById('columnsContainer');
					if (!columnsContainer) {
						columnsContainer = document.createElement('div');
						columnsContainer.id = 'columnsContainer';
						columnsContainer.className = 'columns-container';
						columnsContainer.innerHTML = `
							<div id="questionsColumn" class="questions-column"></div>
							<div id="answersColumn" class="answers-column"></div>
						`;
						quizContent.appendChild(columnsContainer);
					}
				}
				renderQuiz();
				updateProgressBar();
			}
		}
				
       function initializeSwitch() {
            const switchElement = document.getElementById('multiStateSwitch');
            const labelsContainer = switchElement.querySelector('.switch-labels');
            const switchContainer = document.getElementById('switchContainer');

            const activeStates = Object.keys(stateContents).filter(state => stateContents[state].trim() !== '');

            if (activeStates.length <= 1) {
                switchContainer.style.display = 'none';
                if (activeStates.length === 1) {
                    showContent(activeStates[0]);
                }
                return;
            }

            switchContainer.style.display = 'flex';

            activeStates.forEach((state, index) => {
                const label = document.createElement('div');
                label.className = 'switch-label';
                label.textContent = state;
                label.addEventListener('click', () => switchTab(index));
                labelsContainer.appendChild(label);
            });

            const defaultTab = manuallySetDefaultTab !== null && manuallySetDefaultTab < activeStates.length
                ? manuallySetDefaultTab
                : 0;

            switchTab(defaultTab);
        }

function renderQuiz() {
    console.log("Rendering quiz for Stage:", currentStage);
    const quizContent = document.getElementById("quiz-content");

    if (!quizContent) {
        console.error("Quiz content not found");
        return;
    }

    // Clear existing content to avoid retaining old columns
    quizContent.innerHTML = '';

    // Create a new columns container each time to avoid any conflicts
    const columnsContainer = document.createElement("div");
    columnsContainer.id = "columnsContainer";
    columnsContainer.className = "columns-container";
    columnsContainer.innerHTML = `
        <div id="questionsColumn" class="questions-column"></div>
        <div id="answersColumn" class="answers-column"></div>
    `;
    quizContent.appendChild(columnsContainer);

    // Get references to the new columns
    const questionsColumn = document.getElementById("questionsColumn");
    const answersColumn = document.getElementById("answersColumn");

    if (!questionsColumn || !answersColumn) {
        console.error("Questions or answers column not found");
        return;
    }

    const currentQuiz = quizData[currentStage];
    console.log("Current Quiz Data:", currentQuiz);

    // Apply the correct layout class
    columnsContainer.className = `columns-container ${currentQuiz.direction}-layout`;

    // Add stage name if it exists
    if (currentQuiz.stageName) {
        const stageNameElement = document.createElement("h2");
        stageNameElement.textContent = currentQuiz.stageName;
        stageNameElement.className = "stage-name";
        quizContent.insertBefore(stageNameElement, columnsContainer);
    }

    const shuffledQuestions = shuffleArray([...currentQuiz.questions]);
    const shuffledAnswers = shuffleArray([...currentQuiz.answers]);

    questionsColumn.innerHTML = '';
    answersColumn.innerHTML = '';

    shuffledQuestions.forEach((question, index) => {
        const questionWrapper = document.createElement("div");
        const answerWrapper = document.createElement("div");
        questionWrapper.className = "card-wrapper";
        answerWrapper.className = "card-wrapper";

        const questionElement = createQuestionElement(question);
        const answerElement = createAnswerElement(shuffledAnswers[index]);

        questionWrapper.appendChild(questionElement);
        answerWrapper.appendChild(answerElement);

        questionsColumn.appendChild(questionWrapper);
        answersColumn.appendChild(answerWrapper);
    });

    // Set all cards to the height of the tallest card
    const allCards = document.querySelectorAll('.question-item, .answer-item');
    let maxHeight = 0;

    // Find the tallest card
    allCards.forEach(card => {
        const height = card.offsetHeight;
        if (height > maxHeight) {
            maxHeight = height;
        }
    });

    // Set all cards to the max height
    allCards.forEach(card => {
        card.style.height = `${maxHeight}px`;
    });

    // Re-enable "Show All" and "Clear All" buttons
    document.querySelectorAll('.center-button').forEach(button => {
        if (button.textContent === 'Show All' || button.textContent === 'Clear All') {
            button.disabled = false;
        }
    });

    updateStageNumber();

    // Reset attempts for the new stage
    attempts = 0;
    document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

    // Update progress bar
    updateProgressBar();
}



		function createQuestionElement(question) {
			const questionElement = document.createElement("div");
			questionElement.classList.add("question-item");
			questionElement.textContent = question.question;
			questionElement.dataset.questionId = question.question_id;
			questionElement.onclick = () => handleQuestionSelect(questionElement);
			
			// Add drag and drop event listeners
			questionElement.ondragover = (e) => {
				e.preventDefault();
				questionElement.classList.add('drag-over');
			};
			questionElement.ondragleave = () => questionElement.classList.remove('drag-over');
			questionElement.ondrop = (e) => handleDrop(e, questionElement);
			
			return questionElement;
		}

		function createAnswerElement(answer) {
			const answerElement = document.createElement("div");
			answerElement.classList.add("answer-item");
			answerElement.style.backgroundColor = colors[answer.answer_id % colors.length];
			answerElement.textContent = answer.answer;
			answerElement.dataset.answerId = answer.answer_id;
			answerElement.onclick = () => handleAnswerSelect(answerElement);
			
			// Make answer draggable
			answerElement.draggable = true;
			answerElement.ondragstart = (e) => handleDragStart(e, answerElement);
			
			return answerElement;
		}

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

		function handleQuestionSelect(element) {
			if (element.dataset.matchedAnswerId) {
				// If the question is already matched, reset it
				const matchedAnswer = document.querySelector(`.answer-item[data-answer-id="${element.dataset.matchedAnswerId}"]`);
				if (matchedAnswer) {
					matchedAnswer.classList.remove('matched');
				}
				element.style.backgroundColor = '';
				delete element.dataset.matchedAnswerId;
				selectedQuestion = null;
			} else {
				// If it's not matched, select it
				if (selectedQuestion) selectedQuestion.classList.remove('selected');
				selectedQuestion = element;
				selectedQuestion.classList.add('selected');
				if (selectedAnswer) matchCards();
			}
		}

		function handleAnswerSelect(element) {
			if (selectedAnswer) selectedAnswer.classList.remove('selected');
			selectedAnswer = element;
			selectedAnswer.classList.add('selected');
			if (selectedQuestion) matchCards();
		}

		function matchCards() {
			if (!selectedQuestion || !selectedAnswer) return;

			// If the question was previously matched, reset the old match
			if (selectedQuestion.dataset.matchedAnswerId) {
				const oldMatchedAnswer = document.querySelector(`.answer-item[data-answer-id="${selectedQuestion.dataset.matchedAnswerId}"]`);
				if (oldMatchedAnswer) {
					oldMatchedAnswer.classList.remove('matched');
				}
			}

			// If the answer was previously matched, reset the old match
			const oldMatchedQuestion = document.querySelector(`.question-item[data-matched-answer-id="${selectedAnswer.dataset.answerId}"]`);
			if (oldMatchedQuestion) {
				oldMatchedQuestion.style.backgroundColor = '';
				delete oldMatchedQuestion.dataset.matchedAnswerId;
			}

			// Make the new match
			selectedQuestion.style.backgroundColor = selectedAnswer.style.backgroundColor;
			selectedQuestion.dataset.matchedAnswerId = selectedAnswer.dataset.answerId;
			selectedAnswer.classList.add('matched');

			selectedQuestion.classList.remove('selected');
			selectedAnswer.classList.remove('selected');
			selectedQuestion = null;
			selectedAnswer = null;
		}
				
		function handleDragStart(e, answerElement) {
			e.dataTransfer.setData('text/plain', answerElement.dataset.answerId);
			selectedAnswer = answerElement;
		}

		function handleDrop(e, questionElement) {
			e.preventDefault();
			questionElement.classList.remove('drag-over');
			const answerId = e.dataTransfer.getData('text');
			const answerElement = document.querySelector(`.answer-item[data-answer-id="${answerId}"]`);
			
			if (answerElement) {
				selectedQuestion = questionElement;
				matchCards();
			}
		}
		
		function checkStage() {
			attempts++;
			document.getElementById("attempts").textContent = `Attempts: ${attempts}`;

			let correctCount = 0;
			const totalQuestions = quizData[currentStage].questions.length;

			document.querySelectorAll('.question-item').forEach(questionCard => {
				const questionId = questionCard.dataset.questionId;
				const matchedAnswerId = questionCard.dataset.matchedAnswerId;
				const correctAnswer = quizData[currentStage].answers.find(a => a.question_id == questionId);

				if (matchedAnswerId == correctAnswer.answer_id) {
					correctCount++;
				} else {
					// Clear the background color for incorrect answers
					questionCard.style.backgroundColor = '';
					// Remove the matched answer ID
					delete questionCard.dataset.matchedAnswerId;
				}
			});

			if (correctCount === totalQuestions) {
				addAnimalsToFarm(totalQuestions);

				// Disable "Show All" and "Clear All" buttons
				document.querySelectorAll('.center-button').forEach(button => {
					if (button.textContent === 'Show All' || button.textContent === 'Clear All') {
						button.disabled = true;
					}
				});

				singleStageConfetti();
				showEncouragingPopup(correctCount, totalQuestions, true);

				if (currentStage < quizData.length - 1) {
					// Increment currentStage and update progress bar
					currentStage++;
					updateProgressBar();
					
					// Render the new stage after a short delay for better UX
					setTimeout(() => {
						attempts = 0;
						// Remove the old stage name if it exists
						const oldStageName = document.querySelector('.stage-name');
						if (oldStageName) {
							oldStageName.remove();
						}
						renderQuiz(); // Render the next stage
						document.getElementById("attempts").textContent = `Attempts: ${attempts}`;
					}, 1500);
				} else {
					// If all stages are complete
					currentStage++;
					updateProgressBar();
					allStagesConfetti();
					showModal("Congratulations! You've completed all stages.");
				}
			} else {
				showEncouragingPopup(correctCount, totalQuestions, false);
				if (attempts >= 10) {
					showModal("You've reached the maximum number of attempts. The correct answers have been revealed.");
					showAllAnswers(); // Reveal all correct answers

					// Disable the check answers button
					const checkAnswersButton = document.querySelector('.center-button.check-answers');
					if (checkAnswersButton) {
						checkAnswersButton.disabled = true;
					}
				}
			}

			scrollToTop();
		}

		function showAllAnswers() {
			const currentQuiz = quizData[currentStage];
			document.querySelectorAll('.question-item').forEach(questionCard => {
				const questionId = questionCard.dataset.questionId;
				const correctAnswer = currentQuiz.answers.find(a => a.question_id == questionId);
				const correctAnswerElement = document.querySelector(`.answer-item[data-answer-id="${correctAnswer.answer_id}"]`);
				
				if (correctAnswerElement) {
					questionCard.style.backgroundColor = correctAnswerElement.style.backgroundColor;
					questionCard.dataset.matchedAnswerId = correctAnswer.answer_id;
				}
			});

			// Disable drag-and-drop and click events after revealing all answers
			document.querySelectorAll('.question-item, .answer-item').forEach(item => {
				item.onclick = null;
				item.ondragstart = null;
				item.ondragover = null;
				item.ondrop = null;
			});
		}

		function clearAllAnswers() {
			// Clear question cards
			document.querySelectorAll('.question-item').forEach(questionCard => {
				questionCard.style.backgroundColor = '';
				delete questionCard.dataset.matchedAnswerId;
			});

			// Clear answer cards
			document.querySelectorAll('.answer-item').forEach(answerCard => {
				answerCard.classList.remove('matched');
			});

			// Re-enable interactions
			document.querySelectorAll('.question-item, .answer-item').forEach(item => {
				item.onclick = item.classList.contains('question-item') ? 
					() => handleQuestionSelect(item) : 
					() => handleAnswerSelect(item);
				
				if (item.classList.contains('answer-item')) {
					item.draggable = true;
					item.ondragstart = (e) => handleDragStart(e, item);
				} else {
					item.ondragover = (e) => {
						e.preventDefault();
						item.classList.add('drag-over');
					};
					item.ondragleave = () => item.classList.remove('drag-over');
					item.ondrop = (e) => handleDrop(e, item);
				}
			});
		}
		
		function showEncouragingPopup(correctCount, totalQuestions, isStageComplete) {
			const incorrectCount = totalQuestions - correctCount;
			let message = `You got ${correctCount} correct and ${incorrectCount} incorrect.`;
			
			// Add encouraging message based on performance
			if (correctCount === totalQuestions) {
				message += " Perfect score!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.7)) {
				message += " Great job! You're really getting the hang of this!";
			} else if (correctCount >= Math.ceil(totalQuestions * 0.5)) {
				message += " Good effort! Keep practicing and you'll improve in no time!";
			} else {
				message += " Don't give up! Every attempt helps you learn. Try again!";
			}

			// Add stage completion message if applicable
			if (isStageComplete) {
				message += "\n\n You've completed this stage. Moving to the next stage.";
			}

			showModal(message);
		}


			function updateProgressBar() {
				const progressBar = document.getElementById("progress-bar");
				const completedStages = currentStage;
				const progress = (completedStages / quizData.length) * 100;
				const roundedProgress = Math.min(100, Math.max(0, Math.round(progress)));
				progressBar.style.width = `${roundedProgress}%`;
				progressBar.textContent = roundedProgress > 0 ? `${roundedProgress}%` : '';
			}

			function updateStageNumber() {
				const stageElement = document.getElementById("stage-number");
				stageElement.textContent = `Stage ${currentStage + 1} of ${quizData.length}`;
			}

		function singleStageConfetti() {
			function randomInRange(min, max) {
				return Math.random() * (max - min) + min;
			}
			confetti({
				angle: randomInRange(55, 125),
				spread: randomInRange(50, 70),
				particleCount: randomInRange(50, 100),
				origin: { y: 0.6 },
			});
		}

		function allStagesConfetti() {
			const defaults = {
				spread: 360,
				ticks: 50,
				gravity: 0,
				decay: 0.94,
				startVelocity: 30,
				shapes: ["star"],
				colors: ["FFE400", "FFBD00", "E89400", "FFCA6C", "FDFFB8"],
			};
			function shoot() {
				confetti({
					...defaults,
					particleCount: 40,
					scalar: 1.2,
					shapes: ["star"],
				});
				confetti({
					...defaults,
					particleCount: 10,
					scalar: 0.75,
					shapes: ["circle"],
				});
			}
			setTimeout(shoot, 0);
			setTimeout(shoot, 100);
			setTimeout(shoot, 200);
		}

        let farmAnimals = [];

        function addAnimalsToFarm(count) {
            const animalFarm = document.getElementById('animalFarm');
            let availableAnimals = animals.filter(animal => !farmAnimals.includes(animal));

            console.log(`Adding ${count} animals to the farm. Current farm size: ${farmAnimals.length}`);

            for (let i = 0; i < count; i++) {
                if (availableAnimals.length === 0) {
                    console.log("No more unique animals available!");
                    break;
                }

                const randomIndex = Math.floor(Math.random() * availableAnimals.length);
                const chosenAnimal = availableAnimals[randomIndex];

                const animalElement = document.createElement('li');
                animalElement.textContent = chosenAnimal;
                animalFarm.appendChild(animalElement);

                farmAnimals.push(chosenAnimal);
                availableAnimals.splice(randomIndex, 1);
                console.log(`Added animal: ${chosenAnimal}`);
            }

            console.log(`Farm size after addition: ${farmAnimals.length}`);
            logAnimalFarmState();
        }

        function logAnimalFarmState() {
            console.log(`Current animal farm state: ${farmAnimals.length} animals`);
            console.log(farmAnimals);
        }

		const animals = [
			"🐉", "🐻", "🦗", "🦁", "🐔", "🦂", "🐟", "🐣", "🐯", "🦡",
			"🐰", "🐍", "🦅", "🐈", "🦈", "🦜", "🦛", "🐀", "🐑",
			"🐮", "🦇", "🐇", "🦖", "🦀", "🦎", "🐃", "🐡", "🐤",
			"🐪", "🦥", "🐛", "🐅", "🐥", "🐱", "🐺", "🐕", "🦩", "🐊",
			"🐖", "🐢", "🕷", "🦕", "🦌", "🐁", "🦨", "🦘", "🐵",
			"🦑", "🐋", "🦓", "🦒", "🐲", "🦆", "🦉", "🐶", "🐄", "🦟",
			"🦃", "🦧", "🦏", "🐙", "🐿", "🦢", "🐜", "🐦", "🐞",
			"🦐", "🦔", "🐼", "🦄", "🦞", "🐫", "🐭", "🐆", "🦝",
			"🐠", "🦚", "🐴", "🐏", "🦮", "🐐", "🐹", "🐎", "🦋", "🐳",
			"🐨", "🐂", "🦍", "🦙", "🐬", "🦦", "🦊", "🐌", "🐓", "🐧",
			"🐷", "🐩", "🐘", "🐸", "🐝"
		];

        function showModal(message) {
            const modal = document.getElementById("quizModal");
            const modalMessage = document.getElementById("modalMessage");
            const modalButton = document.getElementById("modalButton");
            const modalClose = document.getElementsByClassName("modal-quiz-close")[0];

            modalMessage.textContent = message;
            modal.style.display = "block";

            modalButton.onclick = function() {
                modal.style.display = "none";
            }

            modalClose.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        }

        function initializeQuiz() {
            console.log("Initializing quiz");
            currentStage = 0;
            attempts = 0;
            renderQuiz();
            updateProgressBar();
            const attemptsElement = document.getElementById("attempts");
            if (attemptsElement) {
                attemptsElement.textContent = `Attempts: ${attempts}`;
            } else {
                console.error("Attempts element not found");
            }
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

		window.addEventListener('load', () => {
			console.log("Window loaded");
			initializeSwitch();
			adjustLayout();
			showContent('Practice');
			initializeQuiz(); // Move this here
		});

        window.addEventListener('resize', adjustLayout);

        // Load the copyright content from the external URL and insert it into the div
        fetch('http://ez42.live/global/copyright.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('copyright-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading copyright:', error));
    </script>
</body>
</html>